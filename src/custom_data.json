{
  "actors": {},
  "buckets": {},
  "savestates": {},
  "combat_skills": {},
  "effects": {},
  "emitters": {},
  "projectiles": {},
  "items": {
    "archipelago_basebox": {
      "name": "Placeholder archipelago item (vague info about multiworld item type here?)",
      "slot": "nothing",
      "enchantments": [],
      "category": "miscellaneous",
      "description": "Placeholder item for consumable archipelago checks, namely shop items (put information about the corresponding multiworld item here?)",
      "icon": "icon_archipelagopow",
      "uselink": "Open it",
      "usescript": "archipelago_opencheckbox",
      "sellvalue": 0.0,
      "region": "Various",
      "bluetext": "Bluetext here",
      "source": "Archipelago checks in shops"
    },
    "archipelago_shopitem": {
      "name": "Placeholder archipelago item",
      "slot": "nothing",
      "category": "miscellaneous",
      "description": "Placeholder item for archipelago checks sold in shops",
      "icon": "icon_archipelagopow",
      "sellvalue": 1.0,
      "region": "Various",
      "source": "Archipelago checks in shops"
    }
  },
  "scripts": {
    "archipelago_opencheckbox": {
      "invpopup": [
        [
          "say",
          "Opened!"
        ],
        [
          "say",
          "Do the check here (in JSON)"
        ],
        [
          "option",
          "done",
          "Done"
        ]
      ],
      "done": [
        [
          "consume"
        ],
        [
          "exit"
        ]
      ]
    },
    "bandit1_door": {
      "getgearrough": [
        [
          "leftspeak",
          "Toss out your weapons and I won't rough you up."
        ],
        [
          "say",
          "You hear a quiet but heated discussion inside.  Eventually a voice says \"All right,\" and some pistols fall out the window."
        ],
        [
          "checklocation",
          "Desert House - Gang Shakedown"
        ],
        [
          "sayoption",
          "getgear2",
          "Just kidding, I'm still going to rough you up a little."
        ]
      ],
      "getgear": [
        [
          "leftspeak",
          "Toss out your weapons and I won't arrest you."
        ],
        [
          "say",
          "You hear a quiet but heated discussion inside.  Eventually a voice says \"All right,\" and some pistols fall out the window."
        ],
        [
          "checklocation",
          "Desert House - Gang Shakedown"
        ],
        [
          "sayoption",
          "getgear2",
          "Just kidding, I'm still going to arrest you."
        ]
      ]
    },
    "bandit1_fight": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "Justice has been served to the old House gang."
        ],
        [
          "addxp",
          "@xpreward_a@*3"
        ],
        [
          "addflag",
          "bandit1_killed"
        ],
        [
          "addflag",
          "bandit1_resolved,2"
        ],
        [
          "changewaaproperty",
          "sneak,0"
        ],
        [
          "additem",
          "quest_bandit1remainskill"
        ],
        [
          "checklocation",
          "Desert House - Gang Killed"
        ],
        [
          "if",
          "itemroll(40) && !hasitem(hat_black)"
        ],
        [
          "additem",
          "hat_black"
        ],
        [
          "if",
          "itemroll(20) && !hasitem(boots_black)"
        ],
        [
          "additem",
          "boots_black"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "bandit2_bartendercorpse": {
      "e": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "He had a jaw harp in his pocket!"
        ],
        [
          "say",
          "Maybe they killed him for playing the jaw harp too much."
        ],
        [
          "checklocation",
          "Cavern Canyon Bar - Bartender's Bones"
        ]
      ]
    },
    "bandit2_bones": {
      "popup": [
        [
          "say",
          "The remains of a group of outlaws, tragically killed by a giant spider."
        ],
        [
          "if",
          "!hasflag(bandit2_bountygot) && !hasflag(bandit2_gotremains)"
        ],
        [
          "say",
          "There's a tattooed tooth in one of the skulls."
        ],
        [
          "if",
          "!hasflag(bandit2_bountygot) && !hasflag(bandit2_gotremains)"
        ],
        [
          "option",
          "take",
          "Take it"
        ]
      ],
      "take": [
        [
          "cls"
        ],
        [
          "say",
          "It comes out real easy like.  The spider venom must've loosened things up."
        ],
        [
          "additem",
          "quest_bandit2remains"
        ],
        [
          "say",
          "Also, though the rest of the bones are picked clean, the gang's stripey hats lie nearby.  Apparently even the spider was disgusted by them.  You take one."
        ],
        [
          "checklocation",
          "Cavern Canyon - Stripey Hat Gang Killed"
        ],
        [
          "addflag",
          "bandit2_gotremains"
        ]
      ]
    },
    "bandit2_boozeshelf": {
      "take": [
        [
          "cls"
        ],
        [
          "say",
          "You grab 'em."
        ],
        [
          "checklocation",
          "Cavern Canyon Bar - Behind the Bar"
        ],
        [
          "markused"
        ]
      ]
    },
    "bandit2_fighttrigger": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "addflag",
          "bandit2_resolved,2"
        ],
        [
          "addflag",
          "bandit2_spiderscene"
        ],
        [
          "changewaaproperty",
          "sneak,0"
        ],
        [
          "say",
          "You put an end to the Stripey Hat Gang's reign of bad taste."
        ],
        [
          "addxp",
          "xpreward_a*3"
        ],
        [
          "say",
          "You take the leader's tattooed tooth, as a means of identifying him."
        ],
        [
          "additem",
          "quest_bandit2remains"
        ],
        [
          "say",
          "You also take one of those horrible hats, as a souvenir."
        ],
        [
          "checklocation",
          "Cavern Canyon - Stripey Hat Gang Killed"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "bandit2_lootpile1": {
      "open": [
        [
          "markused"
        ],
        [
          "cls"
        ],
        [
          "say",
          "You dig through the crate.  It's mostly full of packing straw, but you find a pretty fancy knife at the bottom!"
        ],
        [
          "checklocation",
          "Cavern Canyon Spider Cave - Weapens Box"
        ],
        [
          "say",
          "You hear a sudden chittering coming from that big hole behind you."
        ],
        [
          "addflag",
          "bandit2_wokespider"
        ]
      ]
    },
    "bandit2_lootpile2": {
      "open": [
        [
          "markused"
        ],
        [
          "cls"
        ],
        [
          "say",
          "You dig through the crate."
        ],
        [
          "additem",
          "potion_laudanum,2"
        ],
        [
          "checklocation",
          "Cavern Canyon Spider Cave - Medisun Box"
        ],
        [
          "say",
          "You hear a sudden chittering coming from that big hole behind you."
        ],
        [
          "addflag",
          "bandit2_wokespider"
        ]
      ]
    },
    "bandit2_lootpile3": {
      "open": [
        [
          "markused"
        ],
        [
          "cls"
        ],
        [
          "say",
          "You open the crate to find a single bottle of booze.  It's not the fanciest in the world, but for these parts, it's pretty fancy."
        ],
        [
          "checklocation",
          "Cavern Canyon Spider Cave - Booze Box"
        ],
        [
          "say",
          "You hear a sudden chittering coming from that big hole behind you."
        ],
        [
          "addflag",
          "bandit2_wokespider"
        ]
      ]
    },
    "bandit4_officesafe": {
      "crack": [
        [
          "cls"
        ],
        [
          "playsound",
          "opensafe"
        ],
        [
          "say",
          "The safe contains an extremely broad-brimmed hat."
        ],
        [
          "checklocation",
          "Old Millinery - Office Safe"
        ],
        [
          "markused"
        ]
      ]
    },
    "bandit5_ghost1": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "addflag",
          "bandit5_ghost1,2"
        ],
        [
          "say",
          "Thanks to your unrivaled peacemaking abilities, that ghost is definitely at peace now."
        ],
        [
          "addxp",
          "@xpreward_c@*5"
        ],
        [
          "additem",
          "quest_bandit5remains1"
        ],
        [
          "checklocation",
          "Abandoned Pickle Factory Cukes Room - Ghost Put To Rest"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ],
      "fix": [
        [
          "rightspeak",
          "It's...  It's finally done.  Thank you."
        ],
        [
          "say",
          "The ghost smiles as he fades away.  A few bones hit the ground below it."
        ],
        [
          "additem",
          "quest_bandit5remains1"
        ],
        [
          "checklocation",
          "Abandoned Pickle Factory Cukes Room - Ghost Put To Rest"
        ],
        [
          "addflag",
          "bandit5_ghost1,1"
        ],
        [
          "incflag",
          "peoplehelped,1"
        ],
        [
          "option",
          "done",
          "Rest in peace, poor guy"
        ]
      ]
    },
    "bandit5_ghost2": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "addflag",
          "bandit5_ghost2,2"
        ],
        [
          "say",
          "You've put that unfortunate bandit to rest.  Maybe now he'll have less of a salty attitude."
        ],
        [
          "addxp",
          "@xpreward_c@*5"
        ],
        [
          "additem",
          "quest_bandit5remains2"
        ],
        [
          "checklocation",
          "Abandoned Pickle Factory Salt Room - Ghost Put To Rest"
        ],
        [
          "addstate",
          "winbutton,Rest easy, salty guy."
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ],
      "fix": [
        [
          "rightspeak",
          "It's...  It's finally done.  Thank you."
        ],
        [
          "say",
          "The ghost smiles as he fades away.  A few bones hit the ground below it."
        ],
        [
          "additem",
          "quest_bandit5remains2"
        ],
        [
          "checklocation",
          "Abandoned Pickle Factory Salt Room - Ghost Put To Rest"
        ],
        [
          "addflag",
          "bandit5_ghost2,1"
        ],
        [
          "incflag",
          "peoplehelped,1"
        ],
        [
          "option",
          "done",
          "Rest in peace"
        ]
      ]
    },
    "bandit5_ghost3": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "addflag",
          "bandit5_ghost3,2"
        ],
        [
          "say",
          "You set that ghostly fellow to rights, all right."
        ],
        [
          "addxp",
          "@xpreward_c@*5"
        ],
        [
          "additem",
          "quest_bandit5remains3"
        ],
        [
          "checklocation",
          "Abandoned Pickle Factory Vinegar Room - Ghost Put To Rest"
        ],
        [
          "say",
          "Weird.  He didn't even have legs."
        ],
        [
          "addstate",
          "winbutton,Rest in peace, poor guy."
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ],
      "fix": [
        [
          "rightspeak",
          "It's...  It's finally done.  Thank you."
        ],
        [
          "say",
          "The ghost smiles as he fades away.  A few bones hit the ground below it."
        ],
        [
          "additem",
          "quest_bandit5remains3"
        ],
        [
          "checklocation",
          "Abandoned Pickle Factory Vinegar Room - Ghost Put To Rest"
        ],
        [
          "addflag",
          "bandit5_ghost3,1"
        ],
        [
          "incflag",
          "peoplehelped,1"
        ],
        [
          "option",
          "done",
          "Rest in peace"
        ]
      ]
    },
    "bandit5_picklelever": {
      "success": [
        [
          "addflag",
          "bandit5_usedfactory"
        ],
        [
          "say",
          "You pull the lever and there is a deafening roar as the old machinery springs into life."
        ],
        [
          "say",
          "After a while, a load of pickles is deposited in the receptacle to the left of the switch."
        ],
        [
          "checklocation",
          "Abandoned Pickle Factory - Puzzle Solved"
        ],
        [
          "say",
          "Huh.  All that work for three pickles?  No wonder this place went out of business."
        ],
        [
          "if",
          "!hasitem(quest_bandit5remains1)"
        ],
        [
          "say",
          "The ghost from the cucumber room drifts through the door, gives you a grateful look, then clatters to the floor as it is replaced with a pile of bones."
        ],
        [
          "if",
          "!hasitem(quest_bandit5remains1)"
        ],
        [
          "addflag",
          "bandit5_ghost1,1"
        ],
        [
          "if",
          "!hasitem(quest_bandit5remains1)"
        ],
        [
          "checklocation",
          "Abandoned Pickle Factory Cukes Room - Ghost Put To Rest"
        ],
        [
          "if",
          "!hasitem(quest_bandit5remains1)"
        ],
        [
          "additem",
          "quest_bandit5remains1"
        ],
        [
          "if",
          "!hasitem(quest_bandit5remains2)"
        ],
        [
          "say",
          "The ghost from the salt room drifts through the door, gives you a grateful look, then collapses into a pile of remains."
        ],
        [
          "if",
          "!hasitem(quest_bandit5remains2)"
        ],
        [
          "addflag",
          "bandit5_ghost2,1"
        ],
        [
          "if",
          "!hasitem(quest_bandit5remains2)"
        ],
        [
          "checklocation",
          "Abandoned Pickle Factory Salt Room - Ghost Put To Rest"
        ],
        [
          "if",
          "!hasitem(quest_bandit5remains2)"
        ],
        [
          "additem",
          "quest_bandit5remains2"
        ],
        [
          "if",
          "!hasitem(quest_bandit5remains3)"
        ],
        [
          "say",
          "The ghost from the vinegar room drifts through the door, gives you a grateful look, then vanishes in a puff of bones."
        ],
        [
          "if",
          "!hasitem(quest_bandit5remains3)"
        ],
        [
          "addflag",
          "bandit5_ghost3,1"
        ],
        [
          "if",
          "!hasitem(quest_bandit5remains3)"
        ],
        [
          "checklocation",
          "Abandoned Pickle Factory Vinegar Room - Ghost Put To Rest"
        ],
        [
          "if",
          "!hasitem(quest_bandit5remains3)"
        ],
        [
          "additem",
          "quest_bandit5remains3"
        ],
        [
          "option",
          "done",
          "Yep"
        ]
      ]
    },
    "bandit5_shovelbin": {
      "get": [
        [
          "cls"
        ],
        [
          "checklocation",
          "Abandoned Pickle Factory Vinegar Room - Coal Cart"
        ],
        [
          "markused"
        ]
      ]
    },
    "bandit6_beancrate": {
      "get": [
        [
          "markused"
        ],
        [
          "cls"
        ],
        [
          "checklocation",
          "Jelly Bean Thieves' Hideout - Jellybean Jar"
        ],
        [
          "exit"
        ]
      ]
    },
    "bandit6_loot1": {
      "loot": [
        [
          "cls"
        ],
        [
          "clearrandom",
          ""
        ],
        [
          "pushrandom",
          "booze_cheapwhiskey"
        ],
        [
          "pushrandom",
          "booze_cheaptequila"
        ],
        [
          "pushrandom",
          "booze_cheapwine"
        ],
        [
          "pushrandom",
          "booze_hardsarsaparilla"
        ],
        [
          "pushrandom",
          "potion_hogoil"
        ],
        [
          "pushrandom",
          "potion_toothpowder"
        ],
        [
          "pushrandom",
          "potion_cologne"
        ],
        [
          "pushrandom",
          "combat_match"
        ],
        [
          "pushrandom",
          "combat_kerosene"
        ],
        [
          "addstate",
          "quant,1"
        ],
        [
          "if",
          "hasflag(containers_generic)>3"
        ],
        [
          "incstate",
          "quant,rand(1,2)"
        ],
        [
          "if",
          "hasflag(containers_generic)>7"
        ],
        [
          "incstate",
          "quant,rand(1,2)"
        ],
        [
          "additem",
          "pickone(needle,needle,needle,needle,needle,nails,nails,soap,lock,oilcan,rope),$quant$"
        ],
        [
          "addstate",
          "quant,1"
        ],
        [
          "if",
          "hasflag(containers_generic)>5"
        ],
        [
          "incstate",
          "quant,rand(1,2)"
        ],
        [
          "additem",
          "poprandom(),$quant$"
        ],
        [
          "if",
          "itemroll(30)"
        ],
        [
          "additem",
          "poprandom"
        ],
        [
          "incflag",
          "containers_generic,1"
        ],
        [
          "checklocation",
          "Jelly Bean Thieves' Hideout - Crate Beside Stove"
        ],
        [
          "addmeat",
          "rand(80,120),1"
        ],
        [
          "markused"
        ]
      ]
    },
    "bandit6_loot3": {
      "open": [
        [
          "markused"
        ],
        [
          "cls"
        ],
        [
          "say",
          "The crate's full of dynamite!  Score!"
        ],
        [
          "checklocation",
          "Jelly Bean Thieves' Hideout - Crate Beside Bed"
        ]
      ]
    },
    "bandit6_trigger": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You fight 'em and win! Which is surprising, because those guys were supposed to be real tough!"
        ],
        [
          "addxp",
          "@xpreward_f@*5"
        ],
        [
          "checklocation",
          "Jelly Bean Thieves' Hideout - Thieves Killed (Item 1)"
        ],
        [
          "checklocation",
          "Jelly Bean Thieves' Hideout - Thieves Killed (Item 2)"
        ],
        [
          "addflag",
          "bandit6_resolved,1"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "bandit7_beastpile": {
      "get": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "You plop a big ol' glob of yeast into your pack."
        ],
        [
          "checklocation",
          "Ol' Schmaltz Brewery - Deceased Yeast Beast"
        ]
      ]
    },
    "bandit7_beershelf": {
      "get": [
        [
          "cls"
        ],
        [
          "say",
          "Three cans of beer on the wall, three cans of beer! Take them all down and put them in your bag, instead of singing the rest of this song about beer!"
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "Ol' Schmaltz Brewery - Shelf"
        ]
      ]
    },
    "bandit7_yeastyhat": {
      "e": [
        [
          "addflag",
          "bandit7_yeastyhat"
        ],
        [
          "cls"
        ],
        [
          "say",
          "Okay, but ew."
        ],
        [
          "checklocation",
          "Ol' Schmaltz Brewery - Dead Guy"
        ]
      ]
    },
    "bandit8_bookshelf2": {
      "start": [
        [
          "say",
          "There are quite a few good books on here, actually!"
        ],
        [
          "checklocation",
          "Chuck's House Cellar - Bookcase (Item 1)"
        ],
        [
          "checklocation",
          "Chuck's House Cellar - Bookcase (Item 2)"
        ],
        [
          "checklocation",
          "Chuck's House Cellar - Bookcase (Item 3)"
        ],
        [
          "option",
          "done",
          "What a haul!"
        ]
      ]
    },
    "bandit8_dresser": {
      "popup": [
        [
          "say",
          "Going through Chuck's drawers seems like maybe not a good idea."
        ],
        [
          "if",
          "!hasflag(chuckshouse_gotkey)"
        ],
        [
          "say",
          "There is a key on top of the dresser, though."
        ],
        [
          "if",
          "!hasflag(chuckshouse_gotkey)"
        ],
        [
          "option",
          "get",
          "Yoink!"
        ]
      ],
      "get": [
        [
          "cls"
        ],
        [
          "checklocation",
          "Chuck's House - Bedroom Dresser"
        ],
        [
          "addflag",
          "chuckshouse_gotkey"
        ],
        [
          "say",
          "Yoink, indeed."
        ]
      ]
    },
    "bandit8_mailbag": {
      "take": [
        [
          "cls"
        ],
        [
          "say",
          "You sling the sack of mail over your shoulder. Neither rain nor sleet nor super-creepy B&B proprietors."
        ],
        [
          "checklocation",
          "Chuck's House Cellar - Mail Bag"
        ],
        [
          "addflag",
          "bandit8_tookmail"
        ]
      ]
    },
    "bandit8_nightstand": {
      "e": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "Chuck's House Cellar - Nightstand"
        ]
      ]
    },
    "bandit9_checklouise": {
      "start": [
        [
          "if",
          "!hasflag(ranch2_sentbaker)"
        ],
        [
          "goto",
          "done"
        ],
        [
          "if",
          "hasflag(bandit9_talkedtolouise)"
        ],
        [
          "goto",
          "done"
        ],
        [
          "if",
          "hasflag(bandit9_done)"
        ],
        [
          "goto",
          "louiseintro2"
        ],
        [
          "incflag",
          "peoplehelped,1"
        ],
        [
          "say",
          "You see Louise Lathrop busily baking bread.  Billy Baker hops to his feet as you enter."
        ],
        [
          "rightportrait",
          "bandit1_serious"
        ],
        [
          "rightsay",
          "Hey! Thanks for sending Louise over! She knows a ton about baking!"
        ],
        [
          "rightportrait",
          "bandit1_sad"
        ],
        [
          "rightsay",
          "Yeah! We're gonna be major league bakers with her around!"
        ],
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "No problem, fellas. Let me grab enough bread to settle things with the Mayor, and we'll call it square."
        ],
        [
          "addflag",
          "bandit9_done,6"
        ],
        [
          "refreshwaa"
        ],
        [
          "checklocation",
          "Baker Boys' Hideout - Bread Recovered"
        ],
        [
          "addflag",
          "bandit9_talkedtolouise,1"
        ],
        [
          "option",
          "done",
          "All's well that ends well!"
        ]
      ]
    },
    "bandit9_leader": {
      "yesgrain": [
        [
          "say",
          "The Baker Boys sneak out to Kellogg Ranch to filch a few bags of grain."
        ],
        [
          "say",
          "After a couple tries, the boys hit on a decent bread recipe, and bake enough to cover what they stole from the Mayor."
        ],
        [
          "checklocation",
          "Baker Boys' Hideout - Bread Recovered"
        ],
        [
          "addflag",
          "bandit9_done,1"
        ],
        [
          "incflag",
          "peoplehelped,2"
        ],
        [
          "option",
          "done",
          "All's well that ends well!"
        ]
      ],
      "yesbones": [
        [
          "say",
          "The Baker Boys sneak out to the Buffalo Pile and collect a load of bones, which do indeed turn out to make bizarrely effective fertilizer. As in, you can literally watch the wheat growing."
        ],
        [
          "say",
          "The grain seems fine though, and after a couple tries, the boys hit on a decent bread recipe, and bake enough to cover what they stole from the Mayor."
        ],
        [
          "checklocation",
          "Baker Boys' Hideout - Bread Recovered"
        ],
        [
          "addflag",
          "bandit9_done,2"
        ],
        [
          "incflag",
          "peoplehelped,2"
        ],
        [
          "option",
          "done",
          "All's well that ends well!"
        ]
      ],
      "yesforage": [
        [
          "say",
          "You teach Jerry how to find the wild ingredients they need while Billy works on figuring out a proper recipe."
        ],
        [
          "say",
          "After a couple tries, they manage to produce a pretty decent loaf of bread, and bake enough to cover what they stole from the Mayor."
        ],
        [
          "checklocation",
          "Baker Boys' Hideout - Bread Recovered"
        ],
        [
          "addflag",
          "bandit9_done,3"
        ],
        [
          "incflag",
          "peoplehelped,2"
        ],
        [
          "option",
          "done",
          "All's well that ends well!"
        ]
      ],
      "yesilldoit": [
        [
          "leftspeak",
          "$lastoption$"
        ],
        [
          "say",
          "The boys grumble, but they turn over the last remnants of their ingredients, and you manage to get enough bread out of them to satisfy the mayor."
        ],
        [
          "checklocation",
          "Baker Boys' Hideout - Bread Recovered"
        ],
        [
          "addflag",
          "bandit9_done,4"
        ],
        [
          "incflag",
          "peoplehelped,2"
        ],
        [
          "option",
          "done",
          "Good enough for me!"
        ]
      ],
      "yesilldoit2": [
        [
          "leftspeak",
          "$lastoption$"
        ],
        [
          "say",
          "The boys grumble, but they turn over the last remnants of their ingredients, and you manage to get enough bread out of them to satisfy the mayor."
        ],
        [
          "checklocation",
          "Baker Boys' Hideout - Bread Recovered"
        ],
        [
          "addflag",
          "bandit9_done,5"
        ],
        [
          "incflag",
          "peoplehelped,2"
        ],
        [
          "option",
          "done",
          "Good enough for me!"
        ]
      ]
    },
    "beancave_beaniron1": {
      "pickit": [
        [
          "cls"
        ],
        [
          "say",
          "There we go!"
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "The Great Garbanzo's Hideout - Bean-Iron Deposit"
        ]
      ]
    },
    "beancave_bed": {
      "e": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "It wasn't a pillow at all, but a bag of beans!"
        ],
        [
          "checklocation",
          "The Great Garbanzo's Hideout - Under the Pillow"
        ]
      ]
    },
    "beancave_bookshelf": {
      "e": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "The Great Garbanzo's Hideout - Bookcase"
        ]
      ]
    },
    "beancave_sofa": {
      "e": [
        [
          "addflag",
          "beancave_sofa"
        ],
        [
          "cls"
        ],
        [
          "say",
          "You find some loose beans in the cushions."
        ],
        [
          "checklocation",
          "The Great Garbanzo's Hideout - Between the Cushions"
        ]
      ]
    },
    "breadwood_hallowaylocker": {
      "picklock": [
        [
          "playsound",
          "Player_Use_Lockpick"
        ],
        [
          "addflag",
          "breadwood_hallowaylocker"
        ],
        [
          "say",
          "The locker contains the key to itself and a few miscellaneous sundries."
        ],
        [
          "removeitem",
          "needle"
        ],
        [
          "checklocation",
          "Breadwood Bunkhouse - Footlocker"
        ]
      ]
    },
    "breadwood_mayor": {
      "prob5": [
        [
          "addflag",
          "breadwood_quest5"
        ],
        [
          "incflag",
          "breadwood_quests,1"
        ],
        [
          "rightportrait",
          "mayor"
        ],
        [
          "rightsay",
          "We keep a municipal soup kitchen open to help those who're down on their luck -- which is pretty much everybody 'round here. But we've run out of soup, and need someone to go fetch some more from Soupstock Lode."
        ],
        [
          "say",
          "He gives you a stack of bread bowls to carry the soup in."
        ],
        [
          "checklocation",
          "Breadwood Mayor's Office - Soup Quest Accepted"
        ],
        [
          "if",
          "!hasflag(map_mine5)"
        ],
        [
          "mapunlock",
          "mine5,Soupstock Lode"
        ],
        [
          "addstate",
          "maplocs,=countflags(map_)"
        ],
        [
          "if",
          "$maplocs$>36 && $maplocs$<40"
        ],
        [
          "giveachievement",
          "ach_37maplocs"
        ],
        [
          "sayoption",
          "done",
          "Okay, off I go."
        ]
      ]
    },
    "breadwood_questyjones": {
      "yes": [
        [
          "addflag",
          "breadwood_jonesquest,1"
        ],
        [
          "leftspeak",
          "$lastoption$"
        ],
        [
          "rightsay",
          "Great! Thanks a bundle."
        ],
        [
          "checklocation",
          "Breadwood Bunkhouse - Hobart's Camera"
        ],
        [
          "if",
          "!hasflag(map_cemetery6)"
        ],
        [
          "say",
          "He marks the location of the cemetery on your map."
        ],
        [
          "if",
          "!hasflag(map_cemetery6)"
        ],
        [
          "mapunlock",
          "cemetery6,Petting Cemetery"
        ],
        [
          "addstate",
          "maplocs,=countflags(map_)"
        ],
        [
          "if",
          "$maplocs$>36 && $maplocs$<40"
        ],
        [
          "giveachievement",
          "ach_37maplocs"
        ],
        [
          "sayoption",
          "done",
          "Okay. I'll be back."
        ],
        [
          "sayoption",
          "done",
          "Okay. Owl be back."
        ],
        [
          "sayoption",
          "done",
          "Owlkay. Owl be back. Owl."
        ]
      ]
    },
    "breadwood_spittoon": {
      "seven": [
        [
          "say",
          "Boots, great. Boots full of bandit spit. I hope they have to invent a whole new kind of trenchfoot just for you. I hope they name it after you."
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "Breadwood - Spittoon"
        ],
        [
          "incflag",
          "spittoonsopen,1"
        ],
        [
          "option",
          "done",
          "You're just jealous of my sweet new boots."
        ]
      ]
    },
    "breadwood_tradingpost": {
      "initstore": [
        [
          "addflag",
          "store_breadwood"
        ],
        [
          "if",
          "gary"
        ],
        [
          "addnpcstoreitem",
          "breadwood,shroomgro,1,500"
        ],
        [
          "addnpcstoreitem",
          "breadwood,rope,1"
        ],
        [
          "addnpcstoreitem",
          "breadwood,pickone(lock,soap,nails,oilcan,rope),1"
        ],
        [
          "teleportplayer",
          "860,215"
        ],
        [
          "resetanimation",
          "player"
        ],
        [
          "npcstore",
          "breadwood,900,-10"
        ],
        [
          "exit"
        ]
      ]
    },
    "buttonwillowstore_shop": {
      "initstore": [
        [
          "addflag",
          "store_buttonwillow,1"
        ],
        [
          "addnpcstoreitem",
          "buttonwillow,booze_cheapwhiskey,-1"
        ],
        [
          "addnpcstoreitem",
          "buttonwillow,booze_cheaptequila,-1"
        ],
        [
          "addnpcstoreitem",
          "buttonwillow,oilcan,1"
        ],
        [
          "if",
          "gary"
        ],
        [
          "addnpcstoreitem",
          "buttonwillow,shroomgro,1,500"
        ],
        [
          "addnpcstoreitem",
          "buttonwillow,needle,rand(1,2)"
        ],
        [
          "addnpcstoreitem",
          "buttonwillow,pickone(lock,soap,nails,oilcan,rope),1"
        ],
        [
          "addnpcstoreitem",
          "buttonwillow,pickone(lock,soap,nails,oilcan,rope),1"
        ],
        [
          "addnpcstoreitem",
          "buttonwillow,pickone(crowbar,shovel),1"
        ],
        [
          "say",
          "The woman behind the counter stares at you with a huge grin on her face."
        ],
        [
          "say",
          "She gestures at the goods she's got for sale."
        ],
        [
          "option",
          "launch",
          "Take a look"
        ],
        [
          "option",
          "done",
          "Take a step backwards"
        ]
      ]
    },
    "cemetery2_alcove1": {
      "take": [
        [
          "say",
          "If this doesn't call for a 'yoink!' sound effect, I don't know what does."
        ],
        [
          "markused"
        ],
        [
          "cls"
        ],
        [
          "checklocation",
          "Old Mission Catacombs - First Skull"
        ]
      ]
    },
    "cemetery2_alcove3": {
      "grab": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "The skull was resting on top of a commemorative spoon! Your treasure-hunting senses are finely honed, though not very discriminating."
        ],
        [
          "checklocation",
          "Old Mission Catacombs - Third Skull"
        ]
      ]
    },
    "cemetery2_ragpile": {
      "inv": [
        [
          "cls"
        ],
        [
          "addflag",
          "cemetery2_ragpile"
        ],
        [
          "say",
          "Amid the other refuse, you find something strange."
        ],
        [
          "checklocation",
          "Old Mission Catacombs - Trash Pile"
        ]
      ]
    },
    "cemetery2_relicnun": {
      "finish": [
        [
          "addflag",
          "cemetery2_quest,2"
        ],
        [
          "rightsay",
          "You've recovered all of the relics! Oh, praise be! Thank you!"
        ],
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "I'm glad to have helped, Sister."
        ],
        [
          "rightsay",
          "I must reward you for your efforts, though. We don't have much, but you might find this handy? One of our old priests left it behind."
        ],
        [
          "checklocation",
          "Old Mission - Holy Relic Quest Completed"
        ],
        [
          "sayoption",
          "done",
          "Cool, thanks!"
        ]
      ]
    },
    "cemetery2_saint2pile": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "Well done!  Now Santa Cortada's in pieces so small they can't do any harm."
        ],
        [
          "addxp",
          "xpreward_c*3"
        ],
        [
          "addflag",
          "cemetery2_saint2"
        ],
        [
          "checklocation",
          "Old Mission Catacombs - Santa Cortada Defeated (Item 1)"
        ],
        [
          "checklocation",
          "Old Mission Catacombs - Santa Cortada Defeated (Item 2)"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "cemetery2_saint3": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You put an end to Saint Pope's heresy once and for all."
        ],
        [
          "addxp",
          "xpreward_c*3"
        ],
        [
          "addflag",
          "cemetery2_saint3"
        ],
        [
          "checklocation",
          "Old Mission Catacombs - Saint Pope Defeated (Item 1)"
        ],
        [
          "checklocation",
          "Old Mission Catacombs - Saint Pope Defeated (Item 2)"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "cemetery2_sarcophagus": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "The bigger they are, the harder they excommunicate."
        ],
        [
          "addxp",
          "xpreward_c*3"
        ],
        [
          "addflag",
          "cemetery2_saint1"
        ],
        [
          "checklocation",
          "Old Mission Catacombs - Saint Beefus Defeated (Item 1)"
        ],
        [
          "checklocation",
          "Old Mission Catacombs - Saint Beefus Defeated (Item 2)"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "cemetery2_skullpile2": {
      "pick": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "playsound",
          "Player_Use_Pickaxe"
        ],
        [
          "say",
          "At the center of the pile, you unearth (unskull?) a shiny black stone.  It's making more noise than stones usually do."
        ],
        [
          "checklocation",
          "Old Mission Catacombs - Cemented Skull Pile"
        ],
        [
          "option",
          "done",
          "Weird!"
        ]
      ]
    },
    "cemetery3_bookpedestal": {
      "take": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "Reboot Hill (Plot 3) - Cultists' Pedestal"
        ]
      ]
    },
    "cemetery3_cultistouthouse": {
      "popup": [
        [
          "if",
          "hasflag(cemetery3_didouthouse)"
        ],
        [
          "goto",
          "nope"
        ],
        [
          "say",
          "This is a hastily constructed, <i>very</i> shallow privy."
        ],
        [
          "if",
          "stenchresist<100"
        ],
        [
          "option",
          "inve",
          "Investigate [stench resistance]"
        ],
        [
          "else",
          ""
        ],
        [
          "grayoption",
          "invss",
          "Investigate [Requires stench resistance]"
        ]
      ],
      "inve": [
        [
          "cls"
        ],
        [
          "addflag",
          "cemetery3_didouthouse"
        ],
        [
          "say",
          "You open the door and dig around in the detritus."
        ],
        [
          "checklocation",
          "Reboot Hill (Plot 3) - Outhouse"
        ],
        [
          "goto",
          "tokencontinue"
        ]
      ]
    },
    "cemetery3_diggystone": {
      "diggystone1dig": [
        [
          "addflag",
          "cemetery3_@script_context_data.id@"
        ],
        [
          "cls"
        ],
        [
          "playsound",
          "Player_Use_Shovel"
        ],
        [
          "checklocation",
          "Reboot Hill (Plot 1) - Big Bob Hurlingham's Grave"
        ]
      ],
      "diggystone2dig": [
        [
          "addflag",
          "cemetery3_@script_context_data.id@"
        ],
        [
          "cls"
        ],
        [
          "playsound",
          "Player_Use_Shovel"
        ],
        [
          "checklocation",
          "Reboot Hill (Plot 1) - Wise Ol' Jed Marmot's Grave"
        ]
      ],
      "diggystone3dig": [
        [
          "addflag",
          "cemetery3_@script_context_data.id@"
        ],
        [
          "cls"
        ],
        [
          "playsound",
          "Player_Use_Shovel"
        ],
        [
          "checklocation",
          "Reboot Hill (Plot 2) - Annette Jangle's Grave"
        ]
      ],
      "diggystone4dig": [
        [
          "addflag",
          "cemetery3_@script_context_data.id@"
        ],
        [
          "cls"
        ],
        [
          "playsound",
          "Player_Use_Shovel"
        ],
        [
          "checklocation",
          "Reboot Hill (Plot 2) - Fred Deeks' Grave"
        ]
      ],
      "diggystone5dig": [
        [
          "addflag",
          "cemetery3_@script_context_data.id@"
        ],
        [
          "cls"
        ],
        [
          "playsound",
          "Player_Use_Shovel"
        ],
        [
          "checklocation",
          "Reboot Hill (Plot 2) - Dink 'Scotch' Terkinson's Grave"
        ]
      ],
      "diggystone6dig": [
        [
          "addflag",
          "cemetery3_@script_context_data.id@"
        ],
        [
          "cls"
        ],
        [
          "playsound",
          "Player_Use_Shovel"
        ],
        [
          "say",
          "Based on the contents of the coffin, you'd have called it \"exploding skull syndrome.\""
        ],
        [
          "checklocation",
          "Reboot Hill (Plot 3) - Paulette Tootsbury's Grave"
        ]
      ],
      "diggystone7dig": [
        [
          "addflag",
          "cemetery3_@script_context_data.id@"
        ],
        [
          "cls"
        ],
        [
          "playsound",
          "Player_Use_Shovel"
        ],
        [
          "say",
          "Looks like the eagle knocked out all of her teeth on its way down."
        ],
        [
          "checklocation",
          "Reboot Hill (Plot 3) - Stanrietta Minkleston's Grave"
        ]
      ]
    },
    "cemetery3_grannysmith": {
      "right": [
        [
          "tracking",
          "puzzle_grannysmith"
        ],
        [
          "leftspeak",
          "$lastoption$"
        ],
        [
          "say",
          "Granny's eyes brighten, and she bursts into tears -- but happy ones this time."
        ],
        [
          "rightsay",
          "Oh yes, of course!  How could I have forgotten?"
        ],
        [
          "if",
          "hasflag(cemetery3_magdalene)"
        ],
        [
          "rightsay",
          "Poor, sweet Magdalene.  Oh, how I miss her..."
        ],
        [
          "if",
          "hasflag(cemetery3_melissa)"
        ],
        [
          "rightsay",
          "Poor, sweet Melissa.  Oh, how I miss her..."
        ],
        [
          "addxp",
          "xpreward_d*3"
        ],
        [
          "say",
          "Granny drifts over to her tombstone and gently places a bouquet at its base.  Both Granny and the flowers fade away into nothingness."
        ],
        [
          "addflag",
          "cemetery3_grannysmith"
        ],
        [
          "say",
          "That is, except for a single flower that remains."
        ],
        [
          "incflag",
          "peoplehelped,1"
        ],
        [
          "checklocation",
          "Reboot Hill (Plot 1) - Granddaughter Puzzle"
        ],
        [
          "sayoption",
          "done",
          "Goodbye, Granny."
        ]
      ]
    },
    "cemetery3_picnic": {
      "dig": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "clearrandom",
          ""
        ],
        [
          "pushrandom",
          "food_bloodsausage"
        ],
        [
          "pushrandom",
          "food_instantgrits"
        ],
        [
          "pushrandom",
          "food_jelliedescargot"
        ],
        [
          "pushrandom",
          "food_plumpudding"
        ],
        [
          "pushrandom",
          "food_sodacrackers"
        ],
        [
          "pushrandom",
          "potion_candy1"
        ],
        [
          "pushrandom",
          "potion_candy2"
        ],
        [
          "pushrandom",
          "potion_candy3"
        ],
        [
          "pushrandom",
          "potion_sarsaparilla"
        ],
        [
          "if",
          "hasflag(container_drygoods)>3"
        ],
        [
          "pushrandom",
          "potion_candy4"
        ],
        [
          "if",
          "hasflag(container_drygoods)>6"
        ],
        [
          "pushrandom",
          "potion_candy5"
        ],
        [
          "addstate",
          "quant,1"
        ],
        [
          "if",
          "hasflag(container_drygoods)>3"
        ],
        [
          "incstate",
          "quant,rand(1,2)"
        ],
        [
          "if",
          "hasflag(container_drygoods)>7"
        ],
        [
          "incstate",
          "quant,rand(1,2)"
        ],
        [
          "additem",
          "poprandom(),$quant$"
        ],
        [
          "addstate",
          "quant,1"
        ],
        [
          "if",
          "hasflag(container_drygoods)>5"
        ],
        [
          "incstate",
          "quant,rand(1,2)"
        ],
        [
          "additem",
          "poprandom(),$quant$"
        ],
        [
          "if",
          "itemroll(30)"
        ],
        [
          "additem",
          "poprandom"
        ],
        [
          "incflag",
          "container_drygoods,1"
        ],
        [
          "checklocation",
          "Reboot Hill (Plot 2) - Picnic"
        ]
      ]
    },
    "cemetery3_scaredskeleton": {
      "getreward": [
        [
          "rightsay",
          "Great! Whew! That's a load off my mind, let me tell you. Here, you can have this worry-stone, I don't need it now."
        ],
        [
          "incflag",
          "peoplehelped,1"
        ],
        [
          "addflag",
          "cemetery3_bernard,2"
        ],
        [
          "addflag",
          "cemetery4_scaredskeleton"
        ],
        [
          "checklocation",
          "Reboot Hill (Plot 3) - Bernard's Reward"
        ],
        [
          "sayoption",
          "done",
          "Cool, thanks."
        ]
      ]
    },
    "cemetery3_skellowstone1": {
      "get": [
        [
          "cls"
        ],
        [
          "say",
          "You pluck the sword from the stone.  Now you're royalty!"
        ],
        [
          "checklocation",
          "Reboot Hill (Plot 1) - Sweet Monument"
        ],
        [
          "addflag",
          "cemetery3_skellowstone1,1"
        ]
      ]
    },
    "cemetery3_tontinestone1": {
      "getkey": [
        [
          "say",
          "You pick up the object -- it looks like a piece of a broken key!"
        ],
        [
          "addflag",
          "cemetery3_tontinekey1"
        ],
        [
          "checklocation",
          "Reboot Hill (Plot 2) - Fancy Tomb (Left)"
        ],
        [
          "option",
          "open",
          "Interesting"
        ]
      ]
    },
    "cemetery3_tontinestone2": {
      "getkey": [
        [
          "say",
          "You pick up the object -- it looks like a piece of a broken key!"
        ],
        [
          "addflag",
          "cemetery3_tontinekey2"
        ],
        [
          "checklocation",
          "Reboot Hill (Plot 2) - Fancy Tomb (Middle)"
        ],
        [
          "option",
          "open",
          "Interesting"
        ]
      ]
    },
    "cemetery3_tontinestone3": {
      "getkey": [
        [
          "say",
          "You pick up the object -- it looks like a piece of a broken key!"
        ],
        [
          "addflag",
          "cemetery3_tontinekey3"
        ],
        [
          "checklocation",
          "Reboot Hill (Plot 2) - Fancy Tomb (Right)"
        ],
        [
          "option",
          "open",
          "Interesting"
        ]
      ]
    },
    "cemetery4_investigateshed": {
      "inv1": [
        [
          "addstate",
          "shovel,1"
        ],
        [
          "say",
          "Well, tool singular. There's a shovel here."
        ],
        [
          "option",
          "grabshovel",
          "Grab it"
        ]
      ],
      "grabshovel": [
        [
          "say",
          "You grab the shovel and cram it in your pack."
        ],
        [
          "checklocation",
          "Military Cemetery - Shed Tools"
        ],
        [
          "addflag",
          "cemetery4_gotshovel"
        ],
        [
          "option",
          "hub",
          "Nice"
        ]
      ]
    },
    "cemetery4_pickplot": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "addstate",
          "contents,%milcem_contents/@cemetery4_whichfight@%"
        ],
        [
          "addflag",
          "cemetery4_did@cemetery4_whichfight@"
        ],
        [
          "delflag",
          "cemetery4_whichfight"
        ],
        [
          "say",
          "You beat the skeleton and stuff what's left of it back into the gravehole."
        ],
        [
          "if",
          "matchstring($contents$,a1) || matchstring($contents$,b1) || matchstring($contents$,c1)"
        ],
        [
          "addxp",
          "@xpreward_d@"
        ],
        [
          "if",
          "matchstring($contents$,a2) || matchstring($contents$,b2) || matchstring($contents$,c2)"
        ],
        [
          "addxp",
          "@xpreward_f@"
        ],
        [
          "if",
          "matchstring($contents$,a3) || matchstring($contents$,b3) || matchstring($contents$,c3)"
        ],
        [
          "addxp",
          "@xpreward_h@"
        ],
        [
          "additem",
          "pickone(bone,bone,skullchips,looseteeth),rand(1,3)"
        ],
        [
          "if",
          "matchstring($contents$,c3) && !hasflag(militarycemetery_gotriflehelmetcheck)"
        ],
        [
          "checklocation",
          "Military Cemetery - 2nd Lt., 69th Innuendo Div."
        ],
        [
          "if",
          "matchstring($contents$,c3) && !hasflag(militarycemetery_gotriflehelmetcheck)"
        ],
        [
          "addflag",
          "militarycemetery_gotriflehelmetcheck"
        ],
        [
          "if",
          "itemroll(40)"
        ],
        [
          "additem",
          "pickone(bone,bone,skullchips,looseteeth)"
        ],
        [
          "if",
          "itemroll(20)"
        ],
        [
          "additem",
          "pickone(bone,bone,skullchips,looseteeth)"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ],
      "digt1": [
        [
          "playsound",
          "Player_Use_Shovel"
        ],
        [
          "if",
          "rand(1,2)==1"
        ],
        [
          "say",
          "The ground here is rocky, and it's pretty hard on your shovel."
        ],
        [
          "incflag",
          "shoveldamage,1"
        ],
        [
          "addstate",
          "roll,=rand(1,3)"
        ],
        [
          "if",
          "$roll$==1"
        ],
        [
          "say",
          "Instead of a coffin, you find an urn.  Looks like this soldier was cremated.  Or died in a fire."
        ],
        [
          "if",
          "$roll$==1"
        ],
        [
          "additem",
          "humanash"
        ],
        [
          "if",
          "$roll$>1"
        ],
        [
          "say",
          "You make it down to the coffin and find...  not much to write home about."
        ],
        [
          "addstate",
          "returnscript,cemetery4_pickplot"
        ],
        [
          "addstate",
          "returnstate,checkshovel"
        ],
        [
          "runscript",
          "container_loot_grave"
        ]
      ],
      "digt3": [
        [
          "playsound",
          "Player_Use_Shovel"
        ],
        [
          "if",
          "rand(1,2)==1"
        ],
        [
          "say",
          "The ground here is rocky, and it's pretty hard on your shovel."
        ],
        [
          "incflag",
          "shoveldamage,1"
        ],
        [
          "say",
          "You make it down to the coffin and find a lockbox, which you open."
        ],
        [
          "addstate",
          "returnscript,cemetery4_pickplot"
        ],
        [
          "addstate",
          "returnstate,checkshovel"
        ],
        [
          "runscript",
          "container_loot_army"
        ]
      ],
      "myco": [
        [
          "say",
          "Plot 420 is completely overgrown with mushrooms.  You root around in the loose shroomage and find a book."
        ],
        [
          "say",
          "Coincidentally, it's a book about mushrooms!"
        ],
        [
          "checklocation",
          "Military Cemetery - Plot 420"
        ],
        [
          "goto",
          "markplot"
        ]
      ],
      "necrotoken": [
        [
          "say",
          "Next to that tombstone, you find a pile of refuse obviously left behind by one of the Necromancer's cultists.  In addition to being evil meddlers in dark forces best left unmeddled in, those jerks are real litterbugs!"
        ],
        [
          "checklocation",
          "Military Cemetery - Plot 13"
        ],
        [
          "goto",
          "tokencontinue"
        ]
      ],
      "necrobook": [
        [
          "say",
          "Next to that tombstone you find a pedestal with a leather-bound book on top of it.  Looks evil.  You'd better grab it before somebody else does."
        ],
        [
          "checklocation",
          "Military Cemetery - Plot 666"
        ],
        [
          "goto",
          "markplot"
        ]
      ],
      "postpuzz7": [
        [
          "if",
          "matchstring($promptvalue$,??????)"
        ],
        [
          "say",
          "You shake your head, unable to think of something to say."
        ],
        [
          "if",
          "matchstring($promptvalue$,??????)"
        ],
        [
          "option",
          "puzz7ask",
          "Say a word for the departed"
        ],
        [
          "if",
          "matchstring($promptvalue$,??????)"
        ],
        [
          "goto",
          "optsagain"
        ],
        [
          "say",
          "You say a brief word for the departed."
        ],
        [
          "leftportrait",
          "player"
        ],
        [
          "if",
          "matchstring($promptvalue$,shrewd)"
        ],
        [
          "leftsay",
          "Shrewd"
        ],
        [
          "addstate",
          "firstsolve,0"
        ],
        [
          "if",
          "matchstring($promptvalue$,shrewd) && !hasflag(cemetery4_puzz7_solved_basic)"
        ],
        [
          "addstate",
          "firstsolve,1"
        ],
        [
          "if",
          "matchstring($promptvalue$,shrewd) && hasflag(cemetery4_puzz7_solved_basic)"
        ],
        [
          "addstate",
          "firstsolve,2"
        ],
        [
          "if",
          "$firstsolve$==1"
        ],
        [
          "say",
          "A courier walks up to you."
        ],
        [
          "if",
          "$firstsolve$==1"
        ],
        [
          "rightpicture",
          "portrait_bartender"
        ],
        [
          "if",
          "$firstsolve$==1"
        ],
        [
          "rightsay",
          "According to General Heimer's will, I am supposed to deliver this to the person standing at his grave at this exact moment."
        ],
        [
          "if",
          "$firstsolve$==1 && !hasflag(cemetery4_hitbycudgel)"
        ],
        [
          "say",
          "He hands you a package and then departs. You open the box and inside is a bunch of Meat."
        ],
        [
          "if",
          "$firstsolve$==1 && hasflag(cemetery4_hitbycudgel)"
        ],
        [
          "say",
          "You cringe for a second, but he hands you a package and then departs. You open the box and inside is a bunch of Meat."
        ],
        [
          "if",
          "$firstsolve$==1"
        ],
        [
          "addmeat",
          "1000"
        ],
        [
          "if",
          "$firstsolve$==1 && !hasflag(cemetery4_hitbycudgel)"
        ],
        [
          "say",
          "At the bottom of the package is a note that says, \"You've not heard the last from me.\""
        ],
        [
          "if",
          "$firstsolve$==1 && !hasflag(cemetery4_hitbycudgel)"
        ],
        [
          "option",
          "puzz7break",
          "Ominous"
        ],
        [
          "if",
          "$firstsolve$==1 && hasflag(cemetery4_hitbycudgel)"
        ],
        [
          "sayoption",
          "puzz7break",
          "Sweet!"
        ],
        [
          "if",
          "$firstsolve$==1"
        ],
        [
          "stop"
        ],
        [
          "if",
          "$firstsolve$==2"
        ],
        [
          "say",
          "You wait around for a minute, but nothing happens."
        ],
        [
          "if",
          "$firstsolve$==2"
        ],
        [
          "say",
          "You can't shake the feeling General Heimer hasn't had his last word, though."
        ],
        [
          "if",
          "matchstring($promptvalue$,shrewd)"
        ],
        [
          "addflag",
          "cemetery4_puzz7_solved_basic,1"
        ],
        [
          "if",
          "matchstring($promptvalue$,shrewd)"
        ],
        [
          "option",
          "puzz7ask",
          "Say another word for the departed"
        ],
        [
          "if",
          "matchstring($promptvalue$,shrewd)"
        ],
        [
          "goto",
          "optsagain"
        ],
        [
          "if",
          "matchstring($promptvalue$,genius)"
        ],
        [
          "leftsay",
          "Genius"
        ],
        [
          "addstate",
          "secondsolve,0"
        ],
        [
          "if",
          "matchstring($promptvalue$,genius) && !hasflag(cemetery4_puzz7_solved_advanced)"
        ],
        [
          "addstate",
          "secondsolve,1"
        ],
        [
          "if",
          "$secondsolve$==1"
        ],
        [
          "say",
          "A courier walks up to you."
        ],
        [
          "if",
          "$secondsolve$==1"
        ],
        [
          "rightpicture",
          "portrait_bartender"
        ],
        [
          "if",
          "$secondsolve$==1"
        ],
        [
          "rightsay",
          "According to General Heimer's will, I am supposed to deliver this to the person standing at his grave at this exact moment."
        ],
        [
          "if",
          "$secondsolve$==1 && hasflag(cemetery4_hitbycudgel)>0"
        ],
        [
          "leftportrait",
          "player"
        ],
        [
          "if",
          "$secondsolve$==1 && hasflag(cemetery4_hitbycudgel)==1"
        ],
        [
          "leftsay",
          "Oh no, not again!"
        ],
        [
          "if",
          "$secondsolve$==1 && hasflag(cemetery4_hitbycudgel)==2"
        ],
        [
          "leftsay",
          "Seriously?"
        ],
        [
          "if",
          "$secondsolve$==1 && hasflag(cemetery4_hitbycudgel)==2"
        ],
        [
          "rightsay",
          "The will is very specific.  And very long."
        ],
        [
          "if",
          "$secondsolve$==1 && hasflag(cemetery4_hitbycudgel)>2"
        ],
        [
          "leftsay",
          "Alright, let's get this over with."
        ],
        [
          "if",
          "$secondsolve$==1"
        ],
        [
          "say",
          "The courier then knocks you cold with a cudgel."
        ],
        [
          "if",
          "$secondsolve$==1 && hasflag(cemetery4_hitbycudgel)<2"
        ],
        [
          "rightsay",
          "Sleepy time!"
        ],
        [
          "if",
          "$secondsolve$==1 && !hasflag(cemetery4_hitbycudgel)"
        ],
        [
          "sayoption",
          "puzz7dream",
          "Wait, what? [Dream]"
        ],
        [
          "if",
          "$secondsolve$==1 && hasflag(cemetery4_hitbycudgel)==1"
        ],
        [
          "sayoption",
          "puzz7dream",
          "That hurts, you know! [Dream]"
        ],
        [
          "if",
          "$secondsolve$==1 && hasflag(cemetery4_hitbycudgel)==2"
        ],
        [
          "option",
          "puzz7dream",
          "Sigh [Dream]"
        ],
        [
          "if",
          "$secondsolve$==1 && hasflag(cemetery4_hitbycudgel)>2"
        ],
        [
          "sayoption",
          "puzz7dream",
          "How does this even work? [Dream]"
        ],
        [
          "if",
          "$secondsolve$==1"
        ],
        [
          "incflag",
          "cemetery4_hitbycudgel,1"
        ],
        [
          "if",
          "$secondsolve$==1"
        ],
        [
          "stop"
        ],
        [
          "if",
          "matchstring($promptvalue$,shined)"
        ],
        [
          "leftsay",
          "Shined"
        ],
        [
          "addstate",
          "thirdsolve,0"
        ],
        [
          "if",
          "matchstring($promptvalue$,shined)"
        ],
        [
          "addstate",
          "thirdsolve,1"
        ],
        [
          "if",
          "matchstring($promptvalue$,shined) && !hasflag(cemetery4_haddream)"
        ],
        [
          "addstate",
          "thirdsolve,2"
        ],
        [
          "if",
          "$thirdsolve$==2"
        ],
        [
          "say",
          "You feel good about that word, but it feels like maybe you skipped a step or two."
        ],
        [
          "if",
          "$thirdsolve$==2"
        ],
        [
          "option",
          "puzz7ask",
          "Say another word for the departed"
        ],
        [
          "if",
          "$thirdsolve$==2"
        ],
        [
          "goto",
          "optsagain"
        ],
        [
          "if",
          "$thirdsolve$==1"
        ],
        [
          "say",
          "A courier walks up to you."
        ],
        [
          "if",
          "$thirdsolve$==1"
        ],
        [
          "rightpicture",
          "portrait_bartender"
        ],
        [
          "if",
          "$thirdsolve$==1"
        ],
        [
          "rightsay",
          "According to General Heimer's will, I am supposed to deliver this to the person standing at his grave at this exact moment."
        ],
        [
          "if",
          "$thirdsolve$==1"
        ],
        [
          "leftportrait",
          "player"
        ],
        [
          "if",
          "$thirdsolve$==1"
        ],
        [
          "leftsay",
          "Oh no, not again!"
        ],
        [
          "if",
          "$thirdsolve$==1"
        ],
        [
          "say",
          "He hands you a package and leaves. (Thank goodness!)  You open it and inside is a huge gem.  Nice!"
        ],
        [
          "if",
          "$thirdsolve$==1"
        ],
        [
          "checklocation",
          "Military Cemetery - Puzzle Plots Solved"
        ],
        [
          "if",
          "$thirdsolve$==1"
        ],
        [
          "if",
          "$thirdsolve$==1"
        ],
        [
          "tracking",
          "puzzle_milcem"
        ],
        [
          "if",
          "$thirdsolve$==1"
        ],
        [
          "addflag",
          "cemetery4_did11"
        ],
        [
          "if",
          "$thirdsolve$==1"
        ],
        [
          "addflag",
          "cemetery4_did37"
        ],
        [
          "if",
          "$thirdsolve$==1"
        ],
        [
          "addflag",
          "cemetery4_did111"
        ],
        [
          "if",
          "$thirdsolve$==1"
        ],
        [
          "addflag",
          "cemetery4_did230"
        ],
        [
          "if",
          "$thirdsolve$==1"
        ],
        [
          "addflag",
          "cemetery4_did370"
        ],
        [
          "if",
          "$thirdsolve$==1"
        ],
        [
          "addflag",
          "cemetery4_did690"
        ],
        [
          "if",
          "$thirdsolve$==1"
        ],
        [
          "addflag",
          "cemetery4_did707"
        ],
        [
          "if",
          "$thirdsolve$==1"
        ],
        [
          "goto",
          "optsagain"
        ],
        [
          "leftsay",
          "$promptvalue$"
        ],
        [
          "say",
          "You somehow feel that wasn't quite the right thing to say."
        ],
        [
          "option",
          "puzz7ask",
          "Say something else"
        ],
        [
          "goto",
          "optsagain"
        ]
      ]
    },
    "cemetery4_shovel": {
      "popup": [
        [
          "say",
          "There's a shovel here."
        ],
        [
          "if",
          "!hasflag(militarycemetery_gotcoffinshovel)"
        ],
        [
          "option",
          "e",
          "Take it"
        ],
        [
          "else",
          ""
        ]
      ],
      "e": [
        [
          "cls"
        ],
        [
          "checklocation",
          "Military Cemetery - Shovel By Coffins"
        ],
        [
          "addflag",
          "militarycemetery_gotcoffinshovel"
        ],
        [
          "markused"
        ]
      ]
    },
    "cemetery5_bookplinth": {
      "e": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "Buffalo Pile (Sleeping Quarters) - Pedestal"
        ]
      ]
    },
    "cemetery5_footlocker1": {
      "picklock": [
        [
          "markused"
        ],
        [
          "cls"
        ],
        [
          "playsound",
          "Player_Use_Lockpick"
        ],
        [
          "say",
          "You pick the lock."
        ],
        [
          "removeitem",
          "needle"
        ],
        [
          "checklocation",
          "Buffalo Pile (Sleeping Quarters) - Left Footlocker (Item 1)"
        ],
        [
          "checklocation",
          "Buffalo Pile (Sleeping Quarters) - Left Footlocker (Item 2)"
        ],
        [
          "addmeat",
          "rand(50,80),1"
        ]
      ]
    },
    "cemetery5_footlocker3": {
      "loot": [
        [
          "checklocation",
          "Buffalo Pile (Sleeping Quarters) - Right Footlocker"
        ],
        [
          "addstate",
          "returnscript,cemetery5_footlocker3"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_grave"
        ]
      ],
      "afterloot": []
    },
    "cemetery5_hangingcoat": {
      "search": [
        [
          "markused"
        ],
        [
          "cls"
        ],
        [
          "say",
          "You find a key in one of the inside pockets!"
        ],
        [
          "checklocation",
          "Buffalo Pile (Storage/Assembly) - Robe Next to Slab"
        ]
      ]
    },
    "cemetery5_magazines": {
      "get": [
        [
          "cls"
        ],
        [
          "addflag",
          "cemetery5_gotskillbook"
        ],
        [
          "say",
          "You flip through and find one book relevant to your interests."
        ],
        [
          "checklocation",
          "Buffalo Pile (Bathroom) - Magazines"
        ]
      ]
    },
    "cemetery5_toilettrash": {
      "dig": [
        [
          "addflag",
          "cemetery5_toilettrash"
        ],
        [
          "checklocation",
          "Buffalo Pile (Bathroom) - Trash Pile"
        ],
        [
          "goto",
          "tokencontinue"
        ]
      ]
    },
    "cemetery6_boothman": {
      "takequest2": [
        [
          "leftspeak",
          "$lastoption$"
        ],
        [
          "rightsay",
          "Great! Here's a list of parts. There's a place called the Buffalo Pile to the east, that's probably your best bet."
        ],
        [
          "checklocation",
          "Petting Cemetery - Accepted Buffalo Quest"
        ],
        [
          "addflag",
          "cemetery6_quest2,2"
        ],
        [
          "if",
          "!hasflag(map_cemetery5)"
        ],
        [
          "mapunlock",
          "cemetery5,Buffalo Pile"
        ],
        [
          "addstate",
          "maplocs,=countflags(map_)"
        ],
        [
          "if",
          "$maplocs$>36 && $maplocs$<40"
        ],
        [
          "giveachievement",
          "ach_37maplocs"
        ],
        [
          "sayoption",
          "done",
          "I'm on my way."
        ]
      ]
    },
    "cemetery6_touchskeleton": {
      "skeleton3": [
        [
          "say",
          "This is an owl skeleton.  If you want to know how many fireballs it takes to get to the center of an enemy skeleton, just ask an owl."
        ],
        [
          "addstate",
          "bloof,Increase your Spell Damage\\nfor the rest of the day"
        ],
        [
          "if",
          "hasflag(breadwood_jonesquest)==1 && hasitem(quest_owlcamera)"
        ],
        [
          "option",
          "pic",
          "Take a picture of it"
        ],
        [
          "if",
          "hasflag(breadwood_jonesquest)==1 && !hasitem(quest_owlcamera)"
        ],
        [
          "grayoption",
          "nopic",
          "Take a picture of it [Requires the owl camera]"
        ],
        [
          "if",
          "!hasflag(breadwood_jonesquest)==1"
        ],
        [
          "goto",
          "button"
        ]
      ]
    },
    "clooncys_spittoon": {
      "get": [
        [
          "say",
          "You flip that beautiful brass bucket over and slap it onto your head, drenching yourself in hot brown tobacco spit. It washes down over your face and hair like a sewage waterfall, soaking your clothes, running down your collar and slithering into your underwear, and filling your boots. I can't even force myself to describe it in any more detail than that."
        ],
        [
          "say",
          "You are the world's foulest human being. Congratulations!"
        ],
        [
          "addflag",
          "clooncys_didspittoon"
        ],
        [
          "incflag",
          "spittoonsopen,1"
        ],
        [
          "checklocation",
          "Frisco - Spittoon"
        ],
        [
          "option",
          "done",
          "Hooray!!"
        ]
      ]
    },
    "clowns_camp_fightwin": {
      "dig": [
        [
          "say",
          "You poke around their campsite for a bit, but don't find anything of value apart from the leader's knife and a ticket to the circus. Well, the harmonica maybe, but that clown had his lips all over it. <i>*shudder*</i>"
        ],
        [
          "checklocation",
          "Clown Campsite - Clowns Killed (Item 1)"
        ],
        [
          "checklocation",
          "Clown Campsite - Clowns Killed (Item 2)"
        ],
        [
          "say",
          "You also find a note (in one of the lead clown's pockets... eww). It seems to be orders to check out an abandoned tannery not far from Dirtwater. It's probably a bad idea to let these guys wander around near town, so maybe you should investigate."
        ],
        [
          "if",
          "!hasflag(map_tannery)"
        ],
        [
          "mapunlock",
          "tannery,Danny's Tannery"
        ],
        [
          "addstate",
          "maplocs,=countflags(map_)"
        ],
        [
          "if",
          "$maplocs$>36 && $maplocs$<40"
        ],
        [
          "giveachievement",
          "ach_37maplocs"
        ],
        [
          "addflag",
          "clowns_knowsclowns,2"
        ],
        [
          "addflag",
          "clowns_campcleared,1"
        ],
        [
          "addflag",
          "clowns_killedcamp,1"
        ],
        [
          "addflag",
          "clowns_suspicion,0"
        ],
        [
          "addstate",
          "winbutton,<i>shudder</i>"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "clowns_circus_balloonatalk": {
      "start": [
        [
          "if",
          "hasflag(circus_boughtballoon)"
        ],
        [
          "goto",
          "talk"
        ],
        [
          "rightportrait",
          "balloonclown"
        ],
        [
          "rightsay",
          "Howdy there, @miss@! Interest ya in a toy balloon?"
        ],
        [
          "sayoption",
          "howmuch",
          "How much are they?"
        ],
        [
          "sayoption",
          "colors",
          "What colors do you have?"
        ],
        [
          "sayoption",
          "float",
          "How do you make them float like that?"
        ],
        [
          "sayoption",
          "done",
          "No thanks. Bye."
        ]
      ],
      "buyit": [
        [
          "leftsay",
          "I'll take one."
        ],
        [
          "rightsay",
          "All righty then! Here you go!"
        ],
        [
          "addmeat",
          "-30"
        ],
        [
          "checklocation",
          "Circus - Balloon Vendor"
        ],
        [
          "addflag",
          "circus_boughtballoon"
        ],
        [
          "addflag",
          "clowns_balconvoflag,1"
        ],
        [
          "goto",
          "talk"
        ]
      ]
    },
    "clowns_circus_bobshow": {
      "cont11": [
        [
          "say",
          "You bow to the cheering crowd, carefully keeping your eyes on Barnaby Bob. He bows as well, removing his hat with an elaborate flourish, and then he takes a slip of paper out of it."
        ],
        [
          "rightsay",
          "And as a token of appreciation, I'd like to give our star volunteer a gift: a year's supply of dynamite! Use it in good health!"
        ],
        [
          "say",
          "As he hands you the coupon, the clown leans in close to your ear and whispers:"
        ],
        [
          "rightsay",
          "This was the only warning you'll get, @boy@."
        ],
        [
          "checklocation",
          "Circus - Survived the Main Act"
        ],
        [
          "say",
          "Barnaby Bob waves and blows kisses to the crowd as you climb down from the stage, and then he disappears through the backstage curtain. The audience gradually disperses."
        ],
        [
          "addflag",
          "clowns_showover,1"
        ],
        [
          "if",
          "hasflag(clowns_knowsclowns)<2"
        ],
        [
          "option",
          "uhoh",
          "Welp"
        ],
        [
          "else",
          ""
        ],
        [
          "option",
          "done",
          "Phew"
        ]
      ]
    },
    "clowns_circus_destroyedsafe": {
      "open": [
        [
          "markused"
        ],
        [
          "cls"
        ],
        [
          "say",
          "The dial looks pretty complex and has weird squiggles instead of numbers. Fortunately, the impact knocked it wide open, so that doesn't matter."
        ],
        [
          "say",
          "It contains a few scorched and blackened fragments of what you think might be eggshell, and a pretty nice pair of boots that seem undamaged."
        ],
        [
          "checklocation",
          "Circus - Barnaby Bob's Safe"
        ],
        [
          "exit"
        ]
      ]
    },
    "clowns_circus_foodatalk": {
      "takecap": [
        [
          "checklocation",
          "Circus Lost & Found - Item 1"
        ],
        [
          "addflag",
          "clowns_capsearch,2"
        ],
        [
          "leftsay",
          "Yep, that's the one. Thanks!"
        ],
        [
          "rightsay",
          "No problem, @maam@."
        ],
        [
          "option",
          "leave",
          "Leave"
        ]
      ],
      "takeknife": [
        [
          "checklocation",
          "Circus Lost & Found - Item 2"
        ],
        [
          "addflag",
          "clowns_tookknife,1"
        ],
        [
          "leftsay",
          "Thanks!"
        ],
        [
          "rightsay",
          "Sure, no problem."
        ],
        [
          "option",
          "leave",
          "Leave"
        ]
      ],
      "takehanky": [
        [
          "checklocation",
          "Circus Lost & Found - Item 3"
        ],
        [
          "addflag",
          "clowns_tookhanky,1"
        ],
        [
          "leftsay",
          "Thanks!"
        ],
        [
          "rightsay",
          "Sure, no problem."
        ],
        [
          "option",
          "leave",
          "Leave"
        ]
      ],
      "takesalts": [
        [
          "checklocation",
          "Circus Lost & Found - Item 4"
        ],
        [
          "addflag",
          "clowns_tooksalts,1"
        ],
        [
          "leftsay",
          "Thanks!"
        ],
        [
          "rightsay",
          "Sure, no problem."
        ],
        [
          "option",
          "leave",
          "Leave"
        ]
      ]
    },
    "clowns_circus_foodc": {
      "popup": [
        [
          "if",
          "hasflag(circus_stolewhistle)"
        ],
        [
          "say",
          "\"Cotton candy.\" says the clown behind this food stand. \"Come try this... cotton candy.\""
        ],
        [
          "else",
          ""
        ],
        [
          "say",
          "\"Cotton candy!\" calls the clown behind this food stand, and then makes a <i>fweeee-oooot!</i> noise with a slide-whistle. \"Come try this just-invented confectionary delight!\""
        ],
        [
          "option",
          "talk",
          "Talk to the vendor"
        ]
      ]
    },
    "clowns_circus_foodctalk": {
      "start": [
        [
          "if",
          "!hasflag(circus_stolewhistle)"
        ],
        [
          "say",
          "The clown blows his slide-whistle again as you approach."
        ],
        [
          "rightportrait",
          "foodclown3"
        ],
        [
          "if",
          "hasflag(circus_stolewhistle)"
        ],
        [
          "rightsay",
          "Step right up, @miss@. Step up and try one of the world's newest candy ...things."
        ],
        [
          "else",
          ""
        ],
        [
          "rightsay",
          "<i>Fwoooo-eeeet!</i> Step right up, @miss@! Step up and try one of the world's newest candy sensations!"
        ],
        [
          "sayoption",
          "what",
          "What is it?"
        ],
        [
          "if",
          "hasflag(clowns_whatcotton)==1"
        ],
        [
          "goto",
          "questions"
        ]
      ],
      "what": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "What is it?"
        ],
        [
          "if",
          "hasflag(circus_stolewhistle)"
        ],
        [
          "rightsay",
          "Cotton candy. The finest spun sugar, created through a revolutionary new process. It's so light and sweet and fluffy, it's... well, it's really great."
        ],
        [
          "else",
          ""
        ],
        [
          "rightsay",
          "Cotton candy! The finest -- in several senses of the word -- spun sugar, created through a revolutionary new process! It's so light and sweet and fluffy, it's like eating butterfly dreams and kitten wishes! <i>Fwoooooo-eeeeeet!</i>"
        ],
        [
          "addflag",
          "clowns_whatcotton,1"
        ],
        [
          "goto",
          "questions"
        ]
      ],
      "cotton": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "So it isn't actually made of cotton?"
        ],
        [
          "rightsay",
          "What? No. Cotton is indigestible, no matter how much chocolate you cover it with."
        ],
        [
          "leftsay",
          "Found that out the hard way, did you?"
        ],
        [
          "if",
          "hasflag(circus_stolewhistle)"
        ],
        [
          "rightsay",
          "...I don't want to talk about it."
        ],
        [
          "else",
          ""
        ],
        [
          "rightsay",
          "<i>Fweeeeee-oooooot!</i>"
        ],
        [
          "sayoption",
          "howmade",
          "How do you make it?"
        ],
        [
          "sayoption",
          "howmuch",
          "How much does it cost?"
        ],
        [
          "sayoption",
          "leave",
          "No thanks."
        ]
      ],
      "invented": [
        [
          "leftsay",
          "You invented it?"
        ],
        [
          "if",
          "hasflag(circus_stolewhistle)"
        ],
        [
          "rightsay",
          "No, some dentists down south were the first ones. But after hearing about it, I managed to figure out how it works, pretty much."
        ],
        [
          "else",
          ""
        ],
        [
          "rightsay",
          "Not as such -- couple dentists down south were the first ones. Dentists! Go figure! <i>Fweeeeeeee-oooooot!</i> But after hearing about it, I managed to figure out how it works. Made a few improvements with my design, too!"
        ],
        [
          "sayoption",
          "please",
          "Now I'm really curious."
        ],
        [
          "sayoption",
          "howmuch",
          "How much does it cost?"
        ],
        [
          "sayoption",
          "leave",
          "No thanks."
        ]
      ],
      "please": [
        [
          "leftsay",
          "Now I'm really curious."
        ],
        [
          "if",
          "hasflag(circus_stolewhistle)"
        ],
        [
          "rightsay",
          "Nope. These secrets in this box are for nobody's eyes but my own. I can sell you some cotton candy, though."
        ],
        [
          "else",
          ""
        ],
        [
          "rightsay",
          "Sorry, @miss@! These secrets in this box are for nobody's eyes but my own! <i>Fweeee-oooot!</i> I'll be happy to sell you some cotton candy, though!"
        ],
        [
          "addflag",
          "clowns_wantcottonsecret,1"
        ],
        [
          "sayoption",
          "howmuch",
          "How much does it cost?"
        ],
        [
          "sayoption",
          "leave",
          "No thanks."
        ]
      ],
      "howmuch": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "How much does it cost?"
        ],
        [
          "if",
          "hasflag(circus_stolewhistle)"
        ],
        [
          "rightsay",
          "Just 300 Meat! ...or my slide-whistle, if you happen to find it. I really miss my slide-whistle."
        ],
        [
          "else",
          ""
        ],
        [
          "rightsay",
          "Just 300 Meat! <i>Fwooooo-eeeeeet!</i>"
        ],
        [
          "if",
          "player.meat>=300 || (hasflag(circus_stolewhistle) && hasitem(quest_slidewhistle))"
        ],
        [
          "sayoption",
          "buy",
          "I'll take one."
        ],
        [
          "if",
          "player.meat<300 && !hasitem(quest_slidewhistle) && hasflag(clowns_whistlebox)<1"
        ],
        [
          "graysayoption",
          "buy",
          "I'll take one. [Requires 300 Meat]"
        ],
        [
          "if",
          "player.meat<300 && hasflag(clowns_whistlebox)==1"
        ],
        [
          "graysayoption",
          "buy",
          "I'll take one. [Requires 300 Meat or slide-whistle]"
        ],
        [
          "if",
          "hasflag(clowns_whistlebox)==1"
        ],
        [
          "sayoption",
          "sawwhistle",
          "You know, I think I saw a slide-whistle..."
        ],
        [
          "sayoption",
          "leave",
          "Never mind."
        ]
      ],
      "buy": [
        [
          "leftsay",
          "I'll take one."
        ],
        [
          "if",
          "hasflag(circus_stolewhistle)"
        ],
        [
          "rightsay",
          "Okay, that'll be 300 Meat."
        ],
        [
          "else",
          ""
        ],
        [
          "rightsay",
          "Alrighty! That'll be 300 Meat! <i>Fwooooo-eeeeeeeet!</i>"
        ],
        [
          "if",
          "player.meat>=300"
        ],
        [
          "sayoption",
          "paymeat",
          "Okay. [300 Meat]"
        ],
        [
          "else",
          ""
        ],
        [
          "grayoption",
          "paymeat",
          "Okay. [Requires 300 Meat]"
        ],
        [
          "if",
          "player.meat>=300 && hasflag(clowns_stealwhistle)==1 && hasflag(clowns_wantcottonsecret)==1"
        ],
        [
          "sayoption",
          "stealwhistle",
          "Okay. [300 Meat; Steal his whistle]"
        ],
        [
          "if",
          "hasflag(circus_stolewhistle) && hasitem(quest_slidewhistle)"
        ],
        [
          "sayoption",
          "paywhistle",
          "I found this slide-whistle. Is it yours?"
        ],
        [
          "sayoption",
          "leave",
          "Hmm, never mind."
        ]
      ],
      "stealwhistle": [
        [
          "leftsay",
          "Okay."
        ],
        [
          "addmeat",
          "-300"
        ],
        [
          "say",
          "The clown puts his slide whistle down on the counter and ducks underneath; you quickly snatch the whistle and slip it into your pocket."
        ],
        [
          "checklocation",
          "Circus - Stole the Slide Whistle"
        ],
        [
          "addflag",
          "circus_stolewhistle"
        ],
        [
          "option",
          "stealwhistle2",
          "Nice."
        ]
      ],
      "front": [
        [
          "say",
          "You quickly shut the box and dart back to the front of the counter just before the clown returns. He gives you a momentary suspicious look, but is quickly distracted by the joy of getting his slide-whistle back."
        ],
        [
          "addflag",
          "clowns_stealwhistle,2"
        ],
        [
          "addflag",
          "clowns_whistlebox,0"
        ],
        [
          "delflag",
          "circus_stolewhistle"
        ],
        [
          "incflag",
          "clowns_suspicion,1"
        ],
        [
          "rightsay",
          "<i>Fwoooooo-eeeeeeeet!</i> You were right! Thank you so much!"
        ],
        [
          "say",
          "The clown carefully puts his slide whistle in his shirt pocket, ducks underneath the counter, and comes back up with a paper cone, which he holds in the mouth of the metal box. He pulls down a lever and the box emits a thin squealing sound as something resembling glittering white spun sugar collects around the paper cone in a fluffy cloud."
        ],
        [
          "rightsay",
          "Here you go! Enjoy! <i>Fwooooo-eeeeeeeeet!</i>"
        ],
        [
          "checklocation",
          "Circus - Slide Whistle Reward"
        ],
        [
          "incflag",
          "clowns_discovery,1"
        ],
        [
          "sayoption",
          "leave",
          "...Thanks."
        ]
      ],
      "paymeat": [
        [
          "leftsay",
          "Okay."
        ],
        [
          "addmeat",
          "-300"
        ],
        [
          "if",
          "hasflag(clowns_stealwhistle)==2"
        ],
        [
          "say",
          "The clown carefully puts his slide whistle in his shirt pocket, ducks underneath the counter, and comes back up with a paper cone, which he holds in the mouth of the metal box. He pulls down a lever and the machine makes a thin squealing sound as glittering white spun sugar collects around the paper cone in a fluffy cloud."
        ],
        [
          "if",
          "hasflag(circus_stolewhistle)"
        ],
        [
          "say",
          "The clown ducks under the counter and comes back up with a paper cone, which he holds in the mouth of the metal box. He pulls down a lever and the machine makes a thin squealing sound as glittering white spun sugar collects around the paper cone in a fluffy cloud."
        ],
        [
          "if",
          "!hasflag(circus_stolewhistle) && hasflag(clowns_stealwhistle)<2"
        ],
        [
          "say",
          "The clown puts his slide whistle down on the counter, ducks underneath, and comes back up with a paper cone, which he holds in the mouth of the metal box. He pulls down a lever and the machine makes a thin squealing sound as glittering white spun sugar collects around the paper cone in a fluffy cloud."
        ],
        [
          "if",
          "!hasflag(circus_stolewhistle) && hasflag(clowns_stealwhistle)<2"
        ],
        [
          "addflag",
          "clowns_stealwhistle,1"
        ],
        [
          "if",
          "hasflag(circus_stolewhistle)"
        ],
        [
          "say",
          "Here you go."
        ],
        [
          "else",
          ""
        ],
        [
          "rightsay",
          "Here you go! Enjoy! <i>Fwooooo-eeeeeeeeet!</i>"
        ],
        [
          "additem",
          "food_cottoncandy"
        ],
        [
          "sayoption",
          "leave",
          "Thanks."
        ]
      ],
      "paywhistle": [
        [
          "leftsay",
          "I found this slide-whistle. Is it yours?"
        ],
        [
          "rightsay",
          "Oh my gosh, it is! Thank you so much!"
        ],
        [
          "removeitem",
          "quest_slidewhistle"
        ],
        [
          "addflag",
          "clowns_stealwhistle,2"
        ],
        [
          "delflag",
          "circus_stolewhistle"
        ],
        [
          "say",
          "The clown carefully puts his slide whistle in his shirt pocket, ducks underneath the counter, and comes back up with a paper cone, which he holds in the mouth of the metal box. He pulls down a lever and the machine makes a thin squealing sound as glittering white spun sugar collects around the paper cone in a fluffy cloud."
        ],
        [
          "rightsay",
          "Here you go, @miss@! It's on the house!"
        ],
        [
          "checklocation",
          "Circus - Slide Whistle Reward"
        ],
        [
          "rightsay",
          "<i>Fwooooooooo-eeeeeeeeeeeeeeeet!</i>"
        ],
        [
          "sayoption",
          "leave",
          "Thanks."
        ]
      ]
    },
    "clowns_circus_gamemox": {
      "level3": [
        [
          "say",
          "You take careful aim and pop off rounds (and balloons) for as long as you can hold the gun together."
        ],
        [
          "rightsay",
          "Hey, not bad! Not bad at all! Not enough balloons for our grand prize, but it's worth a li'l something!"
        ],
        [
          "playsound",
          "carnival_balloon_game_hit"
        ],
        [
          "if",
          "!hasflag(circus_game3prize)"
        ],
        [
          "say",
          "He gives you a little toy stuffed cat."
        ],
        [
          "if",
          "!hasflag(circus_game3prize)"
        ],
        [
          "checklocation",
          "Circus - Test Your Aim (Small Prize)"
        ],
        [
          "if",
          "hasflag(circus_game3prize)"
        ],
        [
          "rightspeak",
          "Limit one kitten per customer, though."
        ],
        [
          "addflag",
          "circus_game3prize"
        ],
        [
          "option",
          "nothanks",
          "Okay"
        ]
      ],
      "level4": [
        [
          "say",
          "I'm not sure exactly how a jaguar shoots, but presumably it's pretty good. You clear nearly the entire wall of balloons, and the clown looks genuinely impressed."
        ],
        [
          "rightsay",
          "Well I'll be! Looks like you win! Congratulations on the finest shooting I've seen in quite a time!"
        ],
        [
          "playsound",
          "carnival_balloon_game_hit"
        ],
        [
          "if",
          "hasflag(circus_gameticketprize)"
        ],
        [
          "goto",
          "already"
        ],
        [
          "checklocation",
          "Circus - Test Your ____ (Ticket Prize)"
        ],
        [
          "addflag",
          "circus_gameticketprize"
        ],
        [
          "if",
          "!hasflag(clowns_showover)"
        ],
        [
          "rightsay",
          "The show will be starting soon, so don't miss it!"
        ],
        [
          "sayoption",
          "nothanks",
          "Thanks!"
        ]
      ],
      "showover": [
        [
          "say",
          "He hands you a large and reasonably well-made toy stuffed cat."
        ],
        [
          "checklocation",
          "Circus - Test Your Aim (Large Prize)"
        ],
        [
          "addflag",
          "circus_game3prize2"
        ],
        [
          "sayoption",
          "nothanks",
          "Neat!"
        ]
      ]
    },
    "clowns_circus_gamemus": {
      "level3": [
        [
          "playsound",
          "clank1"
        ],
        [
          "say",
          "You pick up the mallet, take a deep breath, and smash that lever with a mighty swing. The little bell-striker makes it nearly -- but not quite! -- to the bell."
        ],
        [
          "rightsay",
          "Well now! That was <i>very</i> close. Not a grand prize winner, but it's the best I've seen today and that's got to be worth something!"
        ],
        [
          "if",
          "!hasflag(circus_game1prize)"
        ],
        [
          "say",
          "He hands you a small teddy bear."
        ],
        [
          "if",
          "!hasflag(circus_game1prize)"
        ],
        [
          "checklocation",
          "Circus - Test Your Might (Small Prize)"
        ],
        [
          "if",
          "hasflag(circus_game1prize)"
        ],
        [
          "rightspeak",
          "Limit one per customer on the teddy bears, though."
        ],
        [
          "addflag",
          "circus_game1prize"
        ],
        [
          "option",
          "nothanks",
          "Okay"
        ]
      ],
      "level4": [
        [
          "playsound",
          "carnival_strength_game"
        ],
        [
          "say",
          "You pick up the mallet, toss it end-over-end and catch it a couple of times to test its weight, and casually slam it into the lever."
        ],
        [
          "say",
          "<i>DING!</i>"
        ],
        [
          "rightsay",
          "Well I'll be! That's some gen-u-ine muscle you've got on you, @fella@! Looks like you're a winner!"
        ],
        [
          "if",
          "hasflag(circus_gameticketprize)"
        ],
        [
          "goto",
          "already"
        ],
        [
          "checklocation",
          "Circus - Test Your ____ (Ticket Prize)"
        ],
        [
          "addflag",
          "circus_gameticketprize"
        ],
        [
          "if",
          "!hasflag(clowns_showover)"
        ],
        [
          "rightsay",
          "The show will be starting soon, so don't miss it!"
        ],
        [
          "sayoption",
          "nothanks",
          "Thanks!"
        ]
      ],
      "showover": [
        [
          "say",
          "He hands you a large and reasonably well-made teddy bear."
        ],
        [
          "checklocation",
          "Circus - Test Your Might (Large Prize)"
        ],
        [
          "addflag",
          "circus_game1prize2"
        ],
        [
          "sayoption",
          "nothanks",
          "Neat!"
        ]
      ]
    },
    "clowns_circus_gamemys": {
      "level3": [
        [
          "say",
          "The clown starts picking cards out of the deck and holding them up with the backs to you. You manage to guess about two-thirds of them."
        ],
        [
          "rightsay",
          "Say, that's not bad! Not enough to win the grand prize, but you deserve some recognition for that, my friend."
        ],
        [
          "if",
          "!hasflag(circus_game2prize)"
        ],
        [
          "say",
          "He gives you a little toy stuffed owl."
        ],
        [
          "if",
          "!hasflag(circus_game2prize)"
        ],
        [
          "checklocation",
          "Circus - Test Your Mind (Small Prize)"
        ],
        [
          "if",
          "hasflag(circus_game2prize)"
        ],
        [
          "rightspeak",
          "Limit one per customer on the owls, though."
        ],
        [
          "addflag",
          "circus_game2prize"
        ],
        [
          "option",
          "nothanks",
          "Okay"
        ]
      ],
      "level4": [
        [
          "say",
          "The clown starts picking cards out of the deck and holding them up with the backs to you. You rattle off their names as fast as he can pick them up. He seems genuinely impressed."
        ],
        [
          "rightsay",
          "That, @sir@, is so remarkable as to be practically frightening. Looks like we have a winner!"
        ],
        [
          "if",
          "hasflag(circus_gameticketprize)"
        ],
        [
          "goto",
          "already"
        ],
        [
          "checklocation",
          "Circus - Test Your ____ (Ticket Prize)"
        ],
        [
          "addflag",
          "circus_gameticketprize"
        ],
        [
          "if",
          "!hasflag(clowns_showover)"
        ],
        [
          "rightsay",
          "The show will be starting soon, so don't miss it!"
        ],
        [
          "sayoption",
          "nothanks",
          "Thanks!"
        ]
      ],
      "showover": [
        [
          "say",
          "He hands you a large and reasonably well-made plush owl."
        ],
        [
          "checklocation",
          "Circus - Test Your Mind (Large Prize)"
        ],
        [
          "addflag",
          "circus_game2prize2"
        ],
        [
          "sayoption",
          "nothanks",
          "Neat!"
        ]
      ]
    },
    "clowns_circus_kidtalk": {
      "post": [
        [
          "if",
          "hasitem(misc_balloon) && hasflag(clowns_tradedkid)==0"
        ],
        [
          "goto",
          "trade"
        ],
        [
          "rightportrait",
          "kid"
        ],
        [
          "rightsay",
          "Hello again, @maam@! Thanks for finding my lucky bottle cap!"
        ],
        [
          "sayoption",
          "leave",
          "No problem, kid."
        ]
      ],
      "okay": [
        [
          "rightsay",
          "Great! Here you go!"
        ],
        [
          "checklocation",
          "Circus Kid - Lucky Cap Trade"
        ],
        [
          "removeitem",
          "misc_balloon,1"
        ],
        [
          "addflag",
          "clowns_tradedkid,1"
        ],
        [
          "rightsay",
          "Thanks again, @maam@!"
        ],
        [
          "say",
          "The kid runs off with his new balloon."
        ],
        [
          "option",
          "leave",
          "Leave"
        ]
      ]
    },
    "clowns_circus_ticketbooth": {
      "handstamp": [
        [
          "if",
          "hasflag(clowns_suspicion)<=1"
        ],
        [
          "say",
          "The ticket booth clown recognizes you and waves you toward the circus entrance."
        ],
        [
          "if",
          "hasflag(clowns_suspicion)==2"
        ],
        [
          "say",
          "The ticket booth clown eyes you warily and waves you through the circus entrance."
        ],
        [
          "if",
          "hasflag(clowns_suspicion)==3"
        ],
        [
          "say",
          "The ticket booth clown kind of gives you the stink-eye, but he waves you through the circus entrance anyway."
        ],
        [
          "if",
          "hasflag(clowns_suspicion)>3"
        ],
        [
          "say",
          "The ticket booth clown just sort of glares at you."
        ],
        [
          "if",
          "!hasflag(circus_ticketbooth_gotcheck) && !hasflag(circus_ticketbooth_checkintro)"
        ],
        [
          "sayoption",
          "buycheckintro",
          "I'd like to buy another ticket."
        ],
        [
          "if",
          "!hasflag(circus_ticketbooth_gotcheck) && hasflag(circus_ticketbooth_checkintro)"
        ],
        [
          "sayoption",
          "buycheckretry",
          "I wanna buy that thing."
        ],
        [
          "sayoption",
          "done",
          "Leave him alone"
        ]
      ],
      "buycheckintro": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "I'd like to buy another ticket."
        ],
        [
          "say",
          "The clown cocks an eyebrow and looks back and forth between you and @pardnername@."
        ],
        [
          "rightportrait",
          "clown"
        ],
        [
          "rightsay",
          "Only one ticket per person, and I already told you pardners get in free."
        ],
        [
          "leftsay",
          "Okay, but like, you must have something else I can buy?  I really need to buy something here."
        ],
        [
          "rightsay",
          "...@Sir@, this is a ticket booth."
        ],
        [
          "say",
          "He glances around his stand before bending over, grabbing something from beneath the booth."
        ],
        [
          "rightsay",
          "Alright look, you could buy this thing?  No idea where it came from or who it belongs to.  You could have it for... let's say 1,000 Meat?"
        ],
        [
          "addflag",
          "circus_ticketbooth_checkintro"
        ],
        [
          "goto",
          "buyopts"
        ]
      ],
      "buycheckretry": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "I wanna buy that thing."
        ],
        [
          "say",
          "The clown shrugs."
        ],
        [
          "rightportrait",
          "clown"
        ],
        [
          "rightsay",
          "Sure, it's your money."
        ],
        [
          "goto",
          "buyopts"
        ]
      ],
      "buyopts": [
        [
          "if",
          "player.meat>=1000"
        ],
        [
          "option",
          "buycheck",
          "Buy the \"thing\" [1,000 Meat]"
        ],
        [
          "else",
          ""
        ],
        [
          "greyoption",
          "cantbuy",
          "Buy the \"thing\" [Requires 1,000 Meat]"
        ],
        [
          "option",
          "done",
          "On second thought, maybe later"
        ]
      ],
      "buycheck": [
        [
          "say",
          "You drop the Meat on the booth and he pushes the <i>thing</i> over to you."
        ],
        [
          "rightsay",
          "Pleasure doing business with you, I guess."
        ],
        [
          "addmeat",
          "-1000"
        ],
        [
          "checklocation",
          "Circus - Ticket Booth"
        ],
        [
          "addflag",
          "circus_ticketbooth_gotcheck"
        ],
        [
          "sayoption",
          "done",
          "Thanks."
        ]
      ],
      "done": [
        [
          "exit"
        ]
      ]
    },
    "clowns_circus_tickettalk": {
      "buyfihun": [
        [
          "addmeat",
          "-500"
        ],
        [
          "leftsay",
          "All right."
        ],
        [
          "rightsay",
          "Let me just stamp your hand for re-entry... there you go. Enjoy the show!"
        ],
        [
          "checklocation",
          "Circus - Ticket Booth"
        ],
        [
          "addflag",
          "circus_ticketbooth_gotcheck"
        ],
        [
          "leftsay",
          "What about my pardner?"
        ],
        [
          "rightsay",
          "Pardners get in free."
        ],
        [
          "option",
          "done",
          "Thanks."
        ]
      ],
      "buyit": [
        [
          "leftsay",
          "Ugh, fine."
        ],
        [
          "if",
          "hasflag(clowns_suspicion)<2"
        ],
        [
          "say",
          "You unload 5,000 Meat onto the counter. The clown looks surprised."
        ],
        [
          "if",
          "hasflag(clowns_suspicion)==2"
        ],
        [
          "say",
          "You unload 7,500 Meat onto the counter. The clown looks surprised."
        ],
        [
          "if",
          "hasflag(clowns_suspicion)>2"
        ],
        [
          "say",
          "You unload 10,000 Meat onto the counter. The clown looks surprised."
        ],
        [
          "if",
          "hasflag(clowns_suspicion)<2"
        ],
        [
          "addmeat",
          "-5000"
        ],
        [
          "if",
          "hasflag(clowns_suspicion)==2"
        ],
        [
          "addmeat",
          "-7500"
        ],
        [
          "if",
          "hasflag(clowns_suspicion)>2"
        ],
        [
          "addmeat",
          "-10000"
        ],
        [
          "rightsay",
          "Well, uh... okay! I guess you've bought yourself a ticket! Let me just stamp your hand for re-entry... there we go. Enjoy the show!"
        ],
        [
          "leftsay",
          "What about my pardner?"
        ],
        [
          "rightsay",
          "Pardners get in free."
        ],
        [
          "checklocation",
          "Circus - Ticket Booth"
        ],
        [
          "addflag",
          "circus_ticketbooth_gotcheck"
        ],
        [
          "sayoption",
          "done",
          "Thanks."
        ]
      ],
      "outfox5": [
        [
          "leftsay",
          "I don't know, this still seems shady to me. I'm pretty sure you're hiding something. Maybe something you wouldn't want the marshals to find out about..."
        ],
        [
          "rightsay",
          "Hey, wow, jeez @mister@! Fine, you win -- look, it's on the house, okay? Just gimme your hand so I can stamp you for re-entry. ...There. Good grief."
        ],
        [
          "leftsay",
          "Thanks!"
        ],
        [
          "rightsay",
          "Yeah, don't mention it. Literally, do not mention it."
        ],
        [
          "checklocation",
          "Circus - Ticket Booth"
        ],
        [
          "addflag",
          "circus_ticketbooth_gotcheck"
        ],
        [
          "incflag",
          "clowns_suspicion,1"
        ],
        [
          "option",
          "done",
          "Leave the ticket booth"
        ]
      ],
      "hornswoggle4": [
        [
          "leftsay",
          "That's still outside the normal price range."
        ],
        [
          "rightsay",
          "Hey, come on, we had to travel a long way to get here, we've got expenses and... stuff."
        ],
        [
          "leftsay",
          "I would hate to discover that you were hiding anything from me."
        ],
        [
          "rightsay",
          "Of course not! Of course not. Look, I tell you what, you're a VIP, you get the VIP ticket -- on the house. Lemme just stamp your hand for re-entry... Okay! Enjoy the show!"
        ],
        [
          "checklocation",
          "Circus - Ticket Booth"
        ],
        [
          "addflag",
          "circus_ticketbooth_gotcheck"
        ],
        [
          "leftsay",
          "Thank you."
        ],
        [
          "rightsay",
          "No problem! No problem!"
        ],
        [
          "option",
          "done",
          "Leave the ticket booth"
        ]
      ]
    },
    "clowns_crimescene_knapsack": {
      "searchit": [
        [
          "say",
          "Most of the contents are trashed from being stomped on. You do find a dented can of \"potted meat\", though.<p>You also notice that the knapsack has a knife sheath strapped to the side, but you don't see the knife anywhere."
        ],
        [
          "checklocation",
          "Destroyed Campsite - Knapsack"
        ],
        [
          "addflag",
          "clowns_knapsack,1"
        ],
        [
          "exit"
        ]
      ]
    },
    "clowns_tannery_bonepile": {
      "search": [
        [
          "say",
          "You poke around in the tattered shreds of his clothes and find an old key."
        ],
        [
          "addflag",
          "clowns_tannerybones,1"
        ],
        [
          "checklocation",
          "Danny's Tannery - Center Skeleton"
        ]
      ]
    },
    "clowns_tannery_hidingguy": {
      "cowsbane": [
        [
          "addflag",
          "clowns_tannery_gotbane,1"
        ],
        [
          "leftsay",
          "What's cowsbane?"
        ],
        [
          "rightsay",
          "It's an herb used for tanning leather. You can't grow it in large batches any more because cows show up and wreck the place, so there's other stuff we generally use for pig leather and so on. It's not as good though."
        ],
        [
          "leftsay",
          "Cows wreck your herb gardens?"
        ],
        [
          "rightsay",
          "Yeah, if you're growing more than about a flowerpot's worth, they get wind of it somehow. They hate the stuff. Can't figure why. Here, I've got a few extra seeds you can have. Be careful with them."
        ],
        [
          "checklocation",
          "Danny's Tannery (St. Rage Shed) - Grady's Cowsbane Seeds"
        ],
        [
          "addflag",
          "clowns_knowscowsbane"
        ],
        [
          "sayoption",
          "howlong",
          "How long have you been in here?"
        ],
        [
          "sayoption",
          "rescued",
          "Well, I took care of the clowns and the cows..."
        ]
      ]
    },
    "clowns_tannery_invis1.6": {
      "win2": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "Whew, what a mess that fight was. And what a mess the floor is afterward. At least now you're free to poke around the scenery."
        ],
        [
          "addflag",
          "clowns_tan3clear,1"
        ],
        [
          "addflag",
          "clowns_knowsclowns,2"
        ],
        [
          "addxp",
          "@xpreward_c@*6"
        ],
        [
          "say",
          "You take that nasty clown's knife, and oh look! They also had a key!"
        ],
        [
          "checklocation",
          "Danny's Tannery - Center Fight (Item 1)"
        ],
        [
          "checklocation",
          "Danny's Tannery - Center Fight (Item 2)"
        ],
        [
          "addstate",
          "winbutton,Let's get to it"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "clowns_tannery_toolbox": {
      "openit": [
        [
          "say",
          "Besides the miscellaneous scraps and junk that naturally accumulate in toolboxes, you find a handful of nails and a pair of sizeable, sharp, and serious-looking scissors."
        ],
        [
          "checklocation",
          "Danny's Tannery - Toolbox (Item 1)"
        ],
        [
          "checklocation",
          "Danny's Tannery - Toolbox (Item 2)"
        ],
        [
          "addflag",
          "clowns_tantoolbox,1"
        ]
      ]
    },
    "container_loot_army": {
      "start": [
        [
          "clearrandom",
          ""
        ],
        [
          "incflag",
          "containers_army,1"
        ],
        [
          "pushrandom",
          "booze_armywhiskey"
        ],
        [
          "pushrandom",
          "combat_armyfirstaid"
        ],
        [
          "pushrandom",
          "combat_bulletfire"
        ],
        [
          "pushrandom",
          "combat_bulletpoison"
        ],
        [
          "pushrandom",
          "combat_bulletsilver"
        ],
        [
          "pushrandom",
          "food_hardtack"
        ],
        [
          "pushrandom",
          "combat_smellingsalts"
        ],
        [
          "pushrandom",
          "combat_canteen"
        ],
        [
          "addstate",
          "quant,1"
        ],
        [
          "if",
          "hasflag(containers_army)>=4"
        ],
        [
          "incstate",
          "quant,rand(1,2)"
        ],
        [
          "if",
          "hasflag(containers_army)>=8"
        ],
        [
          "incstate",
          "quant,rand(1,2)"
        ],
        [
          "additem",
          "poprandom(),$quant$"
        ],
        [
          "addstate",
          "quant,1"
        ],
        [
          "if",
          "hasflag(containers_army)>=6"
        ],
        [
          "incstate",
          "quant,rand(1,2)"
        ],
        [
          "additem",
          "poprandom(),$quant$"
        ],
        [
          "if",
          "itemroll(30)"
        ],
        [
          "additem",
          "poprandom"
        ],
        [
          "if",
          "hasflag(containers_army)==5 || hasflag(containers_army)==10 || hasflag(containers_army)==15"
        ],
        [
          "say",
          "Ooh, hey, what's this?"
        ],
        [
          "if",
          "hasflag(containers_army)==5"
        ],
        [
          "checklocation",
          "Progressive Loot - 5th Army Container"
        ],
        [
          "if",
          "hasflag(containers_army)==10"
        ],
        [
          "checklocation",
          "Progressive Loot - 10th Army Container"
        ],
        [
          "if",
          "hasflag(containers_army)==15"
        ],
        [
          "checklocation",
          "Progressive Loot - 15th Army Container"
        ],
        [
          "runscript",
          "$returnscript$,$returnstate$"
        ]
      ]
    },
    "container_loot_elv": {
      "start": [
        [
          "incflag",
          "containers_elvibrato,1"
        ],
        [
          "if",
          "matchstring(@regionto@,a) || matchstring(@regionto@,b) || matchstring(@regionto@,c)"
        ],
        [
          "addstate",
          "tier,1"
        ],
        [
          "if",
          "matchstring(@regionto@,d) || matchstring(@regionto@,e) || matchstring(@regionto@,f)"
        ],
        [
          "addstate",
          "tier,2"
        ],
        [
          "if",
          "matchstring(@regionto@,g) || matchstring(@regionto@,h)"
        ],
        [
          "addstate",
          "tier,3"
        ],
        [
          "addstate",
          "scraps,1"
        ],
        [
          "incstate",
          "scraps,$tier$"
        ],
        [
          "if",
          "itemroll(20)"
        ],
        [
          "incstate",
          "scraps,1"
        ],
        [
          "if",
          "itemroll(30)"
        ],
        [
          "incstate",
          "scraps,1"
        ],
        [
          "if",
          "itemroll(40)"
        ],
        [
          "incstate",
          "scraps,1"
        ],
        [
          "additem",
          "elv_scrap,$scraps$"
        ],
        [
          "addstate",
          "roll,=rand(1,3)"
        ],
        [
          "if",
          "$tier$==1 && $roll$==1"
        ],
        [
          "additem",
          "elv_punchcard1"
        ],
        [
          "if",
          "$tier$==1 && $roll$==2"
        ],
        [
          "additem",
          "elv_punchcard1"
        ],
        [
          "if",
          "$tier$==1 && $roll$==3"
        ],
        [
          "additem",
          "elv_punchcard2"
        ],
        [
          "if",
          "$tier$==2 && $roll$==1"
        ],
        [
          "additem",
          "elv_punchcard1,rand(1,2)"
        ],
        [
          "if",
          "$tier$==2 && $roll$==2"
        ],
        [
          "additem",
          "elv_punchcard2"
        ],
        [
          "if",
          "$tier$==2 && $roll$==3"
        ],
        [
          "additem",
          "elv_punchcard2,rand(1,2)"
        ],
        [
          "if",
          "$tier$==3 && $roll$==1"
        ],
        [
          "additem",
          "elv_punchcard1,rand(3,4)"
        ],
        [
          "if",
          "$tier$==3 && $roll$==2"
        ],
        [
          "additem",
          "elv_punchcard2,rand(1,3)"
        ],
        [
          "if",
          "$tier$==3 && $roll$==3"
        ],
        [
          "additem",
          "elv_punchcard2"
        ],
        [
          "addstate",
          "cons,pickone(elv_sludge,food_elv,booze_elv,potion_elv)"
        ],
        [
          "if",
          "$tier$>=3"
        ],
        [
          "addstate",
          "cons,pickone(moonbits,elv_sludge,elv_sludge,food_elv,booze_elv,potion_elv)"
        ],
        [
          "if",
          "$tier$==2 && itemroll(30) && $roll$==3"
        ],
        [
          "additem",
          "$cons$"
        ],
        [
          "if",
          "$tier$>2 && $roll$==3"
        ],
        [
          "additem",
          "$cons$"
        ],
        [
          "if",
          "hasflag(containers_elvibrato)==5 || hasflag(containers_elvibrato)==7 || hasflag(containers_elvibrato)==11 || hasflag(containers_elvibrato)==13 || hasflag(containers_elvibrato)==15"
        ],
        [
          "goto",
          "progloot"
        ],
        [
          "else"
        ],
        [
          "goto",
          "noprogloot"
        ]
      ],
      "progloot": [
        [
          "if",
          "hasflag(containers_elvibrato)==5"
        ],
        [
          "checklocation",
          "Progressive Loot - 5th El Vibrato Container"
        ],
        [
          "if",
          "hasflag(containers_elvibrato)==7"
        ],
        [
          "checklocation",
          "Progressive Loot - 7th El Vibrato Container"
        ],
        [
          "if",
          "hasflag(containers_elvibrato)==9"
        ],
        [
          "checklocation",
          "Progressive Loot - 9th El Vibrato Container"
        ],
        [
          "if",
          "hasflag(containers_elvibrato)==11"
        ],
        [
          "checklocation",
          "Progressive Loot - 11th El Vibrato Container"
        ],
        [
          "if",
          "hasflag(containers_elvibrato)==13"
        ],
        [
          "checklocation",
          "Progressive Loot - 13th El Vibrato Container"
        ],
        [
          "if",
          "hasflag(containers_elvibrato)==15"
        ],
        [
          "checklocation",
          "Progressive Loot - 15th El Vibrato Container"
        ],
        [
          "runscript",
          "$returnscript$,$returnstate$"
        ]
      ],
      "noprogloot": [
        [
          "if",
          "matchstring(@regionto@,d)"
        ],
        [
          "additem",
          "pickone(combat_elvteleporter,combat_elvteleporter,combat_elvteleporter,combat_elvdrone,combat_elvdrone2)"
        ],
        [
          "if",
          "matchstring(@regionto@,h)"
        ],
        [
          "additem",
          "pickone(combat_elvdrone,combat_elvdrone2,combat_elvgrenade,combat_elvgrenade,combat_elvgrenade)"
        ],
        [
          "runscript",
          "$returnscript$,$returnstate$"
        ]
      ]
    },
    "container_loot_grave": {
      "start": [
        [
          "clearrandom",
          ""
        ],
        [
          "incflag",
          "containers_grave,1"
        ],
        [
          "pushrandom",
          "bone"
        ],
        [
          "pushrandom",
          "skullchips"
        ],
        [
          "pushrandom",
          "looseteeth"
        ],
        [
          "if",
          "hasflag(containers_grave)>=6"
        ],
        [
          "pushrandom",
          "sell_goldtooth"
        ],
        [
          "else",
          ""
        ],
        [
          "pushrandom",
          "sell_graveskull"
        ],
        [
          "pushrandom",
          "potion_gravedirt"
        ],
        [
          "pushrandom",
          "sell_oldcoins"
        ],
        [
          "if",
          "hasflag(containers_grave)>=9"
        ],
        [
          "pushrandom",
          "booze_grave"
        ],
        [
          "else",
          ""
        ],
        [
          "pushrandom",
          "booze_grave2"
        ],
        [
          "addstate",
          "quant,1"
        ],
        [
          "if",
          "hasflag(containers_grave)>=4"
        ],
        [
          "incstate",
          "quant,rand(1,2)"
        ],
        [
          "if",
          "hasflag(containers_grave)>=8"
        ],
        [
          "incstate",
          "quant,rand(1,2)"
        ],
        [
          "additem",
          "poprandom(),$quant$"
        ],
        [
          "addstate",
          "quant,1"
        ],
        [
          "if",
          "hasflag(containers_grave)>=6"
        ],
        [
          "incstate",
          "quant,rand(1,2)"
        ],
        [
          "additem",
          "poprandom(),$quant$"
        ],
        [
          "if",
          "itemroll(30)"
        ],
        [
          "additem",
          "poprandom"
        ],
        [
          "clearrandom",
          ""
        ],
        [
          "if",
          "!hasitem(ring_grave)"
        ],
        [
          "additem",
          "ring_grave"
        ],
        [
          "if",
          "hasflag(containers_grave)>=3 && !hasflag(container_loot_gotgravecheck1)"
        ],
        [
          "checklocation",
          "Progressive Loot - 3rd Grave Container"
        ],
        [
          "if",
          "hasflag(containers_grave)>=3 && !hasflag(container_loot_gotgravecheck1)"
        ],
        [
          "addflag",
          "container_loot_gotgravecheck1"
        ],
        [
          "if",
          "hasflag(containers_grave)>=6 && !hasflag(container_loot_gotgravecheck2)"
        ],
        [
          "checklocation",
          "Progressive Loot - 6th Grave Container"
        ],
        [
          "if",
          "hasflag(containers_grave)>=6 && !hasflag(container_loot_gotgravecheck2)"
        ],
        [
          "addflag",
          "container_loot_gotgravecheck2"
        ],
        [
          "if",
          "hasflag(containers_grave)>=9 && !hasflag(container_loot_gotgravecheck3)"
        ],
        [
          "checklocation",
          "Progressive Loot - 9th Grave Container"
        ],
        [
          "if",
          "hasflag(containers_grave)>=9 && !hasflag(container_loot_gotgravecheck3)"
        ],
        [
          "addflag",
          "container_loot_gotgravecheck3"
        ],
        [
          "if",
          "hasflag(containers_grave)>=12 && !hasflag(container_loot_gotgravecheck4)"
        ],
        [
          "checklocation",
          "Progressive Loot - 12th Grave Container"
        ],
        [
          "if",
          "hasflag(containers_grave)>=12 && !hasflag(container_loot_gotgravecheck4)"
        ],
        [
          "addflag",
          "container_loot_gotgravecheck4"
        ],
        [
          "if",
          "hasflag(containers_grave)>=15 && !hasflag(container_loot_gotgravecheck5)"
        ],
        [
          "checklocation",
          "Progressive Loot - 15th Grave Container"
        ],
        [
          "if",
          "hasflag(containers_grave)>=15 && !hasflag(container_loot_gotgravecheck5)"
        ],
        [
          "addflag",
          "container_loot_gotgravecheck5"
        ],
        [
          "if",
          "hasflag(containers_grave)>=18 && !hasflag(container_loot_gotgravecheck6)"
        ],
        [
          "checklocation",
          "Progressive Loot - 18th Grave Container"
        ],
        [
          "if",
          "hasflag(containers_grave)>=18 && !hasflag(container_loot_gotgravecheck6)"
        ],
        [
          "addflag",
          "container_loot_gotgravecheck6"
        ],
        [
          "if",
          "hasflag(containers_grave)>=21 && !hasflag(container_loot_gotgravecheck7)"
        ],
        [
          "checklocation",
          "Progressive Loot - 21st Grave Container"
        ],
        [
          "if",
          "hasflag(containers_grave)>=21 && !hasflag(container_loot_gotgravecheck7)"
        ],
        [
          "addflag",
          "container_loot_gotgravecheck7"
        ],
        [
          "if",
          "hasflag(containers_grave)>=24 && !hasflag(container_loot_gotgravecheck8)"
        ],
        [
          "checklocation",
          "Progressive Loot - 24th Grave Container"
        ],
        [
          "if",
          "hasflag(containers_grave)>=24 && !hasflag(container_loot_gotgravecheck8)"
        ],
        [
          "addflag",
          "container_loot_gotgravecheck8"
        ],
        [
          "runscript",
          "$returnscript$,$returnstate$"
        ]
      ]
    },
    "container_loot_medical": {
      "start": [
        [
          "incflag",
          "containers_medicine,1"
        ],
        [
          "clearrandom",
          ""
        ],
        [
          "pushrandom",
          "potion_nervepills"
        ],
        [
          "pushrandom",
          "potion_laudanum"
        ],
        [
          "pushrandom",
          "potion_bloodtonic"
        ],
        [
          "pushrandom",
          "combat_smellingsalts"
        ],
        [
          "pushrandom",
          "combat_antidote"
        ],
        [
          "pushrandom",
          "booze_surgicalgin"
        ],
        [
          "addstate",
          "quant,1"
        ],
        [
          "if",
          "hasflag(containers_medicine)>=3"
        ],
        [
          "incstate",
          "quant,rand(1,2)"
        ],
        [
          "if",
          "hasflag(containers_medicine)>=7"
        ],
        [
          "incstate",
          "quant,rand(1,2)"
        ],
        [
          "additem",
          "poprandom(),$quant$"
        ],
        [
          "addstate",
          "quant,1"
        ],
        [
          "if",
          "hasflag(containers_medicine)>=5"
        ],
        [
          "incstate",
          "quant,rand(1,2)"
        ],
        [
          "additem",
          "poprandom(),$quant$"
        ],
        [
          "if",
          "itemroll(30)"
        ],
        [
          "additem",
          "poprandom"
        ],
        [
          "if",
          "hasflag(containers_medicine)==3 || hasflag(containers_medicine)==6 || hasflag(containers_medicine)==9"
        ],
        [
          "say",
          "Ooh, hey, what's this?"
        ],
        [
          "if",
          "hasflag(containers_medicine)==3"
        ],
        [
          "checklocation",
          "Progressive Loot - 3rd Medical Container"
        ],
        [
          "if",
          "hasflag(containers_medicine)==6"
        ],
        [
          "checklocation",
          "Progressive Loot - 6th Medical Container"
        ],
        [
          "if",
          "hasflag(containers_medicine)==9"
        ],
        [
          "checklocation",
          "Progressive Loot - 9th Medical Container"
        ],
        [
          "runscript",
          "$returnscript$,$returnstate$"
        ]
      ]
    },
    "container_loot_mine": {
      "start": [
        [
          "clearrandom",
          ""
        ],
        [
          "incflag",
          "containers_mine,1"
        ],
        [
          "pushrandom",
          "booze_minerscoffee"
        ],
        [
          "pushrandom",
          "oilcan"
        ],
        [
          "pushrandom",
          "combat_match"
        ],
        [
          "pushrandom",
          "combat_kerosene"
        ],
        [
          "pushrandom",
          "combat_dynamite"
        ],
        [
          "pushrandom",
          "combat_smellingsalts"
        ],
        [
          "addstate",
          "quant,1"
        ],
        [
          "if",
          "hasflag(containers_mine)>=3"
        ],
        [
          "incstate",
          "quant,rand(1,2)"
        ],
        [
          "if",
          "hasflag(containers_mine)>=7"
        ],
        [
          "incstate",
          "quant,rand(1,2)"
        ],
        [
          "additem",
          "poprandom(),$quant$"
        ],
        [
          "addstate",
          "quant,1"
        ],
        [
          "if",
          "hasflag(containers_mine)>=5"
        ],
        [
          "incstate",
          "quant,rand(1,2)"
        ],
        [
          "additem",
          "poprandom(),$quant$"
        ],
        [
          "if",
          "itemroll(30)"
        ],
        [
          "additem",
          "poprandom"
        ],
        [
          "if",
          "hasflag(containers_mine)==3 || hasflag(containers_mine)==6 || hasflag(containers_mine)==9"
        ],
        [
          "say",
          "Ooh, hey, what's this?"
        ],
        [
          "if",
          "hasflag(containers_mine)==3"
        ],
        [
          "checklocation",
          "Progressive Loot - 3rd Mining Container"
        ],
        [
          "if",
          "hasflag(containers_mine)==6"
        ],
        [
          "checklocation",
          "Progressive Loot - 6th Mining Container"
        ],
        [
          "if",
          "hasflag(containers_mine)==9"
        ],
        [
          "checklocation",
          "Progressive Loot - 9th Mining Container"
        ],
        [
          "runscript",
          "$returnscript$,$returnstate$"
        ]
      ]
    },
    "container_loot_ranch": {
      "start": [
        [
          "incflag",
          "containers_ranch,1"
        ],
        [
          "clearrandom",
          ""
        ],
        [
          "pushrandom",
          "nails"
        ],
        [
          "pushrandom",
          "combat_canteen"
        ],
        [
          "pushrandom",
          "rope"
        ],
        [
          "pushrandom",
          "combat_lasso"
        ],
        [
          "pushrandom",
          "soap"
        ],
        [
          "pushrandom",
          "lock"
        ],
        [
          "pushrandom",
          "potion_rancher"
        ],
        [
          "pushrandom",
          "potion_rancher2"
        ],
        [
          "pushrandom",
          "booze_rancher"
        ],
        [
          "addstate",
          "quant,1"
        ],
        [
          "if",
          "hasflag(containers_ranch)>=3"
        ],
        [
          "incstate",
          "quant,rand(1,2)"
        ],
        [
          "if",
          "hasflag(containers_ranch)>=7"
        ],
        [
          "incstate",
          "quant,rand(1,2)"
        ],
        [
          "additem",
          "poprandom(),$quant$"
        ],
        [
          "addstate",
          "quant,1"
        ],
        [
          "if",
          "hasflag(containers_ranch)>=5"
        ],
        [
          "incstate",
          "quant,rand(1,2)"
        ],
        [
          "additem",
          "poprandom(),$quant$"
        ],
        [
          "if",
          "itemroll(30)"
        ],
        [
          "additem",
          "poprandom"
        ],
        [
          "if",
          "hasflag(containers_ranch)==5 || hasflag(containers_ranch)==10 || hasflag(containers_ranch)==15"
        ],
        [
          "say",
          "Ooh, hey, what's this?"
        ],
        [
          "if",
          "hasflag(containers_ranch)==5"
        ],
        [
          "checklocation",
          "Progressive Loot - 5th Ranch Container"
        ],
        [
          "if",
          "hasflag(containers_ranch)==10"
        ],
        [
          "checklocation",
          "Progressive Loot - 10th Ranch Container"
        ],
        [
          "if",
          "hasflag(containers_ranch)==15"
        ],
        [
          "checklocation",
          "Progressive Loot - 15th Ranch Container"
        ],
        [
          "runscript",
          "$returnscript$,$returnstate$"
        ]
      ]
    },
    "crafting_arcaneoven": {
      "iron1": [
        [
          "if",
          "crafting_cookery_gotspatulacheck && crafting_cookery_gotskilletcheck && crafting_cookery_gotbadgecheck"
        ],
        [
          "goto",
          "madeall"
        ],
        [
          "say",
          "Your mind reaches into the bean iron to see what shapes it conceals."
        ],
        [
          "say",
          "You detect three."
        ],
        [
          "if",
          "!crafting_cookery_gotspatulacheck"
        ],
        [
          "option",
          "spatula",
          "A spatula [Weapon, +5 Mysticality]"
        ],
        [
          "if",
          "!crafting_cookery_gotskilletcheck"
        ],
        [
          "option",
          "skillet",
          "A skillet [Off-Hand, +3 Armor]"
        ],
        [
          "if",
          "!crafting_cookery_gotbadgecheck"
        ],
        [
          "option",
          "badge",
          "A badge [Lapel, +7 Spell damage]"
        ],
        [
          "option",
          "forge",
          "None of the above"
        ]
      ],
      "spatula": [
        [
          "say",
          "%player_forgebeaniron%"
        ],
        [
          "removeitem",
          "beaniron1"
        ],
        [
          "checklocation",
          "Master Cookery Crafting - Level 1 (Spatula)"
        ],
        [
          "addflag",
          "crafting_cookery_gotspatulacheck"
        ],
        [
          "option",
          "forge",
          "%player_button_forgebeaniron%"
        ]
      ],
      "skillet": [
        [
          "say",
          "%player_forgebeaniron%"
        ],
        [
          "removeitem",
          "beaniron1"
        ],
        [
          "checklocation",
          "Master Cookery Crafting - Level 1 (Skillet)"
        ],
        [
          "addflag",
          "crafting_cookery_gotskilletcheck"
        ],
        [
          "option",
          "forge",
          "%player_button_forgebeaniron%"
        ]
      ],
      "badge": [
        [
          "say",
          "%player_forgebeaniron%"
        ],
        [
          "removeitem",
          "beaniron1"
        ],
        [
          "checklocation",
          "Master Cookery Crafting - Level 1 (Badge)"
        ],
        [
          "addflag",
          "crafting_cookery_gotbadgecheck"
        ],
        [
          "option",
          "forge",
          "%player_button_forgebeaniron%"
        ]
      ],
      "iron2": [
        [
          "if",
          "crafting_cookery_gotspatulacheck && crafting_cookery_gotskilletcheck && crafting_cookery_gotbadgecheck"
        ],
        [
          "goto",
          "madeall"
        ],
        [
          "say",
          "The dense bean-iron hides many mysteries."
        ],
        [
          "say",
          "Well, three.  Three mysteries.  They're good ones, though."
        ],
        [
          "if",
          "!crafting_cookery_gotladlecheck"
        ],
        [
          "option",
          "ladle",
          "A ladle [Weapon, +7 Mysticality]"
        ],
        [
          "if",
          "!crafting_cookery_gotsaucepancheck"
        ],
        [
          "option",
          "saucepan",
          "A saucepan [Off-Hand, +5 HP Regen]"
        ],
        [
          "if",
          "!crafting_cookery_gotcollandercheck"
        ],
        [
          "option",
          "collander",
          "A collander [Hat, +7 Mysticality]"
        ],
        [
          "option",
          "forge",
          "Never mind"
        ]
      ],
      "ladle": [
        [
          "say",
          "%player_forgebeaniron%"
        ],
        [
          "removeitem",
          "beaniron2"
        ],
        [
          "checklocation",
          "Master Cookery Crafting - Level 2 (Ladle)"
        ],
        [
          "addflag",
          "crafting_cookery_gotladlecheck"
        ],
        [
          "option",
          "forge",
          "%player_button_forgebeaniron%"
        ]
      ],
      "saucepan": [
        [
          "say",
          "%player_forgebeaniron%"
        ],
        [
          "removeitem",
          "beaniron2"
        ],
        [
          "checklocation",
          "Master Cookery Crafting - Level 2 (Saucepan)"
        ],
        [
          "addflag",
          "crafting_cookery_gotsaucepancheck"
        ],
        [
          "option",
          "forge",
          "%player_button_forgebeaniron%"
        ]
      ],
      "collander": [
        [
          "say",
          "%player_forgebeaniron%"
        ],
        [
          "removeitem",
          "beaniron2"
        ],
        [
          "checklocation",
          "Master Cookery Crafting - Level 2 (Collander)"
        ],
        [
          "addflag",
          "crafting_cookery_gotcollandercheck"
        ],
        [
          "option",
          "forge",
          "%player_button_forgebeaniron%"
        ]
      ],
      "iron3": [
        [
          "if",
          "crafting_cookery_gotspatulacheck && crafting_cookery_gotskilletcheck && crafting_cookery_gotbadgecheck"
        ],
        [
          "goto",
          "madeall"
        ],
        [
          "say",
          "This delicate bean-iron is flexible.  Versatile.  Complexity upon complexity hides within its structure."
        ],
        [
          "say",
          "What will you make?"
        ],
        [
          "if",
          "!crafting_cookery_gotwhiskcheck"
        ],
        [
          "option",
          "whisk",
          "A whisk [Weapon, +10 Myst, +1 Max AP]"
        ],
        [
          "if",
          "!crafting_cookery_gotkettlecheck"
        ],
        [
          "option",
          "kettle",
          "A kettle [Off-Hand, +50 Max HP]"
        ],
        [
          "if",
          "!crafting_cookery_gotpistolcheck"
        ],
        [
          "option",
          "pistol",
          "A shootin' iron [Pistol, +15 Spell damage]"
        ],
        [
          "option",
          "forge",
          "Nothing, never mind"
        ]
      ],
      "whisk": [
        [
          "say",
          "%player_forgebeaniron%"
        ],
        [
          "removeitem",
          "beaniron3"
        ],
        [
          "checklocation",
          "Master Cookery Crafting - Level 3 (Whisk)"
        ],
        [
          "addflag",
          "crafting_cookery_gotwhiskcheck"
        ],
        [
          "option",
          "forge",
          "%player_button_forgebeaniron%"
        ]
      ],
      "kettle": [
        [
          "say",
          "%player_forgebeaniron%"
        ],
        [
          "removeitem",
          "beaniron3"
        ],
        [
          "checklocation",
          "Master Cookery Crafting - Level 3 (Kettle)"
        ],
        [
          "addflag",
          "crafting_cookery_gotkettlecheck"
        ],
        [
          "option",
          "forge",
          "%player_button_forgebeaniron%"
        ]
      ],
      "pistol": [
        [
          "say",
          "%player_forgebeaniron%"
        ],
        [
          "removeitem",
          "beaniron3"
        ],
        [
          "checklocation",
          "Master Cookery Crafting - Level 3 (Shootin' Iron)"
        ],
        [
          "addflag",
          "crafting_cookery_gotpistolcheck"
        ],
        [
          "option",
          "forge",
          "%player_button_forgebeaniron%"
        ]
      ],
      "madeall": [
        [
          "say",
          "You've gotten all the value you can out of this material."
        ],
        [
          "option",
          "forge",
          "Okay"
        ]
      ]
    },
    "crafting_leather": {
      "leather1": [
        [
          "say",
          "You think about what you could make out of thick leather."
        ],
        [
          "if",
          "!crafting_leather_gothat1check"
        ],
        [
          "option",
          "hat1",
          "A hat [+5 Muscle]"
        ],
        [
          "if",
          "!crafting_leather_gotpants1check"
        ],
        [
          "option",
          "pants1",
          "Pants [+5 Muscle, +3 Armor]"
        ],
        [
          "if",
          "!crafting_leather_gotboots1check"
        ],
        [
          "option",
          "boots1",
          "Boots [+3 Stomp damage]"
        ],
        [
          "if",
          "!crafting_leather_gotbag1check"
        ],
        [
          "option",
          "offhand1",
          "A bag [+10% Meat Drop bonus]"
        ],
        [
          "if",
          "hasitem(nails) && !crafting_leather_gotgloves1check"
        ],
        [
          "option",
          "weapon1",
          "Nailgloves [+3 Muscle; Using nails]"
        ],
        [
          "if",
          "!hasitem(nails) && !crafting_leather_gotgloves1check"
        ],
        [
          "grayoption",
          "doo",
          "Nailgloves [Requires some nails]"
        ],
        [
          "option",
          "rope1",
          "3 lassos [Disabling combat item]"
        ],
        [
          "option",
          "start",
          "None of these"
        ]
      ],
      "hat1": [
        [
          "removeitem",
          "leather1"
        ],
        [
          "checklocation",
          "Leatherworkery Crafting - Level 1 (Hat)"
        ],
        [
          "addflag",
          "crafting_leather_gothat1check"
        ],
        [
          "option",
          "start",
          "Nice"
        ]
      ],
      "pants1": [
        [
          "removeitem",
          "leather1"
        ],
        [
          "checklocation",
          "Leatherworkery Crafting - Level 1 (Pants)"
        ],
        [
          "addflag",
          "crafting_leather_gotpants1check"
        ],
        [
          "option",
          "start",
          "Nice"
        ]
      ],
      "boots1": [
        [
          "removeitem",
          "leather1"
        ],
        [
          "checklocation",
          "Leatherworkery Crafting - Level 1 (Boots)"
        ],
        [
          "addflag",
          "crafting_leather_gotboots1check"
        ],
        [
          "option",
          "start",
          "Nice"
        ]
      ],
      "offhand1": [
        [
          "removeitem",
          "leather1"
        ],
        [
          "checklocation",
          "Leatherworkery Crafting - Level 1 (Bag)"
        ],
        [
          "addflag",
          "crafting_leather_gotbag1check"
        ],
        [
          "option",
          "start",
          "Nice"
        ]
      ],
      "weapon1": [
        [
          "removeitem",
          "leather1"
        ],
        [
          "removeitem",
          "nails"
        ],
        [
          "checklocation",
          "Leatherworkery Crafting - Level 1 (Gloves)"
        ],
        [
          "addflag",
          "crafting_leather_gotgloves1check"
        ],
        [
          "option",
          "start",
          "Nice"
        ]
      ],
      "leather2": [
        [
          "say",
          "You consider what you could make out of smoldering leather."
        ],
        [
          "if",
          "!crafting_leather_gothat2check"
        ],
        [
          "option",
          "hat2",
          "A hat [+7 Muscle, Cold Resist]"
        ],
        [
          "if",
          "!crafting_leather_gotpants2check"
        ],
        [
          "option",
          "pants2",
          "Pants [+7 Muscle, +4 Armor, Cold Resist]"
        ],
        [
          "if",
          "!crafting_leather_gotboots2check"
        ],
        [
          "option",
          "boots2",
          "Boots [+4 Speed, +5 Stomp damage]"
        ],
        [
          "if",
          "!crafting_leather_gotbag2check"
        ],
        [
          "option",
          "offhand2",
          "A bag [+20% Meat & +10% Item bonus]"
        ],
        [
          "if",
          "hasitem(cowfangs) && !crafting_leather_gotgloves2check"
        ],
        [
          "option",
          "weapon2",
          "Fang-gloves [Poisonous; Using cow fangs]"
        ],
        [
          "if",
          "!hasitem(cowfangs) && !crafting_leather_gotgloves2check"
        ],
        [
          "grayoption",
          "doo",
          "Fang-gloves [Requires cow fangs]"
        ],
        [
          "option",
          "rope2",
          "3 smoldering lassos [Disabling combat item]"
        ],
        [
          "option",
          "start",
          "None of these"
        ]
      ],
      "hat2": [
        [
          "removeitem",
          "leather2"
        ],
        [
          "checklocation",
          "Leatherworkery Crafting - Level 2 (Hat)"
        ],
        [
          "addflag",
          "crafting_leather_gothat2check"
        ],
        [
          "option",
          "start",
          "Nice"
        ]
      ],
      "pants2": [
        [
          "removeitem",
          "leather2"
        ],
        [
          "checklocation",
          "Leatherworkery Crafting - Level 2 (Pants)"
        ],
        [
          "addflag",
          "crafting_leather_gotpants2check"
        ],
        [
          "option",
          "start",
          "Nice"
        ]
      ],
      "boots2": [
        [
          "removeitem",
          "leather2"
        ],
        [
          "checklocation",
          "Leatherworkery Crafting - Level 2 (Boots)"
        ],
        [
          "addflag",
          "crafting_leather_gotboots2check"
        ],
        [
          "option",
          "start",
          "Nice"
        ]
      ],
      "offhand2": [
        [
          "removeitem",
          "leather2"
        ],
        [
          "checklocation",
          "Leatherworkery Crafting - Level 2 (Bag)"
        ],
        [
          "addflag",
          "crafting_leather_gotbag2check"
        ],
        [
          "option",
          "start",
          "Nice"
        ]
      ],
      "weapon2": [
        [
          "removeitem",
          "leather2"
        ],
        [
          "removeitem",
          "cowfangs"
        ],
        [
          "checklocation",
          "Leatherworkery Crafting - Level 2 (Gloves)"
        ],
        [
          "addflag",
          "crafting_leather_gotgloves2check"
        ],
        [
          "option",
          "start",
          "Nice"
        ]
      ],
      "leather3": [
        [
          "say",
          "You ponder what you could make out of infernal leather."
        ],
        [
          "if",
          "!hasskill(cowrruption) || crafting_leather_gotmalletcheck"
        ],
        [
          "goto",
          "afterskill"
        ],
        [
          "say",
          "An idea burns in your corrupt mind.  A hammer."
        ],
        [
          "if",
          "hasitem(bone)"
        ],
        [
          "option",
          "hammer",
          "Yes, a hammer [+11 Muscle; Using a bone]"
        ],
        [
          "else",
          ""
        ],
        [
          "grayoption",
          "hlammer",
          "Yes, a hammer [Requires a bone]"
        ],
        [
          "goto",
          "afterskill"
        ]
      ],
      "afterskill": [
        [
          "if",
          "!crafting_leather_gothat3check"
        ],
        [
          "option",
          "hat3",
          "A hat [+9 Muscle, On Fire]"
        ],
        [
          "if",
          "!crafting_leather_gotpants3check"
        ],
        [
          "option",
          "pants3",
          "Pants [+1 Max AP, On Fire]"
        ],
        [
          "if",
          "!crafting_leather_gotboots3check"
        ],
        [
          "option",
          "boots3",
          "Boots [+7 Stomp damage, On Fire]"
        ],
        [
          "if",
          "!crafting_leather_gotbag3check"
        ],
        [
          "option",
          "offhand3",
          "A bag [+30% Meat, +20% Item, On Fire]"
        ],
        [
          "if",
          "hasitem(ungulithhorn) && !crafting_leather_gotgloves3check"
        ],
        [
          "option",
          "weapon3",
          "Ungulith-horn gloves [Spooky damage; Using horn]"
        ],
        [
          "if",
          "!hasitem(ungulithhorn) && !crafting_leather_gotgloves3check"
        ],
        [
          "grayoption",
          "doo",
          "Ungulith-horn gloves [Requires ungulith horn]"
        ],
        [
          "option",
          "rope3",
          "3 infernal lassos [Disabling combat item]"
        ],
        [
          "option",
          "start",
          "None of these"
        ]
      ],
      "hammer": [
        [
          "removeitem",
          "leather3"
        ],
        [
          "removeitem",
          "bone"
        ],
        [
          "checklocation",
          "Leatherworkery Crafting - Level 3 (Mallet)"
        ],
        [
          "addflag",
          "crafting_leather_gotmalletcheck"
        ],
        [
          "option",
          "start",
          "Yes.  Yes."
        ]
      ],
      "hat3": [
        [
          "removeitem",
          "leather3"
        ],
        [
          "checklocation",
          "Leatherworkery Crafting - Level 3 (Hat)"
        ],
        [
          "addflag",
          "crafting_leather_gothat3check"
        ],
        [
          "option",
          "start",
          "Nice"
        ]
      ],
      "pants3": [
        [
          "removeitem",
          "leather3"
        ],
        [
          "checklocation",
          "Leatherworkery Crafting - Level 3 (Pants)"
        ],
        [
          "addflag",
          "crafting_leather_gotpants3check"
        ],
        [
          "option",
          "start",
          "Nice"
        ]
      ],
      "boots3": [
        [
          "removeitem",
          "leather3"
        ],
        [
          "checklocation",
          "Leatherworkery Crafting - Level 3 (Boots)"
        ],
        [
          "addflag",
          "crafting_leather_gotboots3check"
        ],
        [
          "option",
          "start",
          "Nice"
        ]
      ],
      "offhand3": [
        [
          "removeitem",
          "leather3"
        ],
        [
          "checklocation",
          "Leatherworkery Crafting - Level 3 (Bag)"
        ],
        [
          "addflag",
          "crafting_leather_gotbag3check"
        ],
        [
          "option",
          "start",
          "Nice"
        ]
      ],
      "weapon3": [
        [
          "removeitem",
          "leather3"
        ],
        [
          "removeitem",
          "ungulithhorn"
        ],
        [
          "checklocation",
          "Leatherworkery Crafting - Level 3 (Gloves)"
        ],
        [
          "addflag",
          "crafting_leather_gotgloves3check"
        ],
        [
          "option",
          "start",
          "Nice"
        ]
      ]
    },
    "cre_brotoybox": {
      "getpuz": [
        [
          "cls"
        ],
        [
          "say",
          "Heh.  He loves stuff like this."
        ],
        [
          "checklocation",
          "Your Family's Farm - Rufus' Toybox"
        ],
        [
          "markused"
        ]
      ]
    },
    "cre_dadconvo": {
      "leaving": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftspeak",
          "$lastoption$"
        ],
        [
          "say",
          "His lip quivers a little."
        ],
        [
          "if",
          "player.class==1"
        ],
        [
          "addstate",
          "heirloom,your grandmother's brass knuckles"
        ],
        [
          "if",
          "player.class==2"
        ],
        [
          "addstate",
          "heirloom,your grandmother's favorite can of beans"
        ],
        [
          "if",
          "player.class==3"
        ],
        [
          "addstate",
          "heirloom,your grandmother's briefcase full of snakes"
        ],
        [
          "rightpicture",
          "portrait_dad"
        ],
        [
          "rightspeak",
          "Listen, I... want you to have this.  It's $heirloom$."
        ],
        [
          "checklocation",
          "Your Family's Farm - Father's Gift"
        ],
        [
          "addflag",
          "cre_dad,1"
        ],
        [
          "option",
          "thankyou",
          "Thank him"
        ]
      ]
    },
    "cre_initsouvenirshelf": {
      "start": [
        [
          "if",
          "!hasflag(dlc_enabled) || hasflag(cre_gotsouvenirs)"
        ],
        [
          "exit"
        ],
        [
          "changeelementproperty",
          "souvenirshelf,decal,decal_gmshotglass,20,53"
        ],
        [
          "changeelementproperty",
          "souvenirshelf,decal1,decal_spiderring,-25,50"
        ]
      ]
    },
    "cre_mother": {
      "mom3": [
        [
          "leftspeak",
          "A present?"
        ],
        [
          "rightspeak",
          "Yep!  It's that book you wanted for Crimbo.  I know it's early, but..."
        ],
        [
          "sayoption",
          "book",
          "The one about picking locks?  Oh boy!"
        ]
      ],
      "book": [
        [
          "leftspeak",
          "The one about picking locks?  Oh boy!"
        ],
        [
          "rightspeak",
          "That's the one!  Enjoy it."
        ],
        [
          "checklocation",
          "Your Family's Farm - Mother's Gift"
        ],
        [
          "goto",
          "end"
        ]
      ]
    },
    "cre_souvenirshelf": {
      "e": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "addflag",
          "cre_gotsouvenirs"
        ],
        [
          "checklocation",
          "Your Family's Farm - Souvenir Shelf (Item 1)"
        ],
        [
          "checklocation",
          "Your Family's Farm - Souvenir Shelf (Item 2)"
        ]
      ]
    },
    "cre_yourbooks": {
      "coolbook": [
        [
          "cls"
        ],
        [
          "say",
          "Oh hey, this one might come in handy."
        ],
        [
          "checklocation",
          "Your Family's Farm - Your Bookcase"
        ]
      ]
    },
    "curlyscairn_cairn2": {
      "start": [
        [
          "say",
          "You lift up the corner of the entire cairn.  There's some kind of machine buried underneath it!"
        ],
        [
          "checklocation",
          "Curly's Cairn - Under the Cairn"
        ],
        [
          "addflag",
          "curlyscairn_gotcairn"
        ],
        [
          "say",
          "You get the sense you won't need Curly's compass anymore, so you bury it under the cairn."
        ],
        [
          "removeitem",
          "quest_curlycompass"
        ],
        [
          "option",
          "done",
          "If you say so"
        ]
      ]
    },
    "daveyard_bonepile": {
      "dig": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "It's mostly just boring broken bones, but you do find a skull with a weird tag on it..."
        ],
        [
          "checklocation",
          "The Daveyard - Far-Right Bone PIle"
        ],
        [
          "exit"
        ]
      ]
    },
    "daveyard_davegrave": {
      "dig3": [
        [
          "say",
          "You finally manage to reach all the way to the bottom of the bag, and retrieve a sodden lump from the bottom."
        ],
        [
          "say",
          "You unglob the wad and dry it off, then wash your arm in a nearby ditch."
        ],
        [
          "say",
          "This better be worth it."
        ],
        [
          "checklocation",
          "The Daveyard - Dave J's Grave"
        ],
        [
          "option",
          "done",
          "Leave"
        ]
      ]
    },
    "daveyard_sarcophagus": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "addflag",
          "daveyard_beatdave"
        ],
        [
          "say",
          "You put a stop to that skeleton's magical dancing."
        ],
        [
          "addxp",
          "xpreward_a*12"
        ],
        [
          "say",
          "You help yourself to his sweet knife."
        ],
        [
          "checklocation",
          "The Daveyard Mausoleum - The Skeleton of Dave B. Defeated"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "daveyard_stone1": {
      "digup": [
        [
          "addflag",
          "cemetery1_dugboots"
        ],
        [
          "cls"
        ],
        [
          "playsound",
          "Player_Use_Shovel"
        ],
        [
          "say",
          "You dig up the grave, just to check the veracity of the epitaph."
        ],
        [
          "say",
          "Sure enough -- boots but no pants!"
        ],
        [
          "checklocation",
          "The Daveyard - First Grave"
        ],
        [
          "exit"
        ]
      ]
    },
    "daveyard_stone3": {
      "popup": [
        [
          "say",
          "HERE LIES<p>DAVE J<p>1826-1884<p><i>Ra-pa-pa-pow!</i>"
        ],
        [
          "if",
          "hasflag(dirtwater_chefquest)==4 && hasitem(shovel)"
        ],
        [
          "option",
          "dig",
          "Dig up the grave [shovel]"
        ],
        [
          "if",
          "hasflag(dirtwater_chefquest)==4 && !hasitem(shovel)"
        ],
        [
          "grayoption",
          "pig",
          "Dig up the grave [Requires shovel]"
        ],
        [
          "exit"
        ]
      ]
    },
    "daveyard_wastedcultist": {
      "digthru": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "You dig through the rags and find a few things that look like they're worth keeping."
        ],
        [
          "checklocation",
          "The Daveyard Mausoleum - Rag Pile (Item 1)"
        ],
        [
          "checklocation",
          "The Daveyard Mausoleum - Rag Pile (Item 2)"
        ],
        [
          "checklocation",
          "The Daveyard Mausoleum - Rag Pile (Item 3)"
        ],
        [
          "goto",
          "tokencontinue"
        ]
      ]
    },
    "dirtwater_bartender": {
      "piano2": [
        [
          "leftsay",
          "Hmm... Maybe my info's too old. I found a note from some travelers that passed through here about eight years ago."
        ],
        [
          "rightsay",
          "Ohhh. Yeah, that was the <i>previous</i> bartender. He had a, uh, a little trick he used to offer to show people. It's what got him fired, eventually. That senator's wife wasn't amused."
        ],
        [
          "say",
          "He rummages around under the bar for a minute, then blows the dust off a tiny piano, about nine inches tall."
        ],
        [
          "rightsay",
          "Here, you can keep the piano, so long as you don't ask me about the trick."
        ],
        [
          "checklocation",
          "Dirtwater Saloon - Bartender's Mini Piano"
        ],
        [
          "sayoption",
          "done",
          "Thanks!"
        ]
      ]
    },
    "dirtwater_bookseller": {
      "intro": [
        [
          "addflag",
          "dirtwater_intro_books"
        ],
        [
          "rightsay",
          "Oh, hello again. Thank you for telling me about this place. The locals have been very welcoming."
        ],
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "Glad to hear it."
        ],
        [
          "rightsay",
          "Oh, and I never really thanked you properly for saving my life, so thank you. Although I still don't really understand what happened."
        ],
        [
          "leftsay",
          "I don't think I could explain it if I tried. And you're welcome."
        ],
        [
          "goto",
          "opts"
        ]
      ],
      "neighbor": [
        [
          "addflag",
          "dirtwater_updated_books"
        ],
        [
          "addstate",
          "neighborpos,=@dirtwater_npcstore_books@+1"
        ],
        [
          "addstate",
          "neighbor,@dirtwater_npcstore$neighborpos$@"
        ],
        [
          "if",
          "matchstring($neighbor$,cook)"
        ],
        [
          "rightsay",
          "A hot dog vendor moved in next door, and asked if could find a cookbook for him."
        ],
        [
          "if",
          "matchstring($neighbor$,tanner)"
        ],
        [
          "rightsay",
          "A tanner moved in next door, and was looking for a book about the trade."
        ],
        [
          "if",
          "matchstring($neighbor$,curiosity)"
        ],
        [
          "rightsay",
          "A strange fellow selling antiques moved in next door and was looking for books about \"arcane secrets\". I'm not sure what he meant by that, but I found one he seemed happy with."
        ],
        [
          "if",
          "matchstring($neighbor$,boots)"
        ],
        [
          "rightsay",
          "A bootmaker moved in next door and was looking for something boot-focused. Kind of a weird request, but I managed to find him a book about kicking."
        ],
        [
          "if",
          "matchstring($neighbor$,brewery)"
        ],
        [
          "rightsay",
          "A brewery moved in next door, which is helping me deal with being more than a decade out of date on current events. He likes modern adventure fiction, so it wasn't hard to find him something."
        ],
        [
          "addnpcstorecheck",
          "Dirtwater (Alexandria's Bookstore) - Bonus Item"
        ],
        [
          "rightsay",
          "I've got an extra copy of it, if you're interested."
        ],
        [
          "option",
          "opts",
          "I may well be!"
        ]
      ]
    },
    "dirtwater_bootsman": {
      "intro": [
        [
          "addflag",
          "dirtwater_intro_boots"
        ],
        [
          "rightsay",
          "Oh, hey. Hi. Nice to see you again."
        ],
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "Heya. Did your elves make the trip okay?"
        ],
        [
          "rightsay",
          "Oh sure, yeah. No problems like, at all. I've been seeing them less and less since the move, though, so I've been making some boots myself, just to help them out."
        ],
        [
          "leftsay",
          "Well, that's real nice of you."
        ],
        [
          "addnpcstoreitem",
          "tonysboots,aug_bootpolish,-1"
        ],
        [
          "goto",
          "opts"
        ]
      ],
      "neighbor": [
        [
          "addflag",
          "dirtwater_updated_boots"
        ],
        [
          "addstate",
          "neighborpos,=@dirtwater_npcstore_boots@+1"
        ],
        [
          "addstate",
          "neighbor,@dirtwater_npcstore$neighborpos$@"
        ],
        [
          "if",
          "matchstring($neighbor$,cook)"
        ],
        [
          "rightsay",
          "A guy moved in next door, selling hot dogs? So I figured I'd see if I could use his leftovers for boots? It's a little weird, but..."
        ],
        [
          "if",
          "matchstring($neighbor$,tanner)"
        ],
        [
          "rightsay",
          "A tanner moved in next door, so I got some, like, super-thick leather? For soles, you know? See what you think."
        ],
        [
          "if",
          "matchstring($neighbor$,curiosity)"
        ],
        [
          "rightsay",
          "A real weird guy moved in next door, he sold me some crazy nails that were, like, super cold? I dunno how that works, but I used 'em in a pair of boots if you wanna check 'em out."
        ],
        [
          "if",
          "matchstring($neighbor$,books)"
        ],
        [
          "rightsay",
          "A real nice lady set up a bookstore next door, and I got to thinking about... like, what if you had boots you could read? 'Coz it's only like one letter off, right? But then the elves made these and I can't read these letters at all. Real weird."
        ],
        [
          "if",
          "matchstring($neighbor$,brewery)"
        ],
        [
          "rightsay",
          "A guy set up a brewery next door, and I was, like... like, what if you had beer like right there in your boots? So, uh... yeah?"
        ],
        [
          "addnpcstorecheck",
          "Dirtwater (Tony's Boots) - Bonus Item"
        ],
        [
          "option",
          "opts",
          "Interesting!"
        ]
      ]
    },
    "dirtwater_chef": {
      "give2": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "$lastoption$"
        ],
        [
          "removeitem",
          "quest_chefpepper"
        ],
        [
          "rightsay",
          "Ah, a nice big one. That'll last a while. Good going."
        ],
        [
          "incflag",
          "peoplehelped,1"
        ],
        [
          "addxp",
          "xpreward_a"
        ],
        [
          "addflag",
          "dirtwater_chefquest,3"
        ],
        [
          "rightsay",
          "Okay, so, if you're still looking for stuff to do, I need someone to go check my mail. I ordered a new saut knife, but I haven't got time to go fetch it myself. Here's the key to my post office box."
        ],
        [
          "checklocation",
          "Dirtwater Saloon - Chef's Mail Key"
        ],
        [
          "sayoption",
          "done",
          "All right."
        ]
      ],
      "give4": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "$lastoption$"
        ],
        [
          "removeitem",
          "quest_secretsauce"
        ],
        [
          "rightsay",
          "Hey, thanks a million, buddy!  Now my slop will be world-famous!"
        ],
        [
          "addflag",
          "dirtwater_chefquest,5"
        ],
        [
          "incflag",
          "peoplehelped,1"
        ],
        [
          "addxp",
          "xpreward_a"
        ],
        [
          "rightsay",
          "Here, let me give you a little something for all your trouble. It fell in the slop, but it's still good."
        ],
        [
          "checklocation",
          "Dirtwater Saloon - Chef's Quest Complete"
        ],
        [
          "sayoption",
          "done",
          "All in a day's work!"
        ]
      ]
    },
    "dirtwater_flowergirl": {
      "popup": [
        [
          "if",
          "hasflag(dirtwater_boughtflowers)"
        ],
        [
          "goto",
          "no"
        ],
        [
          "say",
          "This little girl is selling flowers."
        ],
        [
          "if",
          "meat>=50"
        ],
        [
          "option",
          "e",
          "Buy some [50 Meat]"
        ],
        [
          "else",
          ""
        ],
        [
          "grayoption",
          "erf",
          "Buy some [50 Meat]"
        ]
      ],
      "e": [
        [
          "addflag",
          "dirtwater_boughtflowers"
        ],
        [
          "addmeat",
          "-50"
        ],
        [
          "checklocation",
          "Dirtwater - Flower Girl"
        ],
        [
          "speechbubble",
          "flowergirl,0,60",
          "Thank you @mister@!"
        ]
      ]
    },
    "dirtwater_generalstore": {
      "initstore": [
        [
          "addflag",
          "store_dirtwatergeneral"
        ],
        [
          "addnpcstoreitem",
          "dirtwatergeneral,food_sodacrackers,-1"
        ],
        [
          "addnpcstoreitem",
          "dirtwatergeneral,food_plumpudding,-1"
        ],
        [
          "addnpcstoreitem",
          "dirtwatergeneral,food_bloodsausage,-1"
        ],
        [
          "addnpcstoreitem",
          "dirtwatergeneral,potion_toothpowder,-1"
        ],
        [
          "addnpcstoreitem",
          "dirtwatergeneral,combat_dynamite,rand(3,5)"
        ],
        [
          "addnpcstoreitem",
          "dirtwatergeneral,binoculars,1"
        ],
        [
          "if",
          "gary"
        ],
        [
          "addnpcstoreitem",
          "dirtwatergeneral,shroomgro,1,400"
        ],
        [
          "goto",
          "openstore"
        ],
        [
          "exit"
        ]
      ]
    },
    "dirtwater_leatherman": {
      "stockstore": [
        [
          "addnpcstoreitem",
          "tanner,aug_strop,-1"
        ],
        [
          "goto",
          "opts"
        ]
      ],
      "neighbor": [
        [
          "addflag",
          "dirtwater_updated_tanner"
        ],
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "Hey Grady, I noticed you've got a new neighbor."
        ],
        [
          "addstate",
          "neighborpos,=@dirtwater_npcstore_tanner@+1"
        ],
        [
          "addstate",
          "neighbor,@dirtwater_npcstore$neighborpos$@"
        ],
        [
          "rightportrait",
          "leatherman"
        ],
        [
          "if",
          "matchstring($neighbor$,cook)"
        ],
        [
          "rightsay",
          "Yeah, a hot dog stand -- I was thinking, if someone bought a whole lot of hot dogs, maybe they'd want some kind of sling or bandolier to hold 'em?"
        ],
        [
          "if",
          "matchstring($neighbor$,curiosity)"
        ],
        [
          "rightsay",
          "Yeah! They're giving me a bulk discount on little magical charms, so I can make bandoliers with little magical charms on 'em!"
        ],
        [
          "if",
          "matchstring($neighbor$,boots)"
        ],
        [
          "rightsay",
          "A bootsmith, yep! In fact I scored a sweet little side gig making bootstraps for him. I'm selling them here too, in case you need a spare."
        ],
        [
          "if",
          "matchstring($neighbor$,books)"
        ],
        [
          "rightsay",
          "Yeah, I found a book about pants there that was real helpful! I only ever made chaps before, because I couldn't figure out the butt part."
        ],
        [
          "if",
          "matchstring($neighbor$,brewery)"
        ],
        [
          "rightsay",
          "Heh, I sure won't complain about being neighbors with a brewery! In fact I invented these pants with extra pockets to hold your beer..."
        ],
        [
          "addnpcstorecheck",
          "Dirtwater (Grady's Fine Leather Goods) - Bonus Item"
        ],
        [
          "sayoption",
          "opttemp",
          "Interesting!"
        ]
      ]
    },
    "dirtwater_murray": {
      "intro": [
        [
          "addflag",
          "dirtwater_intro_curiosity"
        ],
        [
          "rightsay",
          "Well, hello again! Thank you for telling me about this town, my friend, it's a marvelous location. That's two good turns you've done me!"
        ],
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "Aw, don't mention it."
        ],
        [
          "rightsay",
          "Speaking of which, here's your curious headband back. Fortune willing, I won't be needing it again. No more gambles like that for me!"
        ],
        [
          "additem",
          "hat_elvheadband"
        ],
        [
          "addnpcstoreitem",
          "curiosity,allpurposebeans,-1,300"
        ],
        [
          "goto",
          "opts"
        ]
      ],
      "neighbor": [
        [
          "addflag",
          "dirtwater_updated_curiosity"
        ],
        [
          "addstate",
          "neighborpos,=@dirtwater_npcstore_curiosity@+1"
        ],
        [
          "addstate",
          "neighbor,@dirtwater_npcstore$neighborpos$@"
        ],
        [
          "rightsay",
          "A very amusing synchronicity occurred!"
        ],
        [
          "if",
          "matchstring($neighbor$,cook)"
        ],
        [
          "rightsay",
          "The very same day a hot dog salesman moved in next door to me, I came into possession of an ancient ring with mysterious meat-detection powers!"
        ],
        [
          "if",
          "matchstring($neighbor$,tanner)"
        ],
        [
          "rightsay",
          "You noticed the tanner that moved in next door to me? Well, the same day he arrived, I acquired a spool of magic-amplifying thread. If you were to embroider some pants with it, the results could be quite powerful!"
        ],
        [
          "if",
          "matchstring($neighbor$,boots)"
        ],
        [
          "rightsay",
          "Have you met the bootmaker next door? I wasn't inclined to believe his stories about elves, but this morning I found a very interesting little hat on my doorstep, where my milk delivery was supposed to be!"
        ],
        [
          "if",
          "matchstring($neighbor$,books)"
        ],
        [
          "rightsay",
          "Have you met the charming young lady who runs the bookshop next door? The very day she moved in, I received a package from a contact of mine -- a mysterious painting!"
        ],
        [
          "if",
          "matchstring($neighbor$,brewery)"
        ],
        [
          "rightsay",
          "I've been working for several years on constructing a magical artifact of my own devising, and the same day the brewer moved in next door, I finally hit on the inspiration I required to finish it! It didn't even take very many bottles!"
        ],
        [
          "addnpcstorecheck",
          "Dirtwater (Murray's Curiosity & Bean) - Bonus Item"
        ],
        [
          "rightsay",
          "Would you care to see it?"
        ],
        [
          "option",
          "opts",
          "Interesting!"
        ]
      ]
    },
    "dirtwater_poboxes": {
      "popup": [
        [
          "if",
          "hasitem(quest_chefkey)"
        ],
        [
          "queue"
        ],
        [
          "runscript",
          "dirtwater_poboxes_open"
        ],
        [
          "else",
          ""
        ],
        [
          "if",
          "hasitem(quest_fort3key)"
        ],
        [
          "queue"
        ],
        [
          "runscript",
          "dirtwater_poboxes_open"
        ],
        [
          "say",
          "A big cabinet of locked post-office boxes."
        ]
      ]
    },
    "dirtwater_poboxes_open": {
      "start": [
        [
          "if",
          "hasitem(quest_chefkey)"
        ],
        [
          "say",
          "You find P. O. box 441, the one that belongs to the chef at the Jewel."
        ],
        [
          "if",
          "hasitem(quest_fort3key)"
        ],
        [
          "say",
          "You find P. O. box 114, for which you found the key at Fort Treason."
        ],
        [
          "if",
          "hasitem(quest_chefkey)"
        ],
        [
          "option",
          "open441",
          "Open box 441"
        ],
        [
          "if",
          "hasitem(quest_fort3key)"
        ],
        [
          "option",
          "open114",
          "Open box 114"
        ],
        [
          "option",
          "done",
          "Leave"
        ]
      ],
      "open441": [
        [
          "say",
          "You open the box and a torrent of junk mail falls out to reveal a knife, just sitting loose in the box."
        ],
        [
          "say",
          "You pick it up."
        ],
        [
          "checklocation",
          "Dirtwater Post Office - P.O. Box 441"
        ],
        [
          "option",
          "done",
          "Back to the chef!"
        ]
      ],
      "open114": [
        [
          "say",
          "You open the box.  It's empty except for a single sheet of card stock with columns of numbers on it in tiny print."
        ],
        [
          "removeitem",
          "quest_fort3key"
        ],
        [
          "checklocation",
          "Dirtwater Post Office - P.O. Box 114"
        ],
        [
          "option",
          "done",
          "Hmm"
        ]
      ]
    },
    "dirtwater_postmaster": {
      "codes2": [
        [
          "say",
          "After a couple of minutes, she comes back with a sheet of note paper."
        ],
        [
          "rightsay",
          "Okay, so each map has a code number on it, y'see? Based on region an' direction a' travel..."
        ],
        [
          "say",
          "She explains how to work out the code you need, and gives you a cheat sheet for reference."
        ],
        [
          "checklocation",
          "Dirtwater Post Office - Postal Codes"
        ],
        [
          "delflag",
          "postalstation_needcode"
        ],
        [
          "option",
          "done",
          "Thank her and leave"
        ]
      ]
    },
    "dirtwater_spittoon": {
      "seven": [
        [
          "say",
          "You found something. You found a tacky, filth-covered, porcelain cow figurine. A useless, disgusting thing that will make a great heirloom for your children, assuming you're still able to have any, and you hate them."
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "Dirtwater - Spittoon"
        ],
        [
          "incflag",
          "spittoonsopen,1"
        ],
        [
          "option",
          "done",
          "Hooray!"
        ]
      ]
    },
    "dirtwater_yourtable": {
      "take": [
        [
          "addflag",
          "room_postcard"
        ],
        [
          "cls"
        ],
        [
          "checklocation",
          "Dirtwater Guest Room - Table"
        ]
      ]
    },
    "dynamitedans_store": {
      "initstore": [
        [
          "addflag",
          "store_dynamitedan,1"
        ],
        [
          "addnpcstoreitem",
          "dynamitedan,combat_dynamite,rand(15,20)"
        ],
        [
          "goto",
          "launch"
        ]
      ]
    },
    "elvibrato1_beaniron1": {
      "popup": [
        [
          "say",
          "You sense a deposit of bean iron!"
        ],
        [
          "if",
          "hasitem(pick)"
        ],
        [
          "option",
          "pickit",
          "Mine it [pickaxe]"
        ],
        [
          "else",
          ""
        ],
        [
          "say",
          "Unfortunately, you are sans pickaxe."
        ]
      ],
      "pickit": [
        [
          "cls"
        ],
        [
          "say",
          "There we go!"
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "Humming Cave - Bean-Iron Deposit"
        ]
      ]
    },
    "elvibrato1_gettransceiver": {
      "get": [
        [
          "cls"
        ],
        [
          "checklocation",
          "Bizarre Ruin - Half-Buried Pedestal"
        ],
        [
          "markused"
        ],
        [
          "exit"
        ]
      ]
    },
    "elvibrato1_purplegrass": {
      "get": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "Humming Cave - Grass Outside"
        ]
      ]
    },
    "elvibrato2_batterybox": {
      "take": [
        [
          "say",
          "You grab the device.  The Perfessor will want to see this."
        ],
        [
          "checklocation",
          "El Vibrato Chamber (Lost Dutch Oven Mine) - Leftmost Box"
        ],
        [
          "markused"
        ],
        [
          "option",
          "done",
          "Yup"
        ]
      ]
    },
    "elvibrato2_fusetable": {
      "take": [
        [
          "cls"
        ],
        [
          "addflag",
          "elvibrato2_fusetable"
        ],
        [
          "checklocation",
          "El Vibrato Ruin - Cylinder"
        ]
      ]
    },
    "elvibrato2_hatchest": {
      "open": [
        [
          "removeitem",
          "elv_key"
        ],
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "particleburstwaa",
          "hatchest,burst_elvdespawnup,50,15"
        ],
        [
          "say",
          "There's a strange cloth loop inside. At least it feels more or less like cloth."
        ],
        [
          "checklocation",
          "El Vibrato Chamber (Lost Dutch Oven Mine) - Locked Box"
        ]
      ]
    },
    "elvibrato3_accvending": {
      "start": [
        [
          "say",
          "The screen on this machine says ^EQUIPMENT FABRICATION^translate_elvibrato^"
        ],
        [
          "if",
          "!curiousabandonedwell_gotringcheck && !curiousabandonedwell_gotbroochcheck"
        ],
        [
          "say",
          "There are two buttons."
        ],
        [
          "if",
          "hasflag(curiousabandonedwell_vendingbuttonsused) == 1"
        ],
        [
          "say",
          "There's one button you haven't tried."
        ],
        [
          "if",
          "curiousabandonedwell_gotringcheck && curiousabandonedwell_gotbroochcheck"
        ],
        [
          "say",
          "You've gotten everything you need from this machine."
        ],
        [
          "if",
          "!curiousabandonedwell_gotringcheck"
        ],
        [
          "option",
          "ring",
          "^BRACELET FABRICATION^translate_elvibrato^"
        ],
        [
          "if",
          "!curiousabandonedwell_gotbroochcheck"
        ],
        [
          "option",
          "lapel",
          "^BROOCH FABRICATION^translate_elvibrato^"
        ],
        [
          "option",
          "done",
          "Leave"
        ]
      ],
      "ring": [
        [
          "if",
          "hasitem(elv_scrap)<5"
        ],
        [
          "goto",
          "notenough"
        ],
        [
          "say",
          "The machine emits a noise like a duck and a slot opens.  The El Vibrato scraps in your pack vibrate, so you cram some of them in the hole.  After five, the slot closes and reopens, having converted your garbage into jewelry!"
        ],
        [
          "removeitem",
          "elv_scrap,5"
        ],
        [
          "playsounds",
          "elv_,.35,ho,be,ni,pause,cha,cha,cha,no"
        ],
        [
          "checklocation",
          "Curious Abandoned Well Facility (Equipment Fabrication) - Item 1"
        ],
        [
          "addflag",
          "curiousabandonedwell_gotringcheck"
        ],
        [
          "incflag",
          "curiousabandonedwell_vendingbuttonsused"
        ],
        [
          "option",
          "done",
          "Nice"
        ]
      ],
      "lapel": [
        [
          "if",
          "hasitem(elv_scrap)<5"
        ],
        [
          "goto",
          "notenough"
        ],
        [
          "say",
          "The machine emits a noise like a duck and a slot opens.  The El Vibrato scraps in your pack vibrate, so you cram some of them in the hole.  After five, the slot closes and reopens, having converted your garbage into jewelry!"
        ],
        [
          "removeitem",
          "elv_scrap,5"
        ],
        [
          "playsounds",
          "elv_,.35,som,nok,pause,cha,cha,cha,no"
        ],
        [
          "checklocation",
          "Curious Abandoned Well Facility (Equipment Fabrication) - Item 2"
        ],
        [
          "addflag",
          "curiousabandonedwell_gotbroochcheck"
        ],
        [
          "incflag",
          "curiousabandonedwell_vendingbuttonsused"
        ],
        [
          "option",
          "done",
          "Nice"
        ]
      ]
    },
    "elvibrato3_chest1": {
      "unlock": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "particleburstwaa",
          "chest1,burst_elvdespawnup,50,15"
        ],
        [
          "additem",
          "elv_powersphere"
        ],
        [
          "checklocation",
          "Curious Abandoned Well Facility (Secondary Storage) - Bottom Chest"
        ]
      ]
    },
    "elvibrato3_chest2": {
      "unlock": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "particleburstwaa",
          "chest2,burst_elvdespawnup,50,15"
        ],
        [
          "additem",
          "elv_powersphere"
        ],
        [
          "checklocation",
          "Curious Abandoned Well Facility (Secondary Storage) - Top Chest"
        ]
      ]
    },
    "elvibrato3_fabtable": {
      "get": [
        [
          "cls"
        ],
        [
          "checklocation",
          "Curious Abandoned Well Facility (Secondary Storage) - Weird Device"
        ],
        [
          "markused"
        ],
        [
          "exit"
        ]
      ]
    },
    "elvibrato4_coffeemaker": {
      "yes": [
        [
          "cls"
        ],
        [
          "say",
          "The machine emits a pleasant chime, and piping hot coffee pours into the cup.  You grab it."
        ],
        [
          "checklocation",
          "El Vibrato Construction Facility - BUGAANZEVE"
        ],
        [
          "markused"
        ]
      ]
    },
    "elvibrato5_corpseman": {
      "e": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "Ooh, they had a bunch of El Vibrato stuff!"
        ],
        [
          "additem",
          "elv_scrap,rand(4,6)"
        ],
        [
          "checklocation",
          "Curious Flat Plain - Explorer Skeleton"
        ],
        [
          "additem",
          "elv_punchcard1,rand(2,4)"
        ]
      ]
    },
    "elvibrato5_trashpile": {
      "e": [
        [
          "addflag",
          "elvibrato5_gotgarbage,2"
        ],
        [
          "cls"
        ],
        [
          "checklocation",
          "Curious Flat Plain - Garbage Return"
        ]
      ]
    },
    "elvibrato6_useterminal": {
      "makekey": [
        [
          "checklocation",
          "El Vibrato Chamber (Curious False Mountain) - Chronokey Fabrication"
        ],
        [
          "say",
          "The terminal makes a type of sound you've never heard before, and your bag gets slightly heavier.  You investigate, and find a... oh yeah, it's just that weird El Vibrato thing you found in the woods when you were six.  That thing has been there the whole time."
        ],
        [
          "addflag",
          "elvibrato6_timekey"
        ],
        [
          "option",
          "done",
          "Yeah.  The whole time."
        ]
      ]
    },
    "elvibrato7_crowntable": {
      "e": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "It's a perfect fit!"
        ],
        [
          "checklocation",
          "El Vibrato Control Center - El Vibrato Quest Completion"
        ]
      ]
    },
    "elv_chest": {
      "unlock": [
        [
          "particleburstwaa",
          "elvchest,burst_elvdespawnup,50,15"
        ],
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "The keystone snaps into place and the lid vanishes."
        ],
        [
          "addstate",
          "returnscript,elv_chest"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_elv"
        ]
      ],
      "afterloot": []
    },
    "fort1_generalgob": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "addflag",
          "fort1_generalgob,1"
        ],
        [
          "say",
          "You put an end to that pie-shooting goblin's reign of terror.  All the world's pies thank you."
        ],
        [
          "addxp",
          "@xpreward_a@*3"
        ],
        [
          "checklocation",
          "Fort Cowardice Back Office - General Gob's Hat"
        ],
        [
          "checklocation",
          "Fort Cowardice Back Office - General Gob's Pistol"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ],
      "hat": [
        [
          "leftsay",
          "Wait. Leaving a gun and hat here. They will not safe being."
        ],
        [
          "rightspeak",
          "Yes. Good. You protecting them for me."
        ],
        [
          "checklocation",
          "Fort Cowardice Back Office - General Gob's Hat"
        ],
        [
          "checklocation",
          "Fort Cowardice Back Office - General Gob's Pistol"
        ],
        [
          "goto",
          "heleaves"
        ]
      ],
      "hatgun": [
        [
          "leftsay",
          "You should leaving a hat and gun. Having a fresh start."
        ],
        [
          "rightspeak",
          "Yes, correct being. I will fighting each pie as if it is first pie being."
        ],
        [
          "checklocation",
          "Fort Cowardice Back Office - General Gob's Hat"
        ],
        [
          "checklocation",
          "Fort Cowardice Back Office - General Gob's Pistol"
        ],
        [
          "goto",
          "heleaves"
        ]
      ],
      "gun": [
        [
          "leftsay",
          "Leaving the gun and hat. Fighting a pie with honor, with fists and face."
        ],
        [
          "rightspeak",
          "Yes, you are correct. Truly a pie must be with my own strength fighting."
        ],
        [
          "checklocation",
          "Fort Cowardice Back Office - General Gob's Hat"
        ],
        [
          "checklocation",
          "Fort Cowardice Back Office - General Gob's Pistol"
        ],
        [
          "goto",
          "heleaves"
        ]
      ]
    },
    "fort1_messtable": {
      "get": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "Bless this mess."
        ],
        [
          "checklocation",
          "Fort Cowardice Mess Hall - Table (Item 1)"
        ],
        [
          "if",
          "itemroll(40)"
        ],
        [
          "additem",
          "booze_armywhiskey"
        ],
        [
          "checklocation",
          "Fort Cowardice Mess Hall - Table (Item 2)"
        ],
        [
          "if",
          "itemroll(40)"
        ],
        [
          "additem",
          "food_hardtack"
        ],
        [
          "exit"
        ]
      ]
    },
    "fort1_nursedesk": {
      "papers": [
        [
          "say",
          "The papers are mostly just boring medical records.  Dental daguerrotypes, lamentations that antibiotics haven't been discovered yet, that kind of thing."
        ],
        [
          "if",
          "!hasflag(fort1_deskbreadcrumb)"
        ],
        [
          "say",
          "Hey wait, what's this?  This looks like it might be important."
        ],
        [
          "if",
          "!hasflag(fort1_deskbreadcrumb)"
        ],
        [
          "checklocation",
          "Fort Cowardice Math Tent - Desk Papers"
        ],
        [
          "if",
          "!hasflag(fort1_deskbreadcrumb)"
        ],
        [
          "addflag",
          "fort1_deskbreadcrumb"
        ],
        [
          "goto",
          "options"
        ]
      ]
    },
    "fort1_nursesafe": {
      "open": [
        [
          "cls"
        ],
        [
          "playsound",
          "opensafe"
        ],
        [
          "say",
          "You open the safe and put the controlled substances under your own control."
        ],
        [
          "checklocation",
          "Fort Cowardice Math Tent - Safe"
        ],
        [
          "markused"
        ]
      ]
    },
    "fort1_nurseshelf": {
      "get": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "You bolster your supply of medical goods at the expense of the shelf's."
        ],
        [
          "checklocation",
          "Fort Cowardice Math Tent - Shelves"
        ],
        [
          "exit"
        ]
      ]
    },
    "fort1_piesafe": {
      "yep": [
        [
          "cls"
        ],
        [
          "say",
          "There's a single pie inside, shot to pieces."
        ],
        [
          "checklocation",
          "Fort Cowardice Back Office - Pie Safe"
        ],
        [
          "markused"
        ]
      ]
    },
    "fort1_spicecabinet": {
      "open": [
        [
          "cls"
        ],
        [
          "if",
          "hasflag(dirtwater_chefquest)==1 && !hasflag(fort1_lootedspicerack)"
        ],
        [
          "goto",
          "givepeter"
        ],
        [
          "if",
          "hasflag(dirtwater_chefquest)==1 && hasflag(fort1_lootedspicerack)"
        ],
        [
          "say",
          "One of those things is enough."
        ],
        [
          "if",
          "hasflag(dirtwater_chefquest)>1"
        ],
        [
          "say",
          "This spice cabinet has provided all the value it's going to provide."
        ],
        [
          "if",
          "!hasflag(dirtwater_chefquest)"
        ],
        [
          "say",
          "It's just a bunch of unlabeled green shakers.  Better leave them alone -- they might be poison instead of spices, for all you know."
        ]
      ],
      "givepeter": [
        [
          "say",
          "Little green unlabelled jars. Hopefully, this is the stuff the chef was looking for."
        ],
        [
          "checklocation",
          "Fort Cowardice Mess Hall - Spice Rack"
        ],
        [
          "addflag",
          "fort1_lootedspicerack"
        ]
      ]
    },
    "fort1_tentdoor1": {
      "start": [
        [
          "if",
          "hasflag(fort1_tentdoor1)"
        ],
        [
          "goto",
          "done"
        ],
        [
          "say",
          "You hear the sounds of several goblins snoring inside this tent."
        ],
        [
          "option",
          "fight",
          "Go in guns blazing [Fight]"
        ],
        [
          "if",
          "hasitem(fungusbomb)"
        ],
        [
          "option",
          "bomb",
          "Set off a fungicide bomb"
        ],
        [
          "option",
          "stayout",
          "Leave them alone"
        ]
      ],
      "bomb": [
        [
          "addflag",
          "fort1_tentdoor1"
        ],
        [
          "if",
          "gary"
        ],
        [
          "say",
          "You wait until Gary is looking the other way, sidling closer to the entrance as you whistle nonchalantly."
        ],
        [
          "say",
          "You press the cap on the fungus bomb, toss it into the tent, and hold the flaps closed until the popping and sizzling noises stop.  You should be safe in there now."
        ],
        [
          "addxp",
          "20"
        ],
        [
          "option",
          "done",
          "Head inside"
        ]
      ]
    },
    "fort1_tent1locker1": {
      "open": [
        [
          "markused"
        ],
        [
          "checklocation",
          "Fort Cowardice First Tent - Back-Left Footlocker"
        ],
        [
          "addstate",
          "returnscript,fort1_tent1locker1"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_army"
        ]
      ],
      "afterloot": []
    },
    "fort1_tent1locker2": {
      "open": [
        [
          "markused"
        ],
        [
          "checklocation",
          "Fort Cowardice First Tent - Front-Right Footlocker"
        ],
        [
          "addstate",
          "returnscript,fort1_tent1locker2"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_army"
        ]
      ],
      "afterloot": []
    },
    "fort1_tent1locker3": {
      "picklock": [
        [
          "markused"
        ],
        [
          "cls"
        ],
        [
          "playsound",
          "Player_Use_Lockpick"
        ],
        [
          "say",
          "You pick the lock!"
        ],
        [
          "removeitem",
          "needle"
        ],
        [
          "checklocation",
          "Fort Cowardice First Tent - Back-Right Footlocker"
        ],
        [
          "addstate",
          "returnscript,fort1_tent1locker3"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_army"
        ]
      ],
      "afterloot": []
    },
    "fort1_triangle": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You won the fight!  Go you!"
        ],
        [
          "addstate",
          "mult,1"
        ],
        [
          "if",
          "hasflag(fort1_2ndgoblin)==1"
        ],
        [
          "incstate",
          "mult,1"
        ],
        [
          "if",
          "hasflag(fort1_3rdgoblin)==1"
        ],
        [
          "incstate",
          "mult,1"
        ],
        [
          "addxp",
          "@xpreward_a@*$mult$"
        ],
        [
          "additem",
          "pickone(food_goblinsandwich,potion_goblinchicory,booze_goblinmescal)"
        ],
        [
          "if",
          "itemroll(10)"
        ],
        [
          "additem",
          "pickone(food_goblinsandwich,potion_goblinchicory,booze_goblinmescal)"
        ],
        [
          "if",
          "!hasflag(gotspyglasscheck)"
        ],
        [
          "checklocation",
          "Fort Cowardice Goblin Caves - First Victory"
        ],
        [
          "if",
          "hasflag(gotspyglasscheck)"
        ],
        [
          "addstate",
          "item1,pickone(pistol_goblin,pants_goblin,hat_goblin)"
        ],
        [
          "if",
          "hasflag(gotspyglasscheck)"
        ],
        [
          "addstate",
          "item2,pickone(pistol_goblin,pants_goblin,hat_goblin)"
        ],
        [
          "if",
          "hasflag(gotspyglasscheck) && itemroll(70)"
        ],
        [
          "additem",
          "$item1$"
        ],
        [
          "if",
          "hasflag(gotspyglasscheck) && itemroll(20)"
        ],
        [
          "additem",
          "$item2$"
        ],
        [
          "if",
          "!hasflag(gotspyglasscheck)"
        ],
        [
          "addflag",
          "gotspyglasscheck"
        ],
        [
          "incflag",
          "fort1_goblinwins,1"
        ],
        [
          "delflag",
          "fort1_2ndgoblin"
        ],
        [
          "delflag",
          "fort1_3rdgoblin"
        ],
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "fort2_bigpit": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You brush yourself off, collect your loot, and climb back out of the pit."
        ],
        [
          "incflag",
          "fort2_pitkills"
        ],
        [
          "addstate",
          "kills,@fort2_pitkills@"
        ],
        [
          "if",
          "$kills$>3 && !hasflag(fort2_gotgravehat)"
        ],
        [
          "checklocation",
          "Fort Alldead - Mass Grave Item"
        ],
        [
          "if",
          "$kills$>3 && !hasflag(fort2_gotgravehat)"
        ],
        [
          "addflag",
          "fort2_gotgravehat"
        ],
        [
          "if",
          "$kills$<=3 && itemroll(20) && !hasflag(fort2_gotgravehat)"
        ],
        [
          "addflag",
          "temphatflag"
        ],
        [
          "if",
          "hasflag(temphatflag)"
        ],
        [
          "checklocation",
          "Fort Alldead - Mass Grave Item"
        ],
        [
          "if",
          "hasflag(temphatflag)"
        ],
        [
          "addflag",
          "fort2_gotgravehat"
        ],
        [
          "if",
          "hasflag(temphatflag)"
        ],
        [
          "delflag",
          "temphatflag"
        ],
        [
          "additem",
          "pickone(booze_armywhiskey,combat_armyfirstaid,combat_bulletfire,combat_bulletpoison,combat_bulletsilver,food_instantgrits,food_hardtack,combat_smellingsalts,combat_canteen)"
        ],
        [
          "if",
          "$kills$>rand(2,4)"
        ],
        [
          "additem",
          "pickone(booze_armywhiskey,combat_armyfirstaid,combat_bulletfire,combat_bulletpoison,combat_bulletsilver,food_instantgrits,food_hardtack,combat_smellingsalts,combat_canteen)"
        ],
        [
          "if",
          "$kills$>9"
        ],
        [
          "addstate",
          "kills,9"
        ],
        [
          "addxp",
          "@xpreward_c@*$kills$"
        ],
        [
          "teleportplayer",
          "2870,70"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "fort2_cavpin": {
      "get": [
        [
          "markused"
        ],
        [
          "cls"
        ],
        [
          "checklocation",
          "Fort Alldead Privy - Bottom-Right Corner"
        ]
      ]
    },
    "fort2_footlocker1": {
      "open": [
        [
          "markused"
        ],
        [
          "addstate",
          "returnscript,fort2_footlocker1"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_army"
        ]
      ],
      "afterloot": []
    },
    "fort2_footlocker3": {
      "picklock": [
        [
          "markused"
        ],
        [
          "cls"
        ],
        [
          "playsound",
          "Player_Use_Lockpick"
        ],
        [
          "say",
          "You pick the lock!"
        ],
        [
          "addstate",
          "returnscript,fort2_footlocker3"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_army"
        ]
      ],
      "afterloot": []
    },
    "fort2_footlocker4": {
      "picklock": [
        [
          "markused"
        ],
        [
          "cls"
        ],
        [
          "playsound",
          "Player_Use_Lockpick"
        ],
        [
          "removeitem",
          "needle"
        ],
        [
          "say",
          "You pick the lock!"
        ],
        [
          "addstate",
          "returnscript,fort2_footlocker4"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_army"
        ]
      ],
      "afterloot": []
    },
    "fort2_footlocker6": {
      "picklock": [
        [
          "markused"
        ],
        [
          "cls"
        ],
        [
          "playsound",
          "Player_Use_Lockpick"
        ],
        [
          "removeitem",
          "needle"
        ],
        [
          "say",
          "You pick the lock, revealing the footlocker to be full of... human bones!"
        ],
        [
          "checklocation",
          "Fort Alldead Barracks - Bottom-Right Footlocker"
        ],
        [
          "exit"
        ]
      ]
    },
    "fort2_knapsack2": {
      "start": [
        [
          "if",
          "hasflag(fort2_knapsack)"
        ],
        [
          "goto",
          "alreadylooted"
        ],
        [
          "say",
          "You dig through the knapsack."
        ],
        [
          "checklocation",
          "Fort Alldead - Knapsack (Item 1)"
        ],
        [
          "goto",
          "tokencontinue"
        ]
      ],
      "node3": [
        [
          "checklocation",
          "Fort Alldead - Knapsack (Item 2)"
        ],
        [
          "say",
          "The last thing is a little diary, which you decide to leave in there in case the owner comes back looking for it."
        ],
        [
          "goto",
          "diaryoptions"
        ]
      ]
    },
    "fort2_toilet3": {
      "popup": [
        [
          "say",
          "It's a toilet."
        ],
        [
          "if",
          "hasflag(fort2_poisonidea)==1"
        ],
        [
          "say",
          "And the flusher is broken.  Yuck."
        ],
        [
          "else",
          ""
        ],
        [
          "say",
          "The flush handle is missing, though."
        ],
        [
          "option",
          "get",
          "Fish around in it"
        ]
      ],
      "get": [
        [
          "cls"
        ],
        [
          "say",
          "You grab the contents of the toilet, you sicko."
        ],
        [
          "if",
          "!hasflag(fort2_poisonidea)>=1"
        ],
        [
          "say",
          "Hey... This gave you an idea.  If the undead produce waste, maybe it can make them unundead."
        ],
        [
          "addflag",
          "fort2_poisonidea,2"
        ],
        [
          "checklocation",
          "Fort Alldead Privy - Broken Toilet"
        ]
      ]
    },
    "fort2_trashcan": {
      "e": [
        [
          "if",
          "player.stenchresist>=100"
        ],
        [
          "goto",
          "nope"
        ],
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "Oh good, a disgusting old hat."
        ],
        [
          "checklocation",
          "Fort Alldead - Trash Can"
        ]
      ]
    },
    "fort3_footlocker1": {
      "picklock": [
        [
          "markused"
        ],
        [
          "cls"
        ],
        [
          "playsound",
          "Player_Use_Lockpick"
        ],
        [
          "say",
          "You pick the lock!"
        ],
        [
          "removeitem",
          "needle"
        ],
        [
          "checklocation",
          "Fort Treason Barracks - Top-Left Footlocker"
        ],
        [
          "addstate",
          "returnscript,fort3_footlocker1"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_army"
        ]
      ],
      "afterloot": []
    },
    "fort3_footlocker2": {
      "open": [
        [
          "markused"
        ],
        [
          "addstate",
          "returnscript,fort3_footlocker2"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_army"
        ]
      ],
      "afterloot": []
    },
    "fort3_footlocker3": {
      "picklock": [
        [
          "markused"
        ],
        [
          "cls"
        ],
        [
          "playsound",
          "Player_Use_Lockpick"
        ],
        [
          "say",
          "You pick the lock!"
        ],
        [
          "removeitem",
          "needle"
        ],
        [
          "checklocation",
          "Fort Treason Barracks - Top-Right Footlocker (Item 1)"
        ],
        [
          "checklocation",
          "Fort Treason Barracks - Top-Right Footlocker (Item 2)"
        ],
        [
          "addstate",
          "returnscript,fort3_footlocker3"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_army"
        ]
      ],
      "afterloot": []
    },
    "fort3_footlocker4": {
      "open": [
        [
          "markused"
        ],
        [
          "checklocation",
          "Fort Treason Barracks - Bottom-Right Footlocker"
        ],
        [
          "addstate",
          "returnscript,fort3_footlocker4"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_army"
        ]
      ],
      "afterloot": []
    },
    "fort4_nastypile": {
      "inve": [
        [
          "addflag",
          "fort4_laundrypile"
        ],
        [
          "say",
          "You power through the stench and find a few non-garbage items in the pile."
        ],
        [
          "checklocation",
          "Fort Memoriam Barracks - Trash Pile"
        ]
      ]
    },
    "fort4_playgame": {
      "guns2": [
        [
          "leftsay",
          "Sure, thanks!"
        ],
        [
          "addflag",
          "fort4_gotguns"
        ],
        [
          "checklocation",
          "Fort Memoriam - All Battles Cleared"
        ],
        [
          "goto",
          "opts"
        ]
      ]
    },
    "fort4_rulebooks": {
      "study": [
        [
          "markused"
        ],
        [
          "say",
          "You pore over the rules until you understand them perfectly enough to realize that they're for an entirely different game than these guys are actually playing."
        ],
        [
          "say",
          "Oh well.  At least you learned something... useful..."
        ],
        [
          "addxp",
          "@xpreward_f@"
        ],
        [
          "say",
          "As you're about to walk away from the shelf, you notice a book that definitely doesn't belong here..."
        ],
        [
          "checklocation",
          "Fort Memoriam Barracks - Bookshelf"
        ],
        [
          "option",
          "done",
          "Oh"
        ]
      ]
    },
    "fort4_snackshelf": {
      "e": [
        [
          "markused"
        ],
        [
          "cls"
        ],
        [
          "checklocation",
          "Fort Memoriam - Candy Shelf"
        ]
      ]
    },
    "fort4_spittoon": {
      "five": [
        [
          "say",
          "With a fanfare of sad trombones and a choir of angels retching, a sword rises out of the spittoon, held aloft by a wet, bedraggled, and miserable-looking woman's arm. Since you're already kneeling, the arm wastes no time before tapping you on both shoulders with the sword, splashing your clothes with yellow slime and officially declaring you @firstname@ @lastname@, @King@ of Filth. Congratulations. The sword clatters on the floor as the hand drops it with a shudder and withdraws into the spittoon."
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "Fort Memoriam Barracks - Spittoon"
        ],
        [
          "incflag",
          "spittoonsopen"
        ],
        [
          "option",
          "done",
          "Long live the @king@!"
        ]
      ]
    },
    "fort5_generaldesk": {
      "inv": [
        [
          "cls"
        ],
        [
          "say",
          "The desk is basically empty, but you do find an old medal discarded in one of the drawers."
        ],
        [
          "checklocation",
          "Fort Unnecessary - Administration Desk"
        ],
        [
          "addflag",
          "fort5_generaldesk"
        ]
      ]
    },
    "fort5_timerift": {
      "grab": [
        [
          "addflag",
          "fort5_rift"
        ],
        [
          "say",
          "You snatch the rectangle, and the view through the window is replaced with static."
        ],
        [
          "checklocation",
          "Fort Unnecessary - Time Portal"
        ],
        [
          "say",
          "Wow, this is a <i>nice</i> rectangle!"
        ],
        [
          "option",
          "done",
          "Strange"
        ]
      ]
    },
    "fort6_bookshelf": {
      "get": [
        [
          "cls"
        ],
        [
          "checklocation",
          "Fort of Darkness (Fifth Tent) - Bookcase"
        ],
        [
          "addflag",
          "fort6_bookshelf"
        ]
      ]
    },
    "fort6_collector": {
      "trueopts": [
        [
          "if",
          "hasflag(roybean_quest)==5 && !hasitem(quest_jellybeans3) && !hasstate(beans)"
        ],
        [
          "sayoption",
          "jellybeans",
          "You seen any jelly beans?"
        ],
        [
          "if",
          "hasflag(roybean_quest)==5 && hasflag(fort6_knowslounge)==1 && !hasstate(lounge)"
        ],
        [
          "sayoption",
          "lounge",
          "Do you know anything about a lounge?"
        ],
        [
          "if",
          "hasitem(bone)>=10 && !fortofdarkness_gotbonetradecheck"
        ],
        [
          "option",
          "bones",
          "Give her some bones [10 bones]"
        ],
        [
          "if",
          "hasitem(bone)<10 && !fortofdarkness_gotbonetradecheck"
        ],
        [
          "grayoption",
          "phones",
          "Give her some bones [Requires 10 bones]"
        ],
        [
          "if",
          "hasitem(skullchips)>=5 && !fortofdarkness_gotchiptradecheck"
        ],
        [
          "option",
          "chips",
          "Give her some skull chips [5 of them]"
        ],
        [
          "if",
          "hasitem(skullchips)<5 && !fortofdarkness_gotchiptradecheck"
        ],
        [
          "grayoption",
          "shmips",
          "Give her some skull chips [Requires 5 skull chips]"
        ],
        [
          "if",
          "hasitem(sell_goldtooth)>=10 && !fortofdarkness_got10teethcheck"
        ],
        [
          "option",
          "teeth",
          "Give her some gold teeth [10 gold teeth]"
        ],
        [
          "if",
          "hasitem(sell_goldtooth)<10 && !fortofdarkness_got10teethcheck"
        ],
        [
          "grayoption",
          "teeth",
          "Give her some gold teeth [Requires 10 gold teeth]"
        ],
        [
          "if",
          "hasitem(sell_goldtooth)>=23 && !fortofdarkness_got23teethcheck"
        ],
        [
          "option",
          "teeth2",
          "Give her a LOT of gold teeth [23 gold teeth]"
        ],
        [
          "option",
          "done",
          "Leave her to her hallucinations"
        ]
      ],
      "chips": [
        [
          "say",
          "You hand her some bone chips, and she stops muttering. Her eyes seem to focus a little, and she takes some glue out of her toolbox and presses the chips into a ring."
        ],
        [
          "removeitem",
          "skullchips,5"
        ],
        [
          "checklocation",
          "Fort of Darkness (Second Tent) - Bone Trader (Chips)"
        ],
        [
          "addflag",
          "fortofdarkness_gotchiptradecheck"
        ],
        [
          "say",
          "As soon as she gives the ring to you, though, she's back to her muttering."
        ],
        [
          "sayoption",
          "opts",
          "Nice, thank you!"
        ]
      ],
      "teeth": [
        [
          "say",
          "She blinks at the gold teeth you handed her, and takes a spool of wire out of her toolbox. Soon she presents you with an elaborate tiara. \"Not enough,\" she mutters sadly. \"Not nearly enough...\""
        ],
        [
          "removeitem",
          "sell_goldtooth,10"
        ],
        [
          "checklocation",
          "Fort of Darkness (Second Tent) - Bone Trader (10 Gold Teeth)"
        ],
        [
          "addflag",
          "fortofdarkness_got10teethcheck"
        ],
        [
          "sayoption",
          "opts",
          "Huh? Well, thanks!"
        ]
      ],
      "teeth2": [
        [
          "say",
          "You give her almost a whole mouth's worth of gold teeth, and she draws a long, slow breath. \"So many,\" she whispers, and she seems to see you for the first time. She looks you up and down, then takes a piece of string out of her pocket and uses it to measure your head."
        ],
        [
          "say",
          "She picks some more bones out of those scattered on the floor -- ribs, finger bones, fragments of skull, more teeth -- and carefully sorts them on her workbench. You can't really see what happens after that, because you'd have to actually look over her shoulder, and it seems like a bad idea to disturb her."
        ],
        [
          "say",
          "After a time, she turns back around, holding a beautiful, ornate crown of bone, ivory, and gold. \"Thank you,\" she whispers as she hands it to you."
        ],
        [
          "removeitem",
          "sell_goldtooth,23"
        ],
        [
          "checklocation",
          "Fort of Darkness (Second Tent) - Bone Trader (23 Gold Teeth)"
        ],
        [
          "addflag",
          "fortofdarkness_got23teethcheck"
        ],
        [
          "sayoption",
          "opts",
          "Wow..."
        ]
      ],
      "bones": [
        [
          "say",
          "You hand her an armload of bones, and she starts mechanically picking through them, selecting some and discarding others based on criteria you can't discern."
        ],
        [
          "say",
          "Eventually, having chosen the best two from the pile, she secures them together with wire and screws and hands you something that basically looks like a sword."
        ],
        [
          "removeitem",
          "bone,10"
        ],
        [
          "checklocation",
          "Fort of Darkness (Second Tent) - Bone Trader (Bones)"
        ],
        [
          "addflag",
          "fortofdarkness_gotbonetradecheck"
        ],
        [
          "sayoption",
          "opts",
          "Neat! Thanks!"
        ]
      ]
    },
    "fort6_crate1": {
      "open": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "addstate",
          "returnscript,fort6_crate1"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_army"
        ]
      ],
      "afterloot": []
    },
    "fort6_crate2": {
      "open": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "addstate",
          "returnscript,fort6_crate2"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_army"
        ]
      ],
      "afterloot": []
    },
    "fort6_crate3": {
      "open": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "addstate",
          "returnscript,fort6_crate3"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_army"
        ]
      ],
      "afterloot": []
    },
    "fort6_mushlady": {
      "intro2": [
        [
          "leftspeak",
          "$lastoption$"
        ],
        [
          "rightsay",
          "Uh-huh! They're good for all kinds of things, if you know which ones to pick! If you want, I can sell you a few of my favorites!"
        ],
        [
          "rightsay",
          "I have a spare pair of mushroom pliers too, if you want to pick your own."
        ],
        [
          "sayoption",
          "optstemp",
          "Okay, cool."
        ]
      ],
      "opts": [
        [
          "if",
          "hasflag(roybean_quest)==5 && !hasitem(quest_jellybeans3) && !hasflag(fort6_knowslounge)"
        ],
        [
          "sayoption",
          "jellybeans",
          "You seen any jelly beans?"
        ],
        [
          "if",
          "hasflag(roybean_quest)==5 && hasflag(fort6_knowslounge)==1 && !hasstate(lounge)"
        ],
        [
          "sayoption",
          "lounge",
          "Where did you say your lounge was?"
        ],
        [
          "if",
          "!hasflag(fortofdarkness_gotplierscheck)"
        ],
        [
          "rightsay",
          "Would you like to buy a mushroom? Or a pair of mushroom pliers?"
        ],
        [
          "else",
          ""
        ],
        [
          "rightsay",
          "Would you like to buy a mushroom? This batch is extra groovy!"
        ],
        [
          "if",
          "meat>=1000"
        ],
        [
          "option",
          "buyshroom",
          "Buy a mushroom [1,000 Meat]"
        ],
        [
          "else",
          ""
        ],
        [
          "grayoption",
          "buyshwoop",
          "Buy a mushroom [1,000 Meat]"
        ],
        [
          "if",
          "hasskill(dickerin)>=3 && !hasflag(fort6_dickered)"
        ],
        [
          "sayoption",
          "dicker",
          "How about a free mushroom? [Dickerin' 3]"
        ],
        [
          "else",
          ""
        ],
        [
          "if",
          "hasskill(dickerin) && !hasflag(fort6_dickered)"
        ],
        [
          "graysayoption",
          "cityslicker",
          "How about a free mushroom? [Requires Dickerin' 3]"
        ],
        [
          "if",
          "hasflag(fortofdarkness_gotplierscheck)"
        ],
        [
          "goto",
          "finishopts"
        ],
        [
          "if",
          "meat>=500 && !fortofdarkness_gotplierscheck"
        ],
        [
          "option",
          "buypliers",
          "Buy the pliers [500 Meat]"
        ],
        [
          "if",
          "meat<500 && !fortofdarkness_gotplierscheck"
        ],
        [
          "grayoption",
          "buyplovers",
          "Buy the pliers [Requires 500 Meat]"
        ],
        [
          "goto",
          "finishopts"
        ]
      ],
      "dicker": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftspeak",
          "$lastoption$"
        ],
        [
          "rightspeak",
          "Well, I guess... I suppose they're ultimately free, after all.  Sure.  One won't hurt.  Plus, what do I even need Meat for?"
        ],
        [
          "addflag",
          "fort6_dickered"
        ],
        [
          "checklocation",
          "Fort of Darkness (First Tent) - Free Mushroom"
        ],
        [
          "if",
          "!hasskill(kurtzmox)"
        ],
        [
          "playsound",
          "UI_Level_Up"
        ],
        [
          "if",
          "!hasskill(kurtzmox)"
        ],
        [
          "addskill",
          "kurtzmox"
        ],
        [
          "sayoption",
          "optstemp",
          "Exactly."
        ]
      ],
      "buypliers": [
        [
          "addmeat",
          "-500"
        ],
        [
          "checklocation",
          "Fort of Darkness (First Tent) - Irene's Pliers"
        ],
        [
          "addflag",
          "fortofdarkness_gotplierscheck"
        ],
        [
          "rightsay",
          "Here you go! I'd share the location of my secret mushroom hunting cave with you, but I lost my knapsack with my map in it, and I don't think I could explain how to get there just in, like, words. Good luck, though!"
        ],
        [
          "sayoption",
          "done",
          "Thanks!"
        ]
      ]
    },
    "fort6_ratskeleton": {
      "get": [
        [
          "cls"
        ],
        [
          "say",
          "You stuff the packrat skeleton in your bag. The lady is too preoccupied with the contents of her head to notice."
        ],
        [
          "checklocation",
          "Fort of Darkness (Second Tent) - Animal Skeleton"
        ],
        [
          "markused"
        ]
      ]
    },
    "fort6_safe": {
      "crack": [
        [
          "cls"
        ],
        [
          "playsound",
          "opensafe"
        ],
        [
          "say",
          "Aha.  Turns out it was only a single gun.  It's a nice one, though!"
        ],
        [
          "checklocation",
          "Fort of Darkness (Fifth Tent) - Gun Safe"
        ],
        [
          "markused"
        ]
      ]
    },
    "fort6_timerift": {
      "grab": [
        [
          "addflag",
          "fort6_rift"
        ],
        [
          "say",
          "You grab the man's shoes, which makes him giggle even louder."
        ],
        [
          "say",
          "As soon as the shoes pass through the window, it snaps to static."
        ],
        [
          "checklocation",
          "Fort of Darkness - Temporal Rift"
        ],
        [
          "option",
          "done",
          "Strange"
        ]
      ]
    },
    "fort7_rentaldude": {
      "start": [
        [
          "say",
          "Looks like this is where you go to rent a mule. Just judging from the sign, you know."
        ],
        [
          "rightportrait",
          "rentaldude"
        ],
        [
          "rightsay",
          "Howdy, welcome to Alamo Rent-a-Mule. How can I help you?"
        ],
        [
          "if",
          "hasflag(fort5_knowsaboutmule) && !hasflag(fort5_privatebowlegs) && !fort7_gotmulecontractcheck"
        ],
        [
          "sayoption",
          "rent",
          "I'd like to rent a mule."
        ],
        [
          "else",
          ""
        ],
        [
          "sayoption",
          "no",
          "I'd like to rent a mule."
        ],
        [
          "sayoption",
          "done",
          "You can't, never mind."
        ]
      ],
      "buy": [
        [
          "rightsay",
          "Great! Here's your contract-slash-certificate of title."
        ],
        [
          "addmeat",
          "-1500"
        ],
        [
          "checklocation",
          "Alamo Rent-A-Mule - Rented a Mule"
        ],
        [
          "addflag",
          "fort7_gotmulecontractcheck"
        ],
        [
          "leftsay",
          "Thanks, I guess. Can you have to mule delivered to Fort Unnecessary, to the south?"
        ],
        [
          "rightsay",
          "No problem! Thanks for choosing Alamo Rent-a-Mule, and please remember us for all your future mule needs!"
        ],
        [
          "sayoption",
          "done",
          "Yeah, sure."
        ]
      ]
    },
    "frisco_flyer": {
      "e": [
        [
          "markused"
        ],
        [
          "cls"
        ],
        [
          "checklocation",
          "Frisco - Flier on the Street"
        ]
      ]
    },
    "geocave_rock": {
      "giverock": [
        [
          "checklocation",
          "Old Cave - Weird Rock"
        ],
        [
          "addflag",
          "geologistquest,6"
        ],
        [
          "option",
          "done",
          "Okay!"
        ]
      ]
    },
    "geologist_bench2": {
      "fix": [
        [
          "leftspeak",
          "$lastoption$"
        ],
        [
          "rightspeak",
          "Oh yeah?"
        ],
        [
          "leftspeak",
          "Sure!  Just gotta hook this wire up to this spring, twist this flange a little, and Bob's yer uncle."
        ],
        [
          "rightspeak",
          "Oh, huh! Clever! Well, I'm still not interested in them. You can keep them if you want."
        ],
        [
          "checklocation",
          "Dr. Morton's House - Workbench"
        ],
        [
          "addflag",
          "geologist_boots"
        ],
        [
          "sayoption",
          "done",
          "Thanks!"
        ]
      ]
    },
    "geologist_josiequarry": {
      "quest11b": [
        [
          "leftspeak",
          "$lastoption$"
        ],
        [
          "addflag",
          "geologistquest,12"
        ],
        [
          "rightspeak",
          "I'll be giving you an assistant credit when I publish, of course. I'd like to give you a more material reward, but I spent most of the grant money on the drilling rig..."
        ],
        [
          "rightsay",
          "Oh, how about this? I don't need this hexitite sample any more. Maybe you could wear it as a hat?"
        ],
        [
          "checklocation",
          "Morton's Quarry - Dr. Morton's Quest Completion"
        ],
        [
          "sayoption",
          "done",
          "Thanks!"
        ]
      ]
    },
    "geologist_prizehole": {
      "e": [
        [
          "cls"
        ],
        [
          "say",
          "Ooh, it's an especially shiny rock!"
        ],
        [
          "addflag",
          "geologist_gotgem"
        ],
        [
          "checklocation",
          "Morton's Quarry (Tiny Diverticulum) - Hex Puzzle"
        ]
      ]
    },
    "ghosttown1_cactusa": {
      "good": [
        [
          "cls"
        ],
        [
          "say",
          "You manage to snag the pencil with the corner of your temporary visitor permit and yank it out of the cactus. Nice!"
        ],
        [
          "say",
          "Oh, wait... this is a number <i>4</i> pencil."
        ],
        [
          "checklocation",
          "Ghostwood - Ghost Cactus"
        ],
        [
          "markused"
        ]
      ]
    },
    "ghosttown1_knock1": {
      "permit9": [
        [
          "leftsay",
          "$lastoption$"
        ],
        [
          "rightsay",
          "Sure do! That thing pops the tops off beer bottles like you wouldn't believe!"
        ],
        [
          "leftsay",
          "So long as it removes staples, I'll be happy."
        ],
        [
          "rightsay",
          "I imagine it does, but I'm afraid I'm not authorized for unstapling. You'll have to take it back over to Records. Here y'are."
        ],
        [
          "if",
          "hasflag(ghostwood_gotunstaplercheck)"
        ],
        [
          "additem",
          "quest_unstapler"
        ],
        [
          "else",
          ""
        ],
        [
          "checklocation",
          "Ghostwood Salooooon - Staple Remover"
        ],
        [
          "if",
          "!hasflag(ghostwood_gotunstaplercheck)"
        ],
        [
          "addflag",
          "ghostwood_gotunstaplercheck"
        ],
        [
          "addflag",
          "ghosttown1_unstapler,1"
        ],
        [
          "addflag",
          "ghosttown1_permit,10"
        ],
        [
          "sayoption",
          "done",
          "Great."
        ]
      ],
      "ordere": [
        [
          "addmeat",
          "-1000"
        ],
        [
          "rightsay",
          "There ya go! Don't drink it all in one place!"
        ],
        [
          "checklocation",
          "Ghostwood Salooooon - Whiskey Bottle"
        ],
        [
          "addflag",
          "ghosttown1_boughtbottle,1"
        ],
        [
          "sayoption",
          "done",
          "Thanks."
        ]
      ]
    },
    "ghosttown1_knock2": {
      "welcome": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "Knock, knock."
        ],
        [
          "rightportrait",
          "ghost2"
        ],
        [
          "rightsay",
          "Department of Records. How can I help you, @mr@ @idlastname@?"
        ],
        [
          "if",
          "hasflag(breadwood_quest4)==1 && !hasflag(ghosttown1_permit)"
        ],
        [
          "sayoption",
          "permit0",
          "I'm here on behalf of the mayor of Breadwood. He needs a permit..."
        ],
        [
          "if",
          "hasflag(ghosttown1_permit)==1"
        ],
        [
          "sayoption",
          "permit1",
          "I'm supposed to pick up a file on the town of Breadwood."
        ],
        [
          "if",
          "hasflag(ghosttown1_permit)==5 && hasitem(quest_loggingrep)"
        ],
        [
          "sayoption",
          "permit5",
          "Okay, I'm back with those papers."
        ],
        [
          "if",
          "hasflag(ghosttown1_permit)==8"
        ],
        [
          "sayoption",
          "permit8",
          "I need some papers unstapled."
        ],
        [
          "if",
          "hasflag(ghosttown1_permit)==10 && hasitem(quest_unstapler)"
        ],
        [
          "sayoption",
          "permit10",
          "Here's your staple remover back."
        ],
        [
          "if",
          "hasflag(ghosttown1_beeropen)==1"
        ],
        [
          "sayoption",
          "beeropen",
          "The Department of Libations needs to borrow your staple remover..."
        ],
        [
          "sayoption",
          "done",
          "Umm... I can't think of anything."
        ]
      ],
      "permit5": [
        [
          "leftsay",
          "$lastoption$"
        ],
        [
          "removeitem",
          "quest_loggingrep"
        ],
        [
          "rightsay",
          "All right, let me just put those in an official Inter-Department Document Transfer Folder for you... there you are."
        ],
        [
          "checklocation",
          "Ghostwood Stable - Got IDDTF"
        ],
        [
          "addflag",
          "ghosttown1_permit,6"
        ],
        [
          "sayoption",
          "done",
          "Great, thank you."
        ]
      ],
      "beeropen": [
        [
          "leftsay",
          "The Department of Libations needs to borrow your staple remover again."
        ],
        [
          "rightsay",
          "All right. I don't get much use out of it since we took Adjunct Records' stapler away anyway."
        ],
        [
          "if",
          "hasflag(ghostwood_gotunstaplercheck)"
        ],
        [
          "additem",
          "quest_unstapler"
        ],
        [
          "else",
          ""
        ],
        [
          "checklocation",
          "Ghostwood Salooooon - Staple Remover"
        ],
        [
          "addflag",
          "ghosttown1_beeropen,2"
        ],
        [
          "sayoption",
          "done",
          "Thanks."
        ]
      ]
    },
    "ghosttown1_knock3": {
      "welcome": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "Knock, knock."
        ],
        [
          "rightportrait",
          "ghost3"
        ],
        [
          "rightsay",
          "@mr@ ...@idlastname@, was it? What can I do for you?"
        ],
        [
          "if",
          "hasflag(breadwood_quest4)==1 && !hasflag(ghosttown1_permit)"
        ],
        [
          "sayoption",
          "permit0",
          "I'm here on behalf of the mayor of Breadwood. He needs a permit..."
        ],
        [
          "if",
          "hasflag(ghosttown1_permit)==1"
        ],
        [
          "sayoption",
          "permit1",
          "I'm supposed to pick up a file on the town of Breadwood."
        ],
        [
          "if",
          "hasflag(ghosttown1_permit)==2"
        ],
        [
          "sayoption",
          "permit2",
          "The Department of Records sent me over here to pick up a file."
        ],
        [
          "if",
          "hasflag(ghosttown1_permit)==4 && hasitem(quest_stapler)"
        ],
        [
          "sayoption",
          "permit4",
          "Okay, I got you a stapler."
        ],
        [
          "if",
          "hasflag(ghosttown1_permit)==7"
        ],
        [
          "sayoption",
          "permit7",
          "Administration wants you to unstaple these papers."
        ],
        [
          "sayoption",
          "done",
          "Umm... nothing, I guess."
        ]
      ],
      "permit4": [
        [
          "leftsay",
          "$lastoption$"
        ],
        [
          "rightsay",
          "Great! Ahh, there's nothing better than that new stapler smell."
        ],
        [
          "removeitem",
          "quest_stapler"
        ],
        [
          "leftsay",
          "Can I have that logging report now?"
        ],
        [
          "rightsay",
          "You bet! <i>Kerchunk!</i> Here you go, freshly-stapled and wind-resistant!"
        ],
        [
          "checklocation",
          "Ghostwood Jail - Stapled Report"
        ],
        [
          "addflag",
          "ghosttown1_permit,5"
        ],
        [
          "sayoption",
          "done",
          "Thanks."
        ]
      ]
    },
    "ghosttown1_knock4": {
      "permit3i": [
        [
          "rightsay",
          "I'm sorry @maam@, that's the wrong answer.  I'm afraid I can't approve this requisition.  I can, however, provide you with <i>this</i>."
        ],
        [
          "leftsay",
          "What is <i>that</i>?"
        ],
        [
          "say",
          "He shrugs."
        ],
        [
          "checklocation",
          "Ghostwood Office Supply - Stapler"
        ],
        [
          "addflag",
          "ghosttown1_permit,4"
        ],
        [
          "sayoption",
          "done",
          "Great, thanks."
        ]
      ]
    },
    "ghosttown1_knock5": {
      "start": [
        [
          "if",
          "!hasflag(ghosttown1_metthall)"
        ],
        [
          "goto",
          "first"
        ],
        [
          "if",
          "hasflag(ghostwood_gotidcheck) && hasitem(quest_g1visitorid)"
        ],
        [
          "goto",
          "welcome"
        ],
        [
          "if",
          "hasflag(ghosttown1_retrypermit) && !hasflag(ghostwood_gotidcheck)"
        ],
        [
          "goto",
          "realpermitretry"
        ],
        [
          "if",
          "hasitem(quest_3pencil) && hasflag(ghostwood_gottemppermitcheck) && !hasflag(ghostwood_gotidcheck)"
        ],
        [
          "goto",
          "realpermit"
        ],
        [
          "if",
          "hasitem(quest_4pencil)"
        ],
        [
          "goto",
          "4pencil"
        ],
        [
          "if",
          "hasitem(quest_g1tempvisit) && !hasflag(ghosttown1_tempexpired)"
        ],
        [
          "goto",
          "hitempexp"
        ],
        [
          "if",
          "hasitem(quest_g1tempvisit) && hasflag(ghosttown1_tempexpired)"
        ],
        [
          "goto",
          "newtemp"
        ],
        [
          "if",
          "hasflag(ghosttown1_tempretry)"
        ],
        [
          "goto",
          "tempretry"
        ],
        [
          "if",
          "hasflag(ghosttown1_nopencil)"
        ],
        [
          "goto",
          "nopencil"
        ],
        [
          "if",
          "!hasitem(quest_g1visitorid) && !hasitem(quest_g1tempvisit)"
        ],
        [
          "goto",
          "second"
        ],
        [
          "say",
          "no result"
        ],
        [
          "option",
          "done",
          "oops"
        ]
      ],
      "hitempexp2": [
        [
          "leftsay",
          "...Yes."
        ],
        [
          "rightsay",
          "Unfortunately I can't accept an expired pass."
        ],
        [
          "leftsay",
          "Can I get a new one?"
        ],
        [
          "rightsay",
          "No."
        ],
        [
          "leftsay",
          "..."
        ],
        [
          "addflag",
          "ghostwood_askedaboutexpiredpass"
        ],
        [
          "option",
          "done",
          "Better go find that pencil"
        ]
      ],
      "newtemp": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "My visitor pass expired. Can I have another one?"
        ],
        [
          "rightportrait",
          "ghost5"
        ],
        [
          "rightsay",
          "Sorry @sir@, only one pass per visitor. I'd be glad to help you apply for a full visitor ID, though."
        ],
        [
          "leftsay",
          "But I still don't have a pencil."
        ],
        [
          "rightsay",
          "..."
        ],
        [
          "leftsay",
          "..."
        ],
        [
          "addflag",
          "ghostwood_askedaboutexpiredpass"
        ],
        [
          "option",
          "done",
          "Better go find that pencil"
        ]
      ],
      "temppermit6b": [
        [
          "leftsay",
          "$lastoption$"
        ],
        [
          "rightsay",
          "Correct. All right, everything seems to be in order. Here's your temporary visitor pass."
        ],
        [
          "checklocation",
          "Ghostwood Town Hall - Issued Permit"
        ],
        [
          "addflag",
          "ghostwood_gottemppermitcheck"
        ],
        [
          "addflag",
          "ghosttown1_tempretry,0"
        ],
        [
          "addflag",
          "ghosttown1_tempexpired,0"
        ],
        [
          "leftsay",
          "Thanks."
        ],
        [
          "rightsay",
          "It expires in eleven seconds."
        ],
        [
          "sayoption",
          "done",
          "..."
        ]
      ],
      "realpermit7a": [
        [
          "leftsay",
          "$lastoption$"
        ],
        [
          "rightsay",
          "Correct. All right, everything seems to be in order. Allow me to officially welcome you to the town of Ghostwood. Here's your visitor ID."
        ],
        [
          "checklocation",
          "Ghostwood Town Hall - Issued ID"
        ],
        [
          "removeitem",
          "quest_g1tempvisit"
        ],
        [
          "addflag",
          "ghostwood_gotidcheck"
        ],
        [
          "leftsay",
          "Thank you. Say, was it always called Ghostwood, or..."
        ],
        [
          "rightsay",
          "Yes. Total coincidence."
        ],
        [
          "sayoption",
          "done",
          "Huh."
        ]
      ],
      "permit11k": [
        [
          "say",
          "<i>Scribble</i>"
        ],
        [
          "rightsay",
          "Good. Now, just take this back to the mayor of Breadwood, and have him sign on this line here, and initial over here."
        ],
        [
          "checklocation",
          "Ghostwood Town Hall - The Final Form"
        ],
        [
          "addflag",
          "ghosttown1_permit,13"
        ],
        [
          "leftsay",
          "Are you kidding me?"
        ],
        [
          "rightsay",
          "I don't know how to do that."
        ],
        [
          "sayoption",
          "done",
          "Uggggh."
        ]
      ],
      "permit15": [
        [
          "leftsay",
          "$lastoption$"
        ],
        [
          "if",
          "hasflag(ghosttown1_permittime)>@day@"
        ],
        [
          "goto",
          "permit15b"
        ],
        [
          "rightsay",
          "Let me look... ah yes, here it is. And there you are."
        ],
        [
          "checklocation",
          "Ghostwood Town Hall - Permit Finally Processed"
        ],
        [
          "addflag",
          "ghosttown1_permit,16"
        ],
        [
          "leftsay",
          "I don't have to sign anything to collect it?"
        ],
        [
          "rightsay",
          "Nope."
        ],
        [
          "leftsay",
          "Are you sure?"
        ],
        [
          "rightsay",
          "No @sir@. That's it."
        ],
        [
          "sayoption",
          "done",
          "Holy crap."
        ]
      ]
    },
    "ghosttown1_sharpen": {
      "4pencil": [
        [
          "cls"
        ],
        [
          "say",
          "You stick the #4 pencil into the sharpener and grind off about a quarter of it."
        ],
        [
          "removeitem",
          "quest_4pencil"
        ],
        [
          "checklocation",
          "Ghostwood - Sharpened Pencil"
        ]
      ]
    },
    "goblin1_destroyedcrate": {
      "e": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "You very, very slowly gather up the dynamite in the crate."
        ],
        [
          "checklocation",
          "Gustavson Gulch Destroyed - Dynamite Crate"
        ]
      ]
    },
    "goblin1_house3": {
      "goin2": [
        [
          "say",
          "You enter what turns out to be a delicatessen, and help yourself to what turn out to be sandwiches. Probably."
        ],
        [
          "checklocation",
          "Gustavson Gulch - Deli Hut"
        ],
        [
          "addflag",
          "goblin1_house3"
        ],
        [
          "option",
          "done",
          "Nice"
        ]
      ]
    },
    "goblin1_house4": {
      "menu": [
        [
          "if",
          "hasflag(goblin1_sparekeyloc) && !hasflag(goblin1_gotsparekey)"
        ],
        [
          "option",
          "getkey",
          "Look in drawer #69105"
        ],
        [
          "option",
          "rand1",
          "Look in a random drawer"
        ],
        [
          "option",
          "rand1",
          "Look in a more random drawer"
        ],
        [
          "option",
          "rand1",
          "Look in an even randomer drawer"
        ],
        [
          "option",
          "done",
          "Stop looking"
        ]
      ],
      "rand1": [
        [
          "incflag",
          "goblin1_drawergrabs"
        ],
        [
          "if",
          "hasflag(goblin1_drawergrabs)==1"
        ],
        [
          "say",
          "There's nothing in the drawer, but you find an old lollipop stuck to the bottom of the drawer above it."
        ],
        [
          "if",
          "hasflag(goblin1_drawergrabs)==1"
        ],
        [
          "checklocation",
          "Gustavson Gulch Storage Hut - Random Item"
        ],
        [
          "if",
          "hasflag(goblin1_drawergrabs)==2"
        ],
        [
          "say",
          "This drawer has a sandwich in it.  It must've been filed under sandwich."
        ],
        [
          "if",
          "hasflag(goblin1_drawergrabs)==2"
        ],
        [
          "checklocation",
          "Gustavson Gulch Storage Hut - More Random Item"
        ],
        [
          "if",
          "hasflag(goblin1_drawergrabs)==3"
        ],
        [
          "say",
          "This one contains a rolled-up pair of terrible pants."
        ],
        [
          "if",
          "hasflag(goblin1_drawergrabs)==3"
        ],
        [
          "checklocation",
          "Gustavson Gulch Storage Hut - Even Randomer Item"
        ],
        [
          "if",
          "hasflag(goblin1_drawergrabs)==4"
        ],
        [
          "say",
          "You don't find anything else interesting."
        ],
        [
          "if",
          "hasflag(goblin1_drawergrabs)==5"
        ],
        [
          "say",
          "Still nothing."
        ],
        [
          "if",
          "hasflag(goblin1_drawergrabs)==6"
        ],
        [
          "say",
          "Still nothing."
        ],
        [
          "if",
          "hasflag(goblin1_drawergrabs)==7"
        ],
        [
          "say",
          "Still nothing."
        ],
        [
          "if",
          "hasflag(goblin1_drawergrabs)==8"
        ],
        [
          "say",
          "Still nothing."
        ],
        [
          "if",
          "hasflag(goblin1_drawergrabs)==9"
        ],
        [
          "say",
          "Wait, what's this?  Nope, nothing, false alarm."
        ],
        [
          "if",
          "hasflag(goblin1_drawergrabs)==10"
        ],
        [
          "say",
          "Still nothing."
        ],
        [
          "if",
          "hasflag(goblin1_drawergrabs)==11"
        ],
        [
          "say",
          "Still nothing."
        ],
        [
          "if",
          "hasflag(goblin1_drawergrabs)==12"
        ],
        [
          "say",
          "Still nothing."
        ],
        [
          "if",
          "hasflag(goblin1_drawergrabs)==13"
        ],
        [
          "say",
          "Still nothing."
        ],
        [
          "if",
          "hasflag(goblin1_drawergrabs)==14"
        ],
        [
          "say",
          "Still nothing."
        ],
        [
          "if",
          "hasflag(goblin1_drawergrabs)==15"
        ],
        [
          "say",
          "Eureka!"
        ],
        [
          "if",
          "hasflag(goblin1_drawergrabs)==15"
        ],
        [
          "checklocation",
          "Gustavson Gulch Storage Hut - Randomest Item (Eureka)"
        ],
        [
          "if",
          "hasflag(goblin1_drawergrabs)==15"
        ],
        [
          "say",
          "That's definitely the last one."
        ],
        [
          "if",
          "hasflag(goblin1_drawergrabs)>15"
        ],
        [
          "say",
          "I mean it.  There's nothing left in here."
        ],
        [
          "option",
          "menu",
          "Keep looking"
        ],
        [
          "option",
          "done",
          "Quit looking"
        ]
      ],
      "getkey": [
        [
          "checklocation",
          "Gustavson Gulch Storage Hut - Secret Item"
        ],
        [
          "addflag",
          "goblin1_gotsparekey"
        ],
        [
          "option",
          "menu",
          "Keep digging around"
        ],
        [
          "option",
          "done",
          "Leave"
        ]
      ]
    },
    "goblin1_house7": {
      "start": [
        [
          "if",
          "hasflag(goblin1_house7)"
        ],
        [
          "goto",
          "alreadydone"
        ],
        [
          "if",
          "hasflag(goblin1_secret1)"
        ],
        [
          "goto",
          "alreadylistened"
        ],
        [
          "if",
          "hasskill(goblintongue)"
        ],
        [
          "goto",
          "speakstart"
        ],
        [
          "say",
          "You hear some dramatic-sounding nonsense through the door."
        ],
        [
          "option",
          "fight",
          "You want some drama [Fight]"
        ],
        [
          "option",
          "done",
          "You don't want no drama"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You close the curtains on the goblin's final performance."
        ],
        [
          "addxp",
          "xpreward_b"
        ],
        [
          "checklocation",
          "Gustavson Gulch - Theatre Combat"
        ],
        [
          "addflag",
          "goblin1_house7"
        ],
        [
          "addstate",
          "winbutton,The rest... is silence."
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ],
      "speakstart": [
        [
          "say",
          "You press your ear to the door and hear somebody delivering what sound like lines from Hamlet, except in Goblintongue."
        ],
        [
          "say",
          "From this vantage point, you also notice a sign next to the door reading \"Backstage Entrance Here It Being!\" with an arrow pointing to the back of the building."
        ],
        [
          "option",
          "fight",
          "Go in and break a leg [Fight]"
        ],
        [
          "option",
          "backstage",
          "Head backstage"
        ],
        [
          "option",
          "done",
          "Take off"
        ]
      ],
      "back2": [
        [
          "say",
          "You watch for a while. The bits where the actor has to do a swordfight with themselves are pretty entertaining."
        ],
        [
          "addflag",
          "goblin1_secret1"
        ],
        [
          "addflag",
          "goblin1_house7"
        ],
        [
          "addxp",
          "@xpreward_c@"
        ],
        [
          "option",
          "done",
          "Nice"
        ]
      ],
      "alreadylistened": [
        [
          "say",
          "Through the door you hear the actor mumbling to themselves and rehearsing some lines over and over."
        ],
        [
          "option",
          "fight",
          "They're not the only one that's gonna butcher Hamlet [Fight]"
        ],
        [
          "option",
          "done",
          "Leave them be"
        ]
      ]
    },
    "goblin1_house8": {
      "goin2": [
        [
          "say",
          "You enter what turns out to be a caf, and reconstruct a few cups of chicory from the leavings in various dirty cups and sinks."
        ],
        [
          "if",
          "hasskill(goblintongue)"
        ],
        [
          "say",
          "You stop to wonder why a caf wouldn't be open at this time of day.  You see a schedule posted on the wall and sure enough, it says somebody named Gene is supposed to be working this shift."
        ],
        [
          "if",
          "hasskill(goblintongue)"
        ],
        [
          "say",
          "He always was a shiftless layabout, that Gene."
        ],
        [
          "if",
          "hasskill(goblintongue)"
        ],
        [
          "addflag",
          "goblin1_secret3"
        ],
        [
          "checklocation",
          "Gustavson Gulch - Cafe Hut"
        ],
        [
          "addflag",
          "goblin1_house8"
        ],
        [
          "option",
          "done",
          "Nice"
        ]
      ]
    },
    "goblin1_house9": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You win! That'd show them, if they weren't dead now!"
        ],
        [
          "addxp",
          "xpreward_b*3"
        ],
        [
          "checklocation",
          "Gustavson Gulch - Guard Barracks"
        ],
        [
          "addmeat",
          "rand(40,50),1"
        ],
        [
          "additem",
          "pickone(food_goblinsandwich,potion_goblinchicory,booze_goblinmescal)"
        ],
        [
          "if",
          "itemroll(20)"
        ],
        [
          "additem",
          "pickone(hat_goblin,pants_goblin,pistol_goblin)"
        ],
        [
          "if",
          "itemroll(20)"
        ],
        [
          "additem",
          "pickone(hat_goblin,pants_goblin,pistol_goblin)"
        ],
        [
          "addflag",
          "goblin1_house9"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ],
      "bomb": [
        [
          "removeitem",
          "fungusbomb"
        ],
        [
          "say",
          "You open the door a crack and toss the bomb in.  A few minutes later, after the fumes settle, you enter the shack and survey the carnage."
        ],
        [
          "say",
          "It's a very profitable carnage! Three whole goblins worth of carnage!"
        ],
        [
          "checklocation",
          "Gustavson Gulch - Guard Barracks"
        ],
        [
          "addmeat",
          "rand(40,50),1"
        ],
        [
          "additem",
          "pickone(food_goblinsandwich,potion_goblinchicory,booze_goblinmescal)"
        ],
        [
          "if",
          "itemroll(20)"
        ],
        [
          "additem",
          "pickone(hat_goblin,pants_goblin,pistol_goblin)"
        ],
        [
          "if",
          "itemroll(20)"
        ],
        [
          "additem",
          "pickone(hat_goblin,pants_goblin,pistol_goblin)"
        ],
        [
          "addflag",
          "goblin1_house9"
        ],
        [
          "option",
          "done",
          "Sweet!"
        ]
      ]
    },
    "goblin1_maptable": {
      "look": [
        [
          "say",
          "Hey! Wow! It contains an entire year's supply of dynamite! Nice!"
        ],
        [
          "markused"
        ],
        [
          "addflag",
          "goblin1_gotdynamite"
        ],
        [
          "checklocation",
          "Gustavson Gulch Treasure Cave - Middle Chest"
        ],
        [
          "exit"
        ]
      ]
    },
    "goblin1_treasure3": {
      "picklock": [
        [
          "cls"
        ],
        [
          "removeitem",
          "needle"
        ],
        [
          "playsound",
          "Player_Use_Lockpick"
        ],
        [
          "markused"
        ],
        [
          "say",
          "It's full of jewelry!"
        ],
        [
          "checklocation",
          "Gustavson Gulch Treasure Cave - Bottom Chest (Item 1)"
        ],
        [
          "checklocation",
          "Gustavson Gulch Treasure Cave - Bottom Chest (Item 2)"
        ]
      ]
    },
    "goblin3_getbeans": {
      "get": [
        [
          "cls"
        ],
        [
          "if",
          "hasflag(goblin3_bombed)"
        ],
        [
          "goto",
          "bombed"
        ],
        [
          "if",
          "hasflag(goblin3_pastime)"
        ],
        [
          "goto",
          "pastime"
        ],
        [
          "else",
          ""
        ],
        [
          "say",
          "You push past the now much smaller goblin pile, and grab the jar of jellybeans."
        ],
        [
          "checklocation",
          "Ol' Granddad (Floor 4) - Jellybean Jar"
        ],
        [
          "markused"
        ],
        [
          "sayoption",
          "done",
          "Sorry."
        ]
      ],
      "bombed": [
        [
          "say",
          "You stroll nonchalantly past the scorched black blob of goop on the floor, and pick up the jar of jellybeans."
        ],
        [
          "checklocation",
          "Ol' Granddad (Floor 4) - Jellybean Jar"
        ],
        [
          "markused"
        ],
        [
          "option",
          "done",
          "Mission accomplished."
        ]
      ],
      "pastime": [
        [
          "say",
          "The goblin pile is/are too focused on their game to notice you taking the jellybeans. And it was a fair trade, so they're yours now anyway."
        ],
        [
          "checklocation",
          "Ol' Granddad (Floor 4) - Jellybean Jar"
        ],
        [
          "markused"
        ],
        [
          "sayoption",
          "done",
          "Nice."
        ]
      ]
    },
    "hallowaystore_curlysmeat": {
      "dig": [
        [
          "cls"
        ],
        [
          "playsound",
          "Player_Use_Shovel"
        ],
        [
          "say",
          "Hooray!"
        ],
        [
          "checklocation",
          "Halloway's Hideaway - X Marks the Spot"
        ],
        [
          "addflag",
          "curly_treasuregot"
        ],
        [
          "removeitem",
          "quest_curlymap"
        ]
      ]
    },
    "hallowaystore_store": {
      "givemap": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftspeak",
          "$lastoption$"
        ],
        [
          "rightportrait",
          "halloway"
        ],
        [
          "rightsay",
          "Aha. Well, since you came all this way just to return my pin, I guess you're the trustworthy sort Curly was lookin' for. Here ya go, this is the other half a' that map."
        ],
        [
          "checklocation",
          "Halloway's Hideaway - Half of Curly's Map"
        ],
        [
          "addflag",
          "hallowaystore_stoppin"
        ],
        [
          "option",
          "done",
          "Wow, thanks!"
        ]
      ],
      "initstore": [
        [
          "addflag",
          "store_halloway,1"
        ],
        [
          "addnpcstoreitem",
          "halloway,pinecone,-1"
        ],
        [
          "addnpcstoreitem",
          "halloway,needle,rand(5,7)"
        ],
        [
          "addnpcstoreitem",
          "halloway,pick,-1"
        ],
        [
          "addnpcstoreitem",
          "halloway,shovel,-1"
        ],
        [
          "goto",
          "optstemp"
        ]
      ],
      "opts": [
        [
          "if",
          "hasflag(ranch1_grace)==2 && !hasflag(hallowaystore_grace)"
        ],
        [
          "sayoption",
          "grace",
          "What happened to the squirrels?"
        ],
        [
          "if",
          "hasitem(quest_hallowaykeepsake) && !hasstate(keepsake) && !hasflag(hallowaystore_stoppin)"
        ],
        [
          "sayoption",
          "keepsake",
          "H. Halloway? I found this silver pin..."
        ],
        [
          "if",
          "hasflag(curly_mapread) && !hasflag(hallowaystore_stoppin)"
        ],
        [
          "sayoption",
          "mapask2",
          "You know a fella name of Curly? I found part of a map..."
        ],
        [
          "sayoption",
          "launch",
          "Let me see what you're selling."
        ],
        [
          "sayoption",
          "done",
          "Well, see you later."
        ]
      ]
    },
    "house_airbnbookshelf": {
      "skillbook": [
        [
          "cls"
        ],
        [
          "say",
          "Hey, there's actually a useful book hidden among all this crap!"
        ],
        [
          "checklocation",
          "Gun Manor Guest Room 1 - Bookcase"
        ],
        [
          "goto",
          "keepon"
        ]
      ]
    },
    "house_airbnbsewing": {
      "e8": [
        [
          "cls"
        ],
        [
          "say",
          "Oh god. Just take it, okay? Take it and get the hell out of this script."
        ],
        [
          "checklocation",
          "Gun Manor Guest Room 3 - Sewing Basket"
        ],
        [
          "addflag",
          "house_airbnbsewing"
        ],
        [
          "option",
          "e9",
          "Thank you sew much!"
        ]
      ]
    },
    "house_animalhead1": {
      "take": [
        [
          "addflag",
          "house_gotglasseye"
        ],
        [
          "cls"
        ],
        [
          "say",
          "Pop! Now it's really got its eye on you."
        ],
        [
          "checklocation",
          "Mr. Gun's Trophy Room - Moose Head"
        ],
        [
          "changeelementproperty",
          "animalhead1,asset,trophy_moose_oneeye"
        ]
      ]
    },
    "house_atticstick": {
      "e": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "playsound",
          "house_dish_break_05"
        ],
        [
          "checklocation",
          "Mrs. Gun's Room - Display Case"
        ],
        [
          "addflag",
          "house_gotatticstick"
        ]
      ]
    },
    "house_beanbush": {
      "e": [
        [
          "addflag",
          "house_beanbush"
        ],
        [
          "cls"
        ],
        [
          "checklocation",
          "Gun Manor Hedge Maze - Bean Bush"
        ]
      ]
    },
    "house_bowlterfight": {
      "win": [
        [
          "addflag",
          "house_bowltergeist"
        ],
        [
          "incflag",
          "house_bowlterkills"
        ],
        [
          "say",
          "Ashes to ashes, pins to pins."
        ],
        [
          "addxp",
          "@xpreward_w@"
        ],
        [
          "if",
          "house_bowlingwincount == 3"
        ],
        [
          "checklocation",
          "Mr. Gun's Bowling Room - Combat Drop 4"
        ],
        [
          "if",
          "house_bowlingwincount == 2"
        ],
        [
          "checklocation",
          "Mr. Gun's Bowling Room - Combat Drop 3"
        ],
        [
          "if",
          "house_bowlingwincount == 1"
        ],
        [
          "checklocation",
          "Mr. Gun's Bowling Room - Combat Drop 2"
        ],
        [
          "if",
          "!house_bowlingwincount"
        ],
        [
          "checklocation",
          "Mr. Gun's Bowling Room - Combat Drop 1"
        ],
        [
          "incflag",
          "house_bowlingwincount"
        ],
        [
          "pushrandom",
          "combat_bowlingchunk,combat_bowlingchunk"
        ],
        [
          "additem",
          "poprandom()"
        ],
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "house_canshelf": {
      "popup": [
        [
          "say",
          "Cans of every shape, size, and food you don't like."
        ],
        [
          "if",
          "hasflag(house_silencerplan) && !hasflag(house_knowsilencercan)"
        ],
        [
          "option",
          "e",
          "Wait a second..."
        ],
        [
          "else",
          ""
        ],
        [
          "if",
          "hasflag(house_silencerplan) && !hasitem(quest_silencercan) && house_madesilencer"
        ],
        [
          "option",
          "grab",
          "Grab another string bean can"
        ]
      ],
      "e": [
        [
          "cls"
        ],
        [
          "say",
          "Eureka! These cans of string beans are exactly 1.2337\" in diameter!  They must have packed the beans lengthwise."
        ],
        [
          "addflag",
          "house_knowsilencercan"
        ],
        [
          "checklocation",
          "Gun Manor Larder - Right Shelf"
        ]
      ]
    },
    "house_carriagebook": {
      "e": [
        [
          "markused"
        ],
        [
          "cls"
        ],
        [
          "checklocation",
          "Gun Manor Carriage House - Leftmost Coach"
        ],
        [
          "exit"
        ]
      ]
    },
    "house_carriagehammer": {
      "e": [
        [
          "markused"
        ],
        [
          "cls"
        ],
        [
          "say",
          "It's a courtesy hammer, for the coach's passengers."
        ],
        [
          "checklocation",
          "Gun Manor Carriage House - Middle Coach"
        ]
      ]
    },
    "house_chalkboard": {
      "e2": [
        [
          "cls"
        ],
        [
          "say",
          "You look at the board and shudder, and then take the chalk."
        ],
        [
          "addflag",
          "house_gotchalk"
        ],
        [
          "checklocation",
          "Gun Manor Children's Quarters - Chalkboard"
        ]
      ]
    },
    "house_coalmanbones": {
      "e": [
        [
          "addflag",
          "house_coalmanloot"
        ],
        [
          "cls"
        ],
        [
          "checklocation",
          "Back of Gun Manor - Coal Man Skeleton"
        ]
      ]
    },
    "house_cocoon1": {
      "e": [
        [
          "cls"
        ],
        [
          "say",
          "It's bones.  Well, bones and pants."
        ],
        [
          "checklocation",
          "Gun Manor Cellar - Rightmost Cocoon"
        ],
        [
          "markused"
        ]
      ]
    },
    "house_crib": {
      "get": [
        [
          "cls"
        ],
        [
          "say",
          "You write down all of the spooky notes."
        ],
        [
          "removeitem",
          "quest_housemusic"
        ],
        [
          "checklocation",
          "Gun Manor Nursery - Crib"
        ]
      ]
    },
    "house_cuerack": {
      "popup": [
        [
          "if",
          "house_gotcuerackcheck"
        ],
        [
          "say",
          "It's a rack of billiards cues, but you've already got one."
        ],
        [
          "else",
          ""
        ],
        [
          "goto",
          "getone"
        ]
      ],
      "e": [
        [
          "cls"
        ],
        [
          "say",
          "You inspect them and take the best one, which isn't saying much."
        ],
        [
          "checklocation",
          "Gun Manor Billiards Room - Cue Rack"
        ],
        [
          "addflag",
          "house_gotcuerackcheck"
        ]
      ]
    },
    "house_dessertcart": {
      "e": [
        [
          "cls"
        ],
        [
          "say",
          "Okay, it's not <i>entirely</i> deserted. It's only deserted of desserts. Just desserts."
        ],
        [
          "checklocation",
          "Gun Manor Dining Room - Dessert Cart"
        ],
        [
          "markused"
        ]
      ]
    },
    "house_dictionary2": {
      "carver": [
        [
          "addstate",
          "numleft,=6-hasflag(house_mainpuzzle)"
        ],
        [
          "if",
          "$numleft$>0"
        ],
        [
          "say",
          "You seem to be skipping forward a bit, yeah?"
        ],
        [
          "if",
          "$numleft$>0"
        ],
        [
          "goto",
          "finish1"
        ],
        [
          "if",
          "hasflag(house_mainpuzzle_done)"
        ],
        [
          "say",
          "There's just a gap where you chiseled out your page-knife now."
        ],
        [
          "if",
          "hasflag(house_mainpuzzle_done)"
        ],
        [
          "goto",
          "finish1"
        ],
        [
          "say",
          "<b>CARVER</b>"
        ],
        [
          "say",
          "The dictionary has been waiting so long for someone to turn to this page that the natural geological processes within the book have caused the pages to compress into a dense and very sharp material. You chip out a piece and fashion it into a makeshift knife."
        ],
        [
          "checklocation",
          "Gun Manor Library - Cipher Puzzle Solved"
        ],
        [
          "say",
          "<i>Congrats on a job well done!</i>"
        ],
        [
          "addflag",
          "house_mainpuzzle_done"
        ],
        [
          "goto",
          "finish1"
        ]
      ],
      "key": [
        [
          "say",
          "<b>key</b>"
        ],
        [
          "say",
          "1. (n.) One of these things:"
        ],
        [
          "if",
          "hasflag(house_dictionarykey)"
        ],
        [
          "goto",
          "key-already1"
        ],
        [
          "addflag",
          "house_dictionarykey"
        ],
        [
          "say",
          "There's a key stuck to the page!"
        ],
        [
          "checklocation",
          "Gun Manor Library - Dictionary (\"Key\")"
        ],
        [
          "goto",
          "finish1"
        ]
      ],
      "poach": [
        [
          "if",
          "hasflag(house_poachlookup)"
        ],
        [
          "goto",
          "poachgone1"
        ],
        [
          "say",
          "<b>poach</b>"
        ],
        [
          "say",
          "1. (v.) To slow cook by immersion in water."
        ],
        [
          "say",
          "2. (v.) To shoot an animal belonging to the king."
        ],
        [
          "if",
          "hasflag(house_ghost_poacher_knowquest)"
        ],
        [
          "leftportrait",
          "player"
        ],
        [
          "if",
          "hasflag(house_ghost_poacher_knowquest)"
        ],
        [
          "leftsay",
          "See, you <i>told</i> that ghost in the kitchen that there were two meanings."
        ],
        [
          "if",
          "hasflag(house_ghost_poacher_knowquest)"
        ],
        [
          "addflag",
          "house_poachlookup"
        ],
        [
          "if",
          "hasflag(house_ghost_poacher_knowquest)"
        ],
        [
          "say",
          "You tear the page out so you can prove it to him."
        ],
        [
          "if",
          "hasflag(house_ghost_poacher_knowquest)"
        ],
        [
          "checklocation",
          "Gun Manor Library - Dictionary (\"Poach\")"
        ],
        [
          "goto",
          "finish1"
        ]
      ]
    },
    "house_dollmine": {
      "e": [
        [
          "cls"
        ],
        [
          "addflag",
          "house_gotfirecracker"
        ],
        [
          "say",
          "There's a tiny stick of dynamite stuck in a little borehole. This toy is interactive!"
        ],
        [
          "checklocation",
          "Gun Manor Children's Quarters - Dollmine"
        ]
      ]
    },
    "house_ghost_lawyer": {
      "givehat4": [
        [
          "leftspeak",
          "$lastoption$"
        ],
        [
          "say",
          "She looks at you silently for a moment, then looks at the watch. She winds the hands back a minute, and listens as it chimes again."
        ],
        [
          "say",
          "She sighs and shakes her head, then smiles at you."
        ],
        [
          "rightsay",
          "Thank you, @firstname@. You'd make a damn fine attorney."
        ],
        [
          "say",
          "She shakes your hand, and fades from view as she does so -- leaving her attorney's badge in your hand."
        ],
        [
          "checklocation",
          "Gun Manor Art Gallery - Lawyer Quest Completion"
        ],
        [
          "addxp",
          "@xpreward_w@*3"
        ],
        [
          "addflag",
          "house_ghost_lawyer"
        ],
        [
          "incflag",
          "house_ghosts,-1"
        ],
        [
          "incflag",
          "house_ghosts_peaceful,1"
        ],
        [
          "addflag",
          "house_ghost_lawyer_peace"
        ],
        [
          "sayoption",
          "done",
          "Rest in peace, Counselor."
        ]
      ],
      "keephat3": [
        [
          "leftspeak",
          "$lastoption$"
        ],
        [
          "say",
          "She looks at you silently for a moment, then sighs and shakes her head."
        ],
        [
          "say",
          "She smiles at you."
        ],
        [
          "rightsay",
          "Thank you, @firstname@. You'd make a damn fine attorney."
        ],
        [
          "say",
          "She shakes your hand, and fades from view as she does so."
        ],
        [
          "addxp",
          "@xpreward_w@*3"
        ],
        [
          "playsound",
          "house_ghostquest_complete"
        ],
        [
          "addflag",
          "house_ghost_lawyer"
        ],
        [
          "incflag",
          "house_ghosts,-1"
        ],
        [
          "incflag",
          "house_ghosts_peaceful,1"
        ],
        [
          "addflag",
          "house_ghost_lawyer_peace"
        ],
        [
          "sayoption",
          "done",
          "Rest in peace, Counselor."
        ]
      ],
      "t3objection3": [
        [
          "leftspeak",
          "$lastoption$"
        ],
        [
          "rightsay",
          "I already thought it. <i>TAKE THAT!</i>"
        ],
        [
          "playsound",
          "house_phoenix_wright_whip_,1,1,3"
        ],
        [
          "say",
          "She hurls a small book at you, which you just barely manage to catch."
        ],
        [
          "checklocation",
          "Gun Manor Art Gallery - Clock Noon Objection"
        ],
        [
          "leftsay",
          "Gah!"
        ],
        [
          "sayoption",
          "t3objection3b",
          "What the heck is this?"
        ]
      ]
    },
    "house_ghost_librarian_convo": {
      "checkquest": [
        [
          "rightportrait",
          "ghost"
        ],
        [
          "rightsay",
          "<size=16>Yes? What can I do for you this time?</size>"
        ],
        [
          "if",
          "hasitem(aug_silencer)"
        ],
        [
          "sayoption",
          "solve",
          "Hey look, I invented this. [silenter]"
        ],
        [
          "if",
          "!hasitem(aug_silencer) && hasflag(house_madesilencer) && received_item_Silenter"
        ],
        [
          "sayoption",
          "solvealt",
          "Hey, I know how to make guns quiet!"
        ],
        [
          "sayoption",
          "fight",
          "I've decided I hate whispering. [Fight]"
        ],
        [
          "sayoption",
          "library",
          "Can you help me with some... library stuff?"
        ],
        [
          "sayoption",
          "done",
          "Actually, never mind."
        ]
      ]
    },
    "house_gunbench": {
      "e": [
        [
          "cls"
        ],
        [
          "if",
          "hasflag(house_madeworstgun)"
        ],
        [
          "goto",
          "alreadymade"
        ],
        [
          "say",
          "You don't really know much about gunsmithing, so you just kinda randomly cram pieces together until you have something gun-shaped."
        ],
        [
          "addflag",
          "house_madeworstgun"
        ],
        [
          "checklocation",
          "Gun Manor Laboratory - Gunsmithing Tools (Worst Gun)"
        ]
      ],
      "best": [
        [
          "say",
          "You follow the directions on Mrs. Gun's blueprint and construct her final gift to the world."
        ],
        [
          "removeitem",
          "quest_bestgunplan"
        ],
        [
          "checklocation",
          "Gun Manor Laboratory - Gunsmithing Tools (Opus)"
        ]
      ]
    },
    "house_hedgefight3": {
      "win": [
        [
          "addflag",
          "house_hedgefight3"
        ],
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "Finally!"
        ],
        [
          "addxp",
          "@xpreward_w@*4"
        ],
        [
          "checklocation",
          "Gun Manor Hedge Maze - Hedge Wizard Defeated (Item 1)"
        ],
        [
          "checklocation",
          "Gun Manor Hedge Maze - Hedge Wizard Defeated (Item 2)"
        ],
        [
          "additem",
          "hedgeleaf,rand(3,4)"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "house_hedgetreasure": {
      "e": [
        [
          "cls"
        ],
        [
          "addmeat",
          "rand(100*@house_diff@,110*@house_diff@)"
        ],
        [
          "checklocation",
          "Gun Manor Hedge Maze - Hedge Wizard's Chest"
        ],
        [
          "markused"
        ]
      ]
    },
    "house_hedgetrimmers": {
      "e": [
        [
          "cls"
        ],
        [
          "addflag",
          "house_hedgetrimmers"
        ],
        [
          "checklocation",
          "Gun Manor Carriage House - Hedge Clippers"
        ]
      ]
    },
    "house_herbicidecabinet": {
      "e": [
        [
          "cls"
        ],
        [
          "say",
          "There is!  There IS something useful!"
        ],
        [
          "checklocation",
          "Gun Manor Carriage House - Cabinet (Item 1)"
        ],
        [
          "checklocation",
          "Gun Manor Carriage House - Cabinet (Item 2)"
        ],
        [
          "addflag",
          "house_herbicidecabinet"
        ]
      ]
    },
    "house_humidor": {
      "popup": [
        [
          "say",
          "It's a humidor full of cheap cigars."
        ],
        [
          "if",
          "!house_gothumidorcheck"
        ],
        [
          "goto",
          "initialcheck"
        ],
        [
          "if",
          "received_item_CheapCigar && hasitem(potion_cheapcigar)<3"
        ],
        [
          "option",
          "grab1",
          "Grab one"
        ],
        [
          "else",
          ""
        ],
        [
          "say",
          "You've got plenty of them at this point."
        ]
      ],
      "initialcheck": [
        [
          "cls"
        ],
        [
          "say",
          "What's this? There's something wedged at the back of one of the shelves."
        ],
        [
          "checklocation",
          "Mr. Gun's Manliness Room - Humidor"
        ],
        [
          "addflag",
          "house_gothumidorcheck"
        ]
      ]
    },
    "house_lab_bismuthbench": {
      "popup": [
        [
          "if",
          "hasflag(house_madebismuthbomb)"
        ],
        [
          "goto",
          "alreadyused"
        ],
        [
          "if",
          "hasflag(house_coaltergeistintro)"
        ],
        [
          "goto",
          "makebomb"
        ],
        [
          "say",
          "This workbench is littered with scrap metal and little canisters labeled \"BISMUTH. DO NOT EAT.\""
        ]
      ]
    },
    "house_lab_bismuthbench2": {
      "finish": [
        [
          "addflag",
          "house_madebismuthbomb"
        ],
        [
          "say",
          "Florence goes to town with a hammer and pliers and comes back with a metal sphere. It has a grinning skull painted on it and a big red button on the side."
        ],
        [
          "leftsay",
          "Well, that's properly intimidating at least."
        ],
        [
          "rightsay",
          "And it ain't just a pretty face!"
        ],
        [
          "checklocation",
          "Gun Manor Laboratory - Science Bench"
        ],
        [
          "option",
          "done",
          "Groovy"
        ]
      ]
    },
    "house_lardershelf": {
      "e": [
        [
          "markused"
        ],
        [
          "cls"
        ],
        [
          "checklocation",
          "Gun Manor Larder - Middle Shelf"
        ]
      ]
    },
    "house_lathe": {
      "e": [
        [
          "cls"
        ],
        [
          "playsound",
          "house_carriageroom_lathe"
        ],
        [
          "say",
          "You lathe, rinse, and repeat until the cue is fixed."
        ],
        [
          "removeitem",
          "weapon_wobblycue"
        ],
        [
          "checklocation",
          "Gun Manor Carriage House - Lathe"
        ]
      ]
    },
    "house_macready": {
      "seven": [
        [
          "leftspeak",
          "$lastoption$"
        ],
        [
          "rightsay",
          "Kind a' him to bury me, though. Guess he weren't all bad."
        ],
        [
          "leftsay",
          "Do you... do you want to see Felicity again? I could take you to her ghost."
        ],
        [
          "rightsay",
          "...Nah. I reckon I'll just go back to sleep. Ain't right, a dead fella walkin' 'round. Just tell her sorry for me, alright? Here, you can give 'er my pocketwatch, she'll recognize it."
        ],
        [
          "checklocation",
          "Desert House - Macready's Grave"
        ],
        [
          "addflag",
          "house_ghost_lawyer_duggrave"
        ],
        [
          "sayoption",
          "eight",
          "All right. Bye, Macready."
        ]
      ]
    },
    "house_mancavebarcart": {
      "e": [
        [
          "cls"
        ],
        [
          "checklocation",
          "Mr. Gun's Manliness Room - Booze Cart"
        ],
        [
          "addflag",
          "house_mancavebarcart"
        ]
      ]
    },
    "house_medicinecabinet": {
      "e": [
        [
          "cls"
        ],
        [
          "say",
          "Why, ointment!  That's what's inside!"
        ],
        [
          "checklocation",
          "Gun Manor Restroom - Medicine Cabinet"
        ],
        [
          "markused"
        ]
      ]
    },
    "house_mrsgunfinal2": {
      "family2": [
        [
          "leftsay",
          "Yeah. He didn't know you were already dead, so he's been hiding in your attic for the last couple days, waiting for the ghosts to kill you. What do you want me to do with him?"
        ],
        [
          "rightsay",
          "<i>sigh...</i> I'll leave it up to you. I'm not in a state to make any reasoned judgement. In any case, you've answered my question, and I can feel myself moving on already. Thank you for all your help."
        ],
        [
          "say",
          "With a sad wave, Mrs. Gun fades from view. Then, almost as an afterthought, the lock on her desk drawer pops open. Inside, you find a check written out to Cunningham Ghost Annihilation Services (which Flo snags with a \"Cha-ching!\") and a blueprint."
        ],
        [
          "addflag",
          "house_mrsgunfinal"
        ],
        [
          "incflag",
          "house_ghosts,-1"
        ],
        [
          "incflag",
          "house_ghosts_peaceful,1"
        ],
        [
          "if",
          "hasflag(house_ghosts_peaceful)==13"
        ],
        [
          "giveachievement",
          "ach_manorpeaceful"
        ],
        [
          "checklocation",
          "Mrs. Gun's Room - All Ghosts Settled Peacefully"
        ],
        [
          "option",
          "walkaway",
          "Alrighty"
        ]
      ]
    },
    "house_musicbooks": {
      "e": [
        [
          "cls"
        ],
        [
          "say",
          "Almost all of the books are dry-rotted and moth-eaten, and fall apart at a touch. You do find a copy of \"Duelling Banjos\" in reasonable shape, though."
        ],
        [
          "checklocation",
          "Gun Manor Music Room - Book Pile"
        ],
        [
          "addflag",
          "house_musicbooks_used"
        ]
      ]
    },
    "house_panshelf": {
      "popup": [
        [
          "goto",
          "beanslinger"
        ],
        [
          "say",
          "This shelf is full of pots and pans, none of which are interesting to you."
        ]
      ],
      "e": [
        [
          "cls"
        ],
        [
          "checklocation",
          "Gun Manor Kitchen - Pot Shelf"
        ],
        [
          "markused"
        ]
      ]
    },
    "house_pantryrack": {
      "e": [
        [
          "cls"
        ],
        [
          "checklocation",
          "Gun Manor Pantry - Back Row, Third Rack"
        ],
        [
          "addflag",
          "house_gotpantrypants"
        ]
      ]
    },
    "house_parlorsofa": {
      "e": [
        [
          "cls"
        ],
        [
          "say",
          "You sigh and do what has to be done."
        ],
        [
          "addflag",
          "house_parlorchili"
        ],
        [
          "checklocation",
          "Gun Manor Parlor - Sofa Cushions (Murdered Chili)"
        ],
        [
          "removeitem",
          "quest_gunlesschili"
        ]
      ]
    },
    "house_photobox": {
      "getit": [
        [
          "say",
          "Hey, one of these is a photo of that L'Ardest guy!"
        ],
        [
          "checklocation",
          "Gun Manor Cellar - Box of Photos"
        ],
        [
          "addflag",
          "house_photoboxused"
        ]
      ]
    },
    "house_photocounter": {
      "takephoto": [
        [
          "addflag",
          "house_gotphoto"
        ],
        [
          "rightspeak",
          "Okay then!  Smile!"
        ],
        [
          "playsound",
          "camera_flash"
        ],
        [
          "checklocation",
          "Gun Manor Visitor Center - Photo"
        ],
        [
          "leftportrait",
          "player"
        ],
        [
          "leftspeak",
          "Wait a second -- this is a photograph of the house."
        ],
        [
          "rightspeak",
          "Yep!  An official Gun Manor souvenir photo!"
        ],
        [
          "sayoption",
          "takephoto2",
          "Why'd you take a picture of me, then?"
        ]
      ]
    },
    "house_piano": {
      "e": [
        [
          "cls"
        ],
        [
          "say",
          "Weird, it's blank!"
        ],
        [
          "addflag",
          "house_piano,1"
        ],
        [
          "checklocation",
          "Gun Manor Music Room - Piano"
        ],
        [
          "goto",
          "step1"
        ]
      ]
    },
    "house_piesafe": {
      "e": [
        [
          "markused"
        ],
        [
          "cls"
        ],
        [
          "say",
          "Oh.  Ew."
        ],
        [
          "checklocation",
          "Gun Manor Cellar - Pie Safe"
        ]
      ]
    },
    "house_pooltable": {
      "e": [
        [
          "cls"
        ],
        [
          "say",
          "You grab the most appealing ball."
        ],
        [
          "addflag",
          "house_gotpoolball"
        ],
        [
          "checklocation",
          "Gun Manor Billiards Room - Pool Table"
        ]
      ]
    },
    "house_sciencebox_belfry": {
      "popup": [
        [
          "say",
          "It's a box of science stuff."
        ],
        [
          "option",
          "e",
          "Grab it"
        ]
      ],
      "e": [
        [
          "cls"
        ],
        [
          "checklocation",
          "Gun Manor Belfry - Science Box"
        ],
        [
          "addflag",
          "house_@script_context_data.id@"
        ]
      ]
    },
    "house_sciencebox_guestroom": {
      "popup": [
        [
          "say",
          "It's a box of science stuff."
        ],
        [
          "option",
          "e",
          "Grab it"
        ]
      ],
      "e": [
        [
          "cls"
        ],
        [
          "checklocation",
          "Gun Manor Guest Room 4 - Science Box"
        ],
        [
          "addflag",
          "house_@script_context_data.id@"
        ]
      ]
    },
    "house_sciencebox_lab": {
      "popup": [
        [
          "say",
          "It's a box of science stuff."
        ],
        [
          "option",
          "e",
          "Grab it"
        ]
      ],
      "e": [
        [
          "cls"
        ],
        [
          "checklocation",
          "Gun Manor Laboratory - Science Box"
        ],
        [
          "addflag",
          "house_@script_context_data.id@"
        ]
      ]
    },
    "house_sciencebox_tweenroom": {
      "popup": [
        [
          "say",
          "It's a box of science stuff."
        ],
        [
          "option",
          "e",
          "Grab it"
        ]
      ],
      "e": [
        [
          "cls"
        ],
        [
          "checklocation",
          "Gun Manor Tween Room - Science Box"
        ],
        [
          "addflag",
          "house_@script_context_data.id@"
        ]
      ]
    },
    "house_shower": {
      "e": [
        [
          "cls"
        ],
        [
          "say",
          "It's curtains for you!"
        ],
        [
          "checklocation",
          "Gun Manor Restroom - Shower"
        ],
        [
          "addflag",
          "house_shower,1"
        ]
      ]
    },
    "house_silencerbench": {
      "e": [
        [
          "if",
          "!hasflag(house_silencerplan)"
        ],
        [
          "goto",
          "nope"
        ],
        [
          "if",
          "hasitem(aug_silencer) || (house_madesilencer && !received_item_Silenter)"
        ],
        [
          "goto",
          "alreadygot"
        ],
        [
          "closepopup"
        ],
        [
          "queue"
        ],
        [
          "runscript",
          "house_silencerbench2"
        ]
      ]
    },
    "house_silencerbench2": {
      "start": [
        [
          "addstate",
          "nocando,0"
        ],
        [
          "say",
          "You look over the tools on the bench.  You could definitely make a silenter here."
        ],
        [
          "if",
          "hasitem(quest_silencercan)"
        ],
        [
          "say",
          "You've got the right size tin can."
        ],
        [
          "if",
          "!hasitem(quest_silencercan) && hasflag(house_knowsilencercan) && received_item_1.2337\"DiameterTinCan"
        ],
        [
          "say",
          "You don't have a 1.2337\" diameter tin can on you, but you know exactly where to get one."
        ],
        [
          "if",
          "!hasitem(quest_silencercan) && (!hasflag(house_knowsilencercan) || !received_item_1.2337\"DiameterTinCan)"
        ],
        [
          "addstate",
          "nocando,1"
        ],
        [
          "if",
          "!hasitem(quest_silencercan) && (!hasflag(house_knowsilencercan) || !received_item_1.2337\"DiameterTinCan)"
        ],
        [
          "say",
          "The first thing you'll need is a 1.2337\" diameter cylinder.  Hmm.  Maybe a tin can would work?"
        ],
        [
          "if",
          "hasitem(quest_silencerstuffing)"
        ],
        [
          "say",
          "You've got some stuffing of the appropriate density."
        ],
        [
          "if",
          "!hasitem(quest_silencerstuffing) && hasflag(house_knowssilencerstuffing) && received_item_WadOfStuffing"
        ],
        [
          "say",
          "You don't have any appropriate stuffing, but you know right where some is."
        ],
        [
          "if",
          "!hasitem(quest_silencerstuffing) && (!hasflag(house_knowssilencerstuffing) || !received_item_WadOfStuffing)"
        ],
        [
          "addstate",
          "nocando,1"
        ],
        [
          "if",
          "!hasitem(quest_silencerstuffing) && (!hasflag(house_knowssilencerstuffing) || !received_item_WadOfStuffing)"
        ],
        [
          "say",
          "You'll also need some stuffing to pad out the inside of the can.  That's gonna be tricky to find."
        ],
        [
          "if",
          "$nocando$==1"
        ],
        [
          "goto",
          "end"
        ],
        [
          "option",
          "make",
          "Make a silenter"
        ],
        [
          "option",
          "done",
          "Don't make a silenter"
        ]
      ],
      "make": [
        [
          "if",
          "!hasitem(quest_silencercan) && hasitem(quest_silencerstuffing)"
        ],
        [
          "say",
          "You run upstairs and grab another string bean can from the larder."
        ],
        [
          "if",
          "hasitem(quest_silencercan) && !hasitem(quest_silencerstuffing)"
        ],
        [
          "say",
          "You run upstairs and grab another handful of stuffing from the nursery."
        ],
        [
          "if",
          "!hasitem(quest_silencercan) && !hasitem(quest_silencerstuffing)"
        ],
        [
          "say",
          "You run upstairs to grab another string bean can from the larder and some more stuffing from the nursery."
        ],
        [
          "if",
          "hasitem(quest_silencercan)"
        ],
        [
          "removeitem",
          "quest_silencercan"
        ],
        [
          "if",
          "hasitem(quest_silencerstuffing)"
        ],
        [
          "removeitem",
          "quest_silencerstuffing"
        ],
        [
          "say",
          "You drill a hole in each end of the can and carefully remove the beans."
        ],
        [
          "say",
          "Then you soak the stuffing in a vat of acoustic dampening chemicals, and carefully jam it into the can."
        ],
        [
          "say",
          "Voila!"
        ],
        [
          "checklocation",
          "Gun Manor Laboratory - Workbench"
        ],
        [
          "addflag",
          "house_madesilencer"
        ],
        [
          "option",
          "done",
          "Nice"
        ]
      ]
    },
    "house_spicerack": {
      "e": [
        [
          "cls"
        ],
        [
          "checklocation",
          "Gun Manor Kitchen - Spice Rack"
        ],
        [
          "addflag",
          "house_gotspices"
        ]
      ]
    },
    "house_stacks_digin": {
      "funlaw": [
        [
          "say",
          "You find the shelf where \"Fun Law\" belongs and put it back. The next book on the shelf is entitled \"Gun Law\", which might be even more entertaining."
        ],
        [
          "removeitem",
          "book_funlaw"
        ],
        [
          "checklocation",
          "Gun Manor Library - Fun Law Returned"
        ],
        [
          "option",
          "done",
          "Will definitely give this a shot"
        ]
      ],
      "dbanjos": [
        [
          "say",
          "You find the shelf where \"Duelling Banjos\" belongs and put it back. The previous book on the shelf is entitled \"Duel Law\", which seems to be about the legal issues surrounding duelling. Never know when that might come in handy."
        ],
        [
          "removeitem",
          "book_dbanjos"
        ],
        [
          "checklocation",
          "Gun Manor Library - Duelling Banjos Returned"
        ],
        [
          "option",
          "done",
          "Duelly noted"
        ]
      ]
    },
    "house_stove2": {
      "step4": [
        [
          "addflag",
          "house_madechili"
        ],
        [
          "removeitem",
          "quest_housespices"
        ],
        [
          "if",
          "hasitem(quest_housebeans)"
        ],
        [
          "removeitem",
          "quest_housebeans"
        ],
        [
          "say",
          "You restrain yourself from adding a gun, step back, and admire your handiwork."
        ],
        [
          "say",
          "It's not according-to-Hoyle chili because it doesn't have a gun in it, but it <i>is</i> chili with no gun in it, which is the thing you were after."
        ],
        [
          "checklocation",
          "quest_gunlesschili"
        ],
        [
          "option",
          "done",
          "Finally!"
        ]
      ]
    },
    "house_stuffybear": {
      "popup": [
        [
          "say",
          "This teddy bear has been comprehensively and enthusiastically disemboweled."
        ],
        [
          "if",
          "hasflag(house_silencerplan) && !hasflag(house_knowssilencerstuffing)"
        ],
        [
          "option",
          "e",
          "Oh hey..."
        ],
        [
          "else",
          ""
        ],
        [
          "if",
          "hasflag(house_silencerplan) && house_madesilencer && received_item_Silenter && !hasitem(quest_silencerstuffing)"
        ],
        [
          "option",
          "grab",
          "Grab another wad of stuffing"
        ]
      ],
      "e": [
        [
          "cls"
        ],
        [
          "say",
          "This stuffing would be perfect for making a silenter!"
        ],
        [
          "say",
          "Sorry, Teddy -- this is for the greater good."
        ],
        [
          "addflag",
          "house_knowssilencerstuffing"
        ],
        [
          "checklocation",
          "Gun Manor Nursery - Teddy Bear Guts"
        ]
      ]
    },
    "house_teaservice": {
      "e": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "You liberate the tea service from its cart."
        ],
        [
          "addflag",
          "house_teaservice"
        ],
        [
          "checklocation",
          "Gun Manor Parlor - Tea Cart"
        ]
      ]
    },
    "house_toybox": {
      "e": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "Gun Manor Toddler's Room - Toybox"
        ],
        [
          "say",
          "Huh.  Less macabre than you were expecting."
        ]
      ]
    },
    "house_trashpile": {
      "e": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "You dig through the trash, and find a single item of non-trash."
        ],
        [
          "checklocation",
          "Back of Gun Manor - Compost Heap"
        ]
      ]
    },
    "house_tweenarmoire": {
      "e": [
        [
          "cls"
        ],
        [
          "say",
          "It's worth a try."
        ],
        [
          "addflag",
          "house_tween_gotskirt"
        ],
        [
          "checklocation",
          "Gun Manor Tween Room - Wardrobe"
        ]
      ]
    },
    "house_tweenbed": {
      "e": [
        [
          "cls"
        ],
        [
          "say",
          "The title is \"Fun Law: Rules for 71 Parlor Games & Assorted Amusements for Children\"."
        ],
        [
          "checklocation",
          "Gun Manor Tween Room - Under the Bed"
        ],
        [
          "addflag",
          "house_gotfunlaw"
        ]
      ]
    },
    "house_tweendesk": {
      "e": [
        [
          "cls"
        ],
        [
          "say",
          "You decide to just take the book with you and do the assignment later."
        ],
        [
          "addflag",
          "house_tweendesk"
        ],
        [
          "checklocation",
          "Gun Manor Tween Room - Desk"
        ],
        [
          "markused"
        ]
      ]
    },
    "house_vc_employee2": {
      "mus": [
        [
          "addstate",
          "crush"
        ],
        [
          "leftspeak",
          "$lastoption$"
        ],
        [
          "rightsay",
          "Nice! That's one of Mrs. Gun's loudest inventions, you know."
        ],
        [
          "say",
          "She takes your token, puts it in the machine, and happily turns the crank. It makes a loud grinding noise, and your token drops out into a slot, somewhat longer and thinner."
        ],
        [
          "removeitem",
          "quest_housetoken"
        ],
        [
          "checklocation",
          "Gun Manor Visitor Center - Token Smasher (Shotgun)"
        ],
        [
          "sayoption",
          "prehub",
          "Thanks!"
        ]
      ],
      "myst": [
        [
          "addstate",
          "crush"
        ],
        [
          "leftspeak",
          "$lastoption$"
        ],
        [
          "rightsay",
          "Great! It has little sparklies around it, that's how you know it's magical. It probably also shoots beans, but that isn't in the picture."
        ],
        [
          "say",
          "She takes your token, puts it in the machine, and happily turns the crank. It makes a loud grinding noise, and your token drops out into a slot, somewhat longer and thinner."
        ],
        [
          "removeitem",
          "quest_housetoken"
        ],
        [
          "checklocation",
          "Gun Manor Visitor Center - Token Smasher (Rifle)"
        ],
        [
          "sayoption",
          "prehub",
          "Thanks!"
        ]
      ],
      "mox": [
        [
          "addstate",
          "crush"
        ],
        [
          "leftspeak",
          "$lastoption$"
        ],
        [
          "rightsay",
          "Good choice! Someday it will make a lot of people uncomfortable if you tell them you think pistols are cool, but not here in 1895! Ha ha!"
        ],
        [
          "say",
          "She takes your token, puts it in the machine, and happily turns the crank. It makes a loud grinding noise, and your token drops out into a slot, somewhat longer and thinner."
        ],
        [
          "removeitem",
          "quest_housetoken"
        ],
        [
          "checklocation",
          "Gun Manor Visitor Center - Token Smasher (Pistol)"
        ],
        [
          "sayoption",
          "prehub",
          "Thanks!"
        ]
      ]
    },
    "house_vc_employee8": {
      "buy": [
        [
          "say",
          "You give the guy $meatcost$ meat and fish around the display until you find one with your name on it."
        ],
        [
          "addflag",
          "house_vc_shotglass"
        ],
        [
          "addmeat",
          "-$meatcost$"
        ],
        [
          "checklocation",
          "Gun Manor Visitor Center - SouvenIRS Stand"
        ],
        [
          "sayoption",
          "done",
          "Thanks."
        ]
      ]
    },
    "item_bropackage": {
      "invpopup": [
        [
          "consume"
        ],
        [
          "if",
          "!hasflag(bro_crafting)"
        ],
        [
          "goto",
          "giveoven"
        ],
        [
          "if",
          "!hasflag(bro_skillbook)"
        ],
        [
          "goto",
          "skillbook"
        ],
        [
          "if",
          "!hasflag(bro_ring)"
        ],
        [
          "goto",
          "cowring"
        ],
        [
          "if",
          "!hasflag(cre_gothat)"
        ],
        [
          "goto",
          "cathat"
        ],
        [
          "say",
          "Hmm, this package is empty.  Or maybe Rufus sent you some kind of special air.  That sounds like something he'd do."
        ],
        [
          "option",
          "sniff",
          "Breathe it in"
        ]
      ],
      "giveoven": [
        [
          "say",
          "Dear @bro@: I thought you might be able to use this."
        ],
        [
          "checklocation",
          "Rufus' Gifts - Gift 1"
        ],
        [
          "addflag",
          "bro_gotgift1check"
        ],
        [
          "option",
          "done",
          "Aww, what a great kid"
        ]
      ],
      "skillbook": [
        [
          "addflag",
          "bro_skillbook"
        ],
        [
          "say",
          "Dear @bro@, I found this and thought it might help you not die."
        ],
        [
          "checklocation",
          "Rufus' Gifts - Gift 2"
        ],
        [
          "option",
          "done",
          "Nice"
        ]
      ],
      "cowring": [
        [
          "say",
          "Dear @bro@: I thought you might be able to use this."
        ],
        [
          "checklocation",
          "Rufus' Gifts - Gift 3"
        ],
        [
          "addflag",
          "bro_ring"
        ],
        [
          "option",
          "done",
          "Aww.  Thanks Rufus."
        ]
      ],
      "cathat": [
        [
          "say",
          "Dear @bro@: I found your old hat behind the bed in your room, and thought you might want it back."
        ],
        [
          "checklocation",
          "Rufus' Gifts - Gift 4"
        ],
        [
          "addflag",
          "cre_gothat"
        ],
        [
          "option",
          "done",
          "That was sweet of him"
        ]
      ],
      "sniff": [
        [
          "cls"
        ],
        [
          "say",
          "You sniff the package and watch as something condenses out of the nothing inside."
        ],
        [
          "checklocation",
          "Rufus' Gifts - Gift 5"
        ],
        [
          "say",
          "Whoah, it <i>was</i> special air!"
        ],
        [
          "option",
          "done",
          "Nice"
        ]
      ]
    },
    "item_hedgeleaf_assembly": {
      "start": [
        [
          "addstate",
          "cost1,3"
        ],
        [
          "addstate",
          "cost2,3"
        ],
        [
          "addstate",
          "cost3,5"
        ],
        [
          "addstate",
          "cost4,7"
        ],
        [
          "addstate",
          "got,=hasitem(hedgeleaf)"
        ],
        [
          "if",
          "$got$==1"
        ],
        [
          "say",
          "You have 1 magic-infused leaf."
        ],
        [
          "else",
          ""
        ],
        [
          "say",
          "You have $got$ magic-infused leaves."
        ],
        [
          "say",
          "What would you like to make?"
        ],
        [
          "if",
          "$got$>=$cost1$ && !hedgeleaf_gotsaladcheck"
        ],
        [
          "option",
          "make1",
          "A salad, ha ha [$cost1$ leaves]"
        ],
        [
          "if",
          "$got$<$cost1$ && !hedgeleaf_gotsaladcheck"
        ],
        [
          "grayoption",
          "flake1",
          "A salad [Requires $cost1$ leaves]"
        ],
        [
          "if",
          "$got$>=$cost2$"
        ],
        [
          "option",
          "make2",
          "Some booze [$cost2$ leaves]"
        ],
        [
          "else",
          ""
        ],
        [
          "grayoption",
          "flake1",
          "Some booze [Requires $cost2$ leaves]"
        ],
        [
          "if",
          "$got$>=$cost3$ && !hedgeleaf_gotweaponcheck"
        ],
        [
          "option",
          "make3",
          "A weapon [$cost3$ leaves]"
        ],
        [
          "if",
          "$got$<$cost3$ && !hedgeleaf_gotweaponcheck"
        ],
        [
          "grayoption",
          "flake1",
          "A weapon [Requires $cost3$ leaves]"
        ],
        [
          "if",
          "$got$>=$cost4$ && !hedgeleaf_gothatcheck"
        ],
        [
          "option",
          "make4",
          "A hat [$cost4$ leaves]"
        ],
        [
          "if",
          "$got$<$cost4$ && !hedgeleaf_gothatcheck"
        ],
        [
          "grayoption",
          "flake1",
          "A hat [Requires $cost4$ leaves]"
        ],
        [
          "option",
          "done",
          "No more leaving, I'm leaving"
        ]
      ],
      "make1": [
        [
          "removeitem",
          "hedgeleaf,$cost1$"
        ],
        [
          "checklocation",
          "Magic-Infused Leaf Crafting - 3 Leaves"
        ],
        [
          "addflag",
          "hedgeleaf_gotsaladcheck"
        ],
        [
          "goto",
          "start"
        ]
      ],
      "make3": [
        [
          "removeitem",
          "hedgeleaf,$cost3$"
        ],
        [
          "checklocation",
          "Magic-Infused Leaf Crafting - 5 Leaves"
        ],
        [
          "addflag",
          "hedgeleaf_gotweaponcheck"
        ],
        [
          "goto",
          "start"
        ]
      ],
      "make4": [
        [
          "removeitem",
          "hedgeleaf,$cost4$"
        ],
        [
          "checklocation",
          "Magic-Infused Leaf Crafting - 7 Leaves"
        ],
        [
          "addflag",
          "hedgeleaf_gothatcheck"
        ],
        [
          "goto",
          "start"
        ]
      ]
    },
    "item_jethrolocket": {
      "open": [
        [
          "cls"
        ],
        [
          "say",
          "You carefully pick the locket lock."
        ],
        [
          "removeitem",
          "quest_jethrolocket"
        ],
        [
          "removeitem",
          "needle"
        ],
        [
          "checklocation",
          "Opened Charred Locket"
        ],
        [
          "option",
          "done",
          "Okay"
        ]
      ]
    },
    "item_militarylockbox": {
      "picklock": [
        [
          "cls"
        ],
        [
          "removeitem",
          "needle"
        ],
        [
          "playsound",
          "Player_Use_Lockpick"
        ],
        [
          "consume"
        ],
        [
          "addstate",
          "returnscript,item_militarylockbox"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_army"
        ]
      ],
      "afterloot": []
    },
    "item_spiderparts_assembly": {
      "start": [
        [
          "if",
          "spiderparts_gotringcheck && spiderparts_gotpantscheck && spiderparts_gotaxecheck"
        ],
        [
          "goto",
          "madeall"
        ],
        [
          "addstate",
          "cost1,4"
        ],
        [
          "addstate",
          "cost2,6"
        ],
        [
          "addstate",
          "cost3,8"
        ],
        [
          "addstate",
          "got,=hasitem(spiderparts)"
        ],
        [
          "if",
          "$got$==1"
        ],
        [
          "say",
          "You have 1 horrible pile of spider parts."
        ],
        [
          "else",
          ""
        ],
        [
          "say",
          "You have $got$ horrible piles of spider parts."
        ],
        [
          "say",
          "What awful thing would you like to construct out of them?"
        ],
        [
          "if",
          "$got$>=$cost1$ && !spiderparts_gotringcheck"
        ],
        [
          "option",
          "ring",
          "A ring [$cost1$ piles]"
        ],
        [
          "if",
          "$got$<$cost1$ && !spiderparts_gotringcheck"
        ],
        [
          "grayoption",
          "gring",
          "A ring [Requires $cost1$ piles]"
        ],
        [
          "if",
          "$got$>=$cost2$ && !spiderparts_gotpantscheck"
        ],
        [
          "option",
          "pants",
          "Some pants [$cost2$ piles]"
        ],
        [
          "if",
          "$got$<$cost2$ && !spiderparts_gotpantscheck"
        ],
        [
          "grayoption",
          "gring",
          "Some pants [Requires $cost2$ piles]"
        ],
        [
          "if",
          "$got$>=$cost3$ && !spiderparts_gotaxecheck"
        ],
        [
          "option",
          "axe",
          "An axe [$cost3$ piles]"
        ],
        [
          "if",
          "$got$<$cost3$ && !spiderparts_gotaxecheck"
        ],
        [
          "grayoption",
          "gring",
          "An axe [Requires $cost3$ piles]"
        ],
        [
          "option",
          "done",
          "I changed my mind, this is very bad"
        ]
      ],
      "ring": [
        [
          "say",
          "You twist a bunch of the spider bits into a terrible ring!"
        ],
        [
          "removeitem",
          "spiderparts,$cost1$"
        ],
        [
          "checklocation",
          "Spider Part Crafting - 4 Piles"
        ],
        [
          "addflag",
          "spiderparts_gotringcheck"
        ],
        [
          "goto",
          "start"
        ]
      ],
      "pants": [
        [
          "say",
          "You make one of the worst pairs of pants you've ever seen."
        ],
        [
          "removeitem",
          "spiderparts,$cost2$"
        ],
        [
          "checklocation",
          "Spider Part Crafting - 6 Piles"
        ],
        [
          "addflag",
          "spiderparts_gotpantscheck"
        ],
        [
          "goto",
          "start"
        ]
      ],
      "axe": [
        [
          "say",
          "You attach some of the sharp bits to some of the blunt bits and make a terrifying axe."
        ],
        [
          "removeitem",
          "spiderparts,$cost3$"
        ],
        [
          "checklocation",
          "Spider Part Crafting - 8 Piles"
        ],
        [
          "addflag",
          "spiderparts_gotaxecheck"
        ],
        [
          "goto",
          "start"
        ]
      ],
      "madeall": [
        [
          "say",
          "You've already done much more work with these things than you could ever want."
        ],
        [
          "option",
          "done",
          "Thank god"
        ]
      ]
    },
    "item_tontinetreasure": {
      "invpopup": [
        [
          "say",
          "The chest contains a lone (but extremely large) gemstone and a document describing a tontine, which you apparently won despite not even signing up for it!"
        ],
        [
          "checklocation",
          "ReBoot Hill - Tontine Treasure Chest"
        ],
        [
          "consume"
        ],
        [
          "option",
          "done",
          "LOL"
        ]
      ]
    },
    "jewelrystore_shop": {
      "buyglasses": [
        [
          "leftspeak",
          "$lastoption$"
        ],
        [
          "if",
          "!hasskill(goblintongue)"
        ],
        [
          "say",
          "The clerk invites you to have a seat in their living area while Master Gerald gets to work cutting and grinding some glass into lenses and setting them in wire frames. You flip through an indecipherable goblin magazine while you wait."
        ],
        [
          "else",
          ""
        ],
        [
          "say",
          "The clerk invites you to have a seat in their living area while Master Gerald gets to work cutting and grinding some glass into lenses and setting them into wire frames. You flip through a goblin magazine while you wait; the lead article seems to be about social interaction with humans, and the value of occasionally pretending to be dumber than you actually are."
        ],
        [
          "rightportrait",
          "gobbo"
        ],
        [
          "if",
          "!hasskill(goblintongue)"
        ],
        [
          "rightsay",
          "%goblin_paragraph%"
        ],
        [
          "else",
          ""
        ],
        [
          "rightsay",
          "Okay, close enough for government working."
        ],
        [
          "rightportrait",
          "clerk"
        ],
        [
          "rightsay",
          "Master Gerald has completed your spectacles with the utmost degree of craftsmanship. Here you are!"
        ],
        [
          "addflag",
          "fort5_glassesquest,2"
        ],
        [
          "checklocation",
          "Jeweler's Cabin - Spectacles"
        ],
        [
          "addmeat",
          "-$cost$"
        ],
        [
          "sayoption",
          "done",
          "Thanks!"
        ]
      ],
      "hexgem": [
        [
          "say",
          "Master Gerald takes your polished thaumomorphic diorite and sets it in a fine ring for you.  He doesn't have to polish or cut it, because aeons of ley energy already did the job for him!  Maybe you should have given your $cost$ Meat to aeons of ley energy, not Gerald."
        ],
        [
          "removeitem",
          "sell_hexgem"
        ],
        [
          "addmeat",
          "-$cost$"
        ],
        [
          "checklocation",
          "Jeweler's Cabin - Diorite"
        ],
        [
          "goto",
          "opts"
        ]
      ],
      "stinkgem": [
        [
          "say",
          "Master Gerald takes your effluvious emerald, cuts and polishes it, and sets it in a fine ring for you."
        ],
        [
          "removeitem",
          "sell_stinkgem"
        ],
        [
          "addmeat",
          "-$cost$"
        ],
        [
          "checklocation",
          "Jeweler's Cabin - Emerald"
        ],
        [
          "goto",
          "opts"
        ]
      ],
      "cowgem": [
        [
          "say",
          "Master Gerald takes your cowseye, cuts and polishes it, and sets it in a fine ring for you."
        ],
        [
          "removeitem",
          "sell_cowgem"
        ],
        [
          "addmeat",
          "-$cost$"
        ],
        [
          "checklocation",
          "Jeweler's Cabin - Cowseye"
        ],
        [
          "goto",
          "opts"
        ]
      ],
      "sapphiregem": [
        [
          "say",
          "Master Gerald takes your cool sapphire, cuts and polishes it, and sets it in a fine ring for you."
        ],
        [
          "removeitem",
          "sell_sapphiregem"
        ],
        [
          "addmeat",
          "-$cost$"
        ],
        [
          "checklocation",
          "Jeweler's Cabin - Sapphire"
        ],
        [
          "goto",
          "opts"
        ]
      ],
      "tontinegem": [
        [
          "say",
          "Master Gerald takes your unbreakable ruby, cuts and polishes it, and sets it in a fine ring for you."
        ],
        [
          "removeitem",
          "sell_tontinegem"
        ],
        [
          "addmeat",
          "-$cost$"
        ],
        [
          "checklocation",
          "Jeweler's Cabin - Ruby"
        ],
        [
          "goto",
          "opts"
        ]
      ],
      "coalgem": [
        [
          "say",
          "Master Gerald takes your superdense coal, cuts and polishes it, and sets it in a fine ring for you."
        ],
        [
          "removeitem",
          "sell_coalgem"
        ],
        [
          "addmeat",
          "-$cost$"
        ],
        [
          "checklocation",
          "Jeweler's Cabin - Coal"
        ],
        [
          "goto",
          "opts"
        ]
      ],
      "silicongem": [
        [
          "say",
          "Master Gerald takes your strange silvery crystal, cuts and polishes it, and sets it in a fine ring for you."
        ],
        [
          "removeitem",
          "sell_silicongem"
        ],
        [
          "addmeat",
          "-$cost$"
        ],
        [
          "checklocation",
          "Jeweler's Cabin - Silicon"
        ],
        [
          "goto",
          "opts"
        ]
      ],
      "diamondgem": [
        [
          "say",
          "Master Gerald takes your massive diamond, cuts and polishes it, and sets it in a fine ring for you."
        ],
        [
          "removeitem",
          "sell_diamondgem"
        ],
        [
          "addmeat",
          "-$cost$"
        ],
        [
          "checklocation",
          "Jeweler's Cabin - Diamond"
        ],
        [
          "goto",
          "opts"
        ]
      ]
    },
    "medicineshow_bookshelf": {
      "e": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "The Old Medicine Show - Bookcase"
        ]
      ]
    },
    "medicineshow_nightstand": {
      "e": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "It's full of old snake pieces!"
        ],
        [
          "checklocation",
          "The Old Medicine Show - Nightstand (Item 1)"
        ],
        [
          "checklocation",
          "The Old Medicine Show - Nightstand (Item 2)"
        ],
        [
          "checklocation",
          "The Old Medicine Show - Nightstand (Item 3)"
        ]
      ]
    },
    "mine1_beaniron1": {
      "popup": [
        [
          "say",
          "You sense a deposit of bean iron!"
        ],
        [
          "if",
          "hasitem(pick)"
        ],
        [
          "option",
          "pickit",
          "Mine it [pickaxe]"
        ],
        [
          "else",
          ""
        ],
        [
          "say",
          "Unfortunately, you are sans pickaxe."
        ]
      ],
      "pickit": [
        [
          "cls"
        ],
        [
          "say",
          "There we go!"
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "Snakepit Mine - Bean-Iron Deposit"
        ]
      ]
    },
    "mine1_crate": {
      "open": [
        [
          "markused"
        ],
        [
          "cls"
        ],
        [
          "addstate",
          "returnscript,mine1_crate"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_mine"
        ]
      ],
      "afterloot": []
    },
    "mine1_crate1": {
      "open": [
        [
          "markused"
        ],
        [
          "cls"
        ],
        [
          "addstate",
          "returnscript,mine1_crate1"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_mine"
        ]
      ],
      "afterloot": []
    },
    "mine1_pickpile": {
      "get": [
        [
          "markused"
        ],
        [
          "cls"
        ],
        [
          "checklocation",
          "Snakepit Mine - The Pick in the Stone"
        ]
      ]
    },
    "mine2_beaniron1": {
      "popup": [
        [
          "say",
          "You sense a deposit of bean iron!"
        ],
        [
          "if",
          "hasitem(pick)"
        ],
        [
          "option",
          "pickit",
          "Mine it [pickaxe]"
        ],
        [
          "else",
          ""
        ],
        [
          "say",
          "Unfortunately, you are sans pickaxe."
        ]
      ],
      "pickit": [
        [
          "cls"
        ],
        [
          "say",
          "There we go!"
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "Kole Ridge Mine (Level 2) - Bean-Iron Deposit"
        ]
      ]
    },
    "mine2_bonepile": {
      "get": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "Kole Ridge Mine (Level 3) - Pick-Head"
        ]
      ]
    },
    "mine2_curlyhole": {
      "dig": [
        [
          "cls"
        ],
        [
          "playsound",
          "Player_Use_Shovel"
        ],
        [
          "say",
          "Weird.  There was a compass buried there."
        ],
        [
          "checklocation",
          "Kole Ridge Mine (Level 2) - Triangular Stones"
        ],
        [
          "markused"
        ]
      ]
    },
    "mine2_locker": {
      "open1": [
        [
          "addflag",
          "mine2_locker1"
        ],
        [
          "say",
          "The locker contains one of those mining helmets with a lamp on it and a bottle of laudanum."
        ],
        [
          "checklocation",
          "Kole Ridge Mine - First Locker (Item 1)"
        ],
        [
          "checklocation",
          "Kole Ridge Mine - First Locker (Item 2)"
        ],
        [
          "option",
          "done",
          "Okay"
        ]
      ]
    },
    "mine3_crate": {
      "open": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "addstate",
          "returnscript,mine3_crate"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_mine"
        ]
      ],
      "afterloot": []
    },
    "mine3_emerald": {
      "e": [
        [
          "cls"
        ],
        [
          "playsound",
          "Player_Use_Pickaxe"
        ],
        [
          "say",
          "Pick pick pick!"
        ],
        [
          "checklocation",
          "Lost Dutch Oven Mine (Pit) - Emerald Rock"
        ],
        [
          "addflag",
          "mine3_gotgem"
        ]
      ]
    },
    "mine3_lockers": {
      "open": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "Lost Dutch Oven Mine (Level 1) - Lockers (Item 1)"
        ],
        [
          "checklocation",
          "Lost Dutch Oven Mine (Level 1) - Lockers (Item 2)"
        ],
        [
          "say",
          "Heh.  Could've used this five minutes ago."
        ]
      ]
    },
    "mine3_sluice": {
      "e": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "You tighten the loose screws, and some ore gets jarred loose from upsluice."
        ],
        [
          "checklocation",
          "Lost Dutch Oven Mine - Sluice"
        ],
        [
          "addxp",
          "5"
        ]
      ]
    },
    "mine3_spittoon": {
      "seven": [
        [
          "say",
          "You pull the world's most disgusting pair of pants out of the spittoon, and jump back as the hole at the spittoon's bottom, now unplugged, begins to leak steaming filth."
        ],
        [
          "say",
          "Congratulations. You are now the proud owner of the worst object I've ever been paid to think about, narrowly defeating a leather bondage harness made from the skin of a clown."
        ],
        [
          "checklocation",
          "Lost Dutch Oven Mine (Level 1) - Spittoon"
        ],
        [
          "incflag",
          "spittoonsopen,1"
        ],
        [
          "markused"
        ],
        [
          "option",
          "done",
          "Hooray!"
        ]
      ]
    },
    "mine4_beaniron2": {
      "popup": [
        [
          "say",
          "You sense a deposit of bean iron!"
        ],
        [
          "if",
          "hasitem(pick)"
        ],
        [
          "option",
          "pickit",
          "Mine it [pickaxe]"
        ],
        [
          "else",
          ""
        ],
        [
          "say",
          "Unfortunately, you are sans pickaxe."
        ]
      ],
      "pickit": [
        [
          "cls"
        ],
        [
          "playsound",
          "Player_Use_Pickaxe"
        ],
        [
          "say",
          "There we go!"
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "Jumbleneck Mine (Left Tunnel) - Bean-Iron Deposit"
        ]
      ]
    },
    "mine4_crate": {
      "take": [
        [
          "cls"
        ],
        [
          "if",
          "mine4_gotdyn"
        ],
        [
          "goto",
          "nope"
        ],
        [
          "say",
          "You pick up a stick of old dynamite. I don't recommend you do a lot of hopping up and down while you're carrying that."
        ],
        [
          "checklocation",
          "Jumbleneck Mine (Left Tunnel) - Dynamite Crate"
        ],
        [
          "addflag",
          "mine4_gotdyn"
        ]
      ]
    },
    "mine4_idol": {
      "take": [
        [
          "checklocation",
          "Jumbleneck Mine (Right Tunnel) - Idol"
        ],
        [
          "addflag",
          "mine4_tookidol,1"
        ],
        [
          "if",
          "pete"
        ],
        [
          "queue"
        ],
        [
          "runscript",
          "mine4_idolpete"
        ],
        [
          "say",
          "You pick up the statuette. It's made of silver, and the tarnish and darkness make it hard to tell what it's meant to depict."
        ]
      ]
    },
    "mine4_lunchbox": {
      "open": [
        [
          "cls"
        ],
        [
          "say",
          "Pretty much everything inside has crumbled into dust, except for a waxed-paper sandwich bag and some raisins that probably weren't intended to become raisins."
        ],
        [
          "Jumbleneck Mine (Left Tunnel) - Lunchbox",
          "quest_baggie"
        ],
        [
          "additem",
          "food_raisins"
        ],
        [
          "markused"
        ]
      ]
    },
    "mine4_office_desk": {
      "rummage": [
        [
          "cls"
        ],
        [
          "say",
          "You find some old jerky and a key. Nice!"
        ],
        [
          "additem",
          "food_jerky"
        ],
        [
          "checklocation",
          "Jumbleneck Mine Foreman's Office - Desk"
        ],
        [
          "addflag",
          "mine4_desk_empty,1"
        ]
      ]
    },
    "mine4_office_hrack": {
      "take": [
        [
          "cls"
        ],
        [
          "addflag",
          "mine4_hatrack,1"
        ],
        [
          "say",
          "Yoink."
        ],
        [
          "checklocation",
          "Jumbleneck Mine Foreman's Office - Hatrack"
        ]
      ]
    },
    "mine4_office_looksafe": {
      "crack": [
        [
          "playsound",
          "opensafe"
        ],
        [
          "say",
          "You press your ear up against the safe door and slowly turn the dial. Eventually you manage to pop it open."
        ],
        [
          "checklocation",
          "Jumbleneck Mine Foreman's Office - Safe (Item 1)"
        ],
        [
          "checklocation",
          "Jumbleneck Mine Foreman's Office - Safe (Item 2)"
        ],
        [
          "addflag",
          "mine4_safeopen,1"
        ],
        [
          "option",
          "done",
          "Score!"
        ]
      ],
      "openit": [
        [
          "say",
          "You spin the dial to the combination the ghost told you, and the safe door swings open."
        ],
        [
          "checklocation",
          "Jumbleneck Mine Foreman's Office - Safe (Item 1)"
        ],
        [
          "checklocation",
          "Jumbleneck Mine Foreman's Office - Safe (Item 2)"
        ],
        [
          "addflag",
          "mine4_safeopen,1"
        ],
        [
          "option",
          "done",
          "Score!"
        ]
      ]
    },
    "mine4_pickaxe": {
      "pickup": [
        [
          "cls"
        ],
        [
          "say",
          "Picked."
        ],
        [
          "checklocation",
          "Jumbleneck Mine (Inside) - The Pick in the Stone"
        ],
        [
          "markused"
        ]
      ]
    },
    "mine4_top_barrel": {
      "take": [
        [
          "cls"
        ],
        [
          "if",
          "!hasitem(quest_baggie) && !jumbleneckmine_gotgreasecheck"
        ],
        [
          "say",
          "What, just grab a handful? No."
        ],
        [
          "if",
          "hasitem(quest_baggie) && !jumbleneckmine_gotgreasecheck"
        ],
        [
          "goto",
          "getgrease"
        ],
        [
          "if",
          "jumbleneckmine_gotgreasecheck"
        ],
        [
          "say",
          "You have plenty of that already."
        ]
      ],
      "getgrease": [
        [
          "say",
          "You fill your waxed-paper sandwich bag with old grease. Hopefully this will come in handy very soon, so you can stop carrying it around."
        ],
        [
          "checklocation",
          "Jumbleneck Mine - Grease Barrel"
        ],
        [
          "removeitem",
          "quest_baggie"
        ]
      ]
    },
    "mine4_top_pile2": {
      "findit": [
        [
          "say",
          "Whoa, uh... there's a human skull hidden in this rock pile. That's a little ominous."
        ],
        [
          "checklocation",
          "Jumbleneck Mine - Rock Pile By Elevator"
        ],
        [
          "addflag",
          "mine4_skullfind,1"
        ],
        [
          "option",
          "done",
          "Yikes"
        ]
      ]
    },
    "mine5_beaniron2": {
      "popup": [
        [
          "say",
          "You sense a deposit of bean iron!"
        ],
        [
          "if",
          "hasitem(pick)"
        ],
        [
          "option",
          "pickit",
          "Mine it [pickaxe]"
        ],
        [
          "else",
          ""
        ],
        [
          "say",
          "Unfortunately, you are sans pickaxe."
        ]
      ],
      "pickit": [
        [
          "cls"
        ],
        [
          "playsound",
          "Player_Use_Pickaxe"
        ],
        [
          "say",
          "There we go!"
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "Soupstock Lode (Level 1) - Bean-Iron Deposit (Bottom Left)"
        ]
      ]
    },
    "mine5_elvchest": {
      "unlock": [
        [
          "particleburstwaa",
          "chest,burst_elvdespawnup,50,15"
        ],
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "El Vibrato Chamber (Soupstock Lode) - Chest"
        ]
      ]
    },
    "mine5_knapsack": {
      "dig": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "It's mostly filled with trash, but you do find a spooky white mask. Weird."
        ],
        [
          "checklocation",
          "Soupstock Lode (Elevator Room) - Knapsack"
        ]
      ]
    },
    "mine5_lockers": {
      "open": [
        [
          "markused"
        ],
        [
          "cls"
        ],
        [
          "say",
          "You find a few worthwhile things."
        ],
        [
          "addstate",
          "returnscript,mine5_lockers"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_mine"
        ]
      ],
      "afterloot": []
    },
    "mine5_workbench": {
      "picklock": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "removeitem",
          "needle"
        ],
        [
          "playsound",
          "Player_Use_Lockpick"
        ],
        [
          "say",
          "Nice work!  The toolbox is, unsurprisingly, full of tools."
        ],
        [
          "checklocation",
          "Soupstock Lode (Level 1) - Workbench Toolbox (Item 1)"
        ],
        [
          "checklocation",
          "Soupstock Lode (Level 1) - Workbench Toolbox (Item 2)"
        ]
      ]
    },
    "mine6_beaniron2_level2": {
      "popup": [
        [
          "say",
          "You sense a deposit of bean iron!"
        ],
        [
          "if",
          "hasitem(pick)"
        ],
        [
          "option",
          "pickit",
          "Mine it [pickaxe]"
        ],
        [
          "else",
          ""
        ],
        [
          "say",
          "Unfortunately, you are sans pickaxe."
        ]
      ],
      "pickit": [
        [
          "cls"
        ],
        [
          "playsound",
          "Player_Use_Pickaxe"
        ],
        [
          "say",
          "There we go!"
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "Madness Maw Mine (Level 2) - Bean-Iron Deposit"
        ]
      ]
    },
    "mine6_beaniron2_level4": {
      "popup": [
        [
          "say",
          "You sense a deposit of bean iron!"
        ],
        [
          "if",
          "hasitem(pick)"
        ],
        [
          "option",
          "pickit",
          "Mine it [pickaxe]"
        ],
        [
          "else",
          ""
        ],
        [
          "say",
          "Unfortunately, you are sans pickaxe."
        ]
      ],
      "pickit": [
        [
          "cls"
        ],
        [
          "playsound",
          "Player_Use_Pickaxe"
        ],
        [
          "say",
          "There we go!"
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "Madness Maw Mine (Level 4) - Bean-Iron Deposit"
        ]
      ]
    },
    "mine6_curlynightstand": {
      "e": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "Hey, there's a map in the drawer!"
        ],
        [
          "checklocation",
          "Madness Maw Mine (Curly's Cave) - Nightstand"
        ]
      ]
    },
    "mine6_curlypie": {
      "e": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "if",
          "hasflag(fort1_generalgob)==2"
        ],
        [
          "goto",
          "gobgotit"
        ],
        [
          "checklocation",
          "Madness Maw Mine (Curly's Cave) - Pie Safe"
        ],
        [
          "goto",
          "donewithpie"
        ]
      ],
      "gobgotit": [
        [
          "say",
          "Looks like that pie-shootin' goblin got here first."
        ],
        [
          "checklocation",
          "Madness Maw Mine (Curly's Cave) - Pie Safe"
        ],
        [
          "goto",
          "donewithpie"
        ]
      ]
    },
    "mine6_elvcardtable": {
      "take": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "They're full of holes!"
        ],
        [
          "checklocation",
          "El Vibrato Outpost (Madness Maw Mine) - Cards"
        ]
      ]
    },
    "mine6_elvtrashpile": {
      "scrounge": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "El Vibrato Outpost (Madness Maw Mine) - Trash Pile"
        ]
      ]
    },
    "mine6_elvvending": {
      "start": [
        [
          "say",
          "The screen on this machine says ^CLOTHING FABRICATION^translate_elvibrato^"
        ],
        [
          "if",
          "!hasflag(madnessmawmine_vendingbuttonsused)"
        ],
        [
          "say",
          "There are four buttons."
        ],
        [
          "if",
          "madnessmawmine_vendingbuttonsused == 1"
        ],
        [
          "say",
          "There are three buttons you haven't tried."
        ],
        [
          "if",
          "madnessmawmine_vendingbuttonsused == 2"
        ],
        [
          "say",
          "There are two buttons left."
        ],
        [
          "if",
          "madnessmawmine_vendingbuttonsused == 3"
        ],
        [
          "say",
          "There's one last button to press."
        ],
        [
          "if",
          "madnessmawmine_vendingbuttonsused == 4"
        ],
        [
          "say",
          "You've gotten everything you need from this machine."
        ],
        [
          "if",
          "!madnessmawmine_vending_gothatcheck"
        ],
        [
          "option",
          "hat",
          "^HEADWEAR FABRICATION^translate_elvibrato^"
        ],
        [
          "if",
          "!madnessmawmine_vending_gotheadbandcheck"
        ],
        [
          "option",
          "hat2",
          "^ANTIPSYCHOTIC HEADWEAR FABRICATION^translate_elvibrato^"
        ],
        [
          "if",
          "!madnessmawmine_vending_gotpantscheck"
        ],
        [
          "option",
          "pants",
          "^LEGSWEAR FABRICATION^translate_elvibrato^"
        ],
        [
          "if",
          "!madnessmawmine_vending_gotbootscheck"
        ],
        [
          "option",
          "boots",
          "^FOOTWEAR FABRICATION^translate_elvibrato^"
        ],
        [
          "option",
          "done",
          "Leave"
        ]
      ],
      "hat": [
        [
          "if",
          "hasitem(elv_scrap)<10"
        ],
        [
          "goto",
          "notenough"
        ],
        [
          "say",
          "The machine emits a noise like a duck and a slot opens.  The El Vibrato scraps in your pack vibrate, so you cram some of them in the hole.  After ten, the slot closes and reopens, having converted your garbage into a hat!"
        ],
        [
          "removeitem",
          "elv_scrap,10"
        ],
        [
          "checklocation",
          "El Vibrato Outpost (Madness Maw Mine) - Vending Machine (SOMFUKRO)"
        ],
        [
          "addflag",
          "madnessmawmine_vending_gothatcheck"
        ],
        [
          "incflag",
          "madnessmawmine_vendingbuttonsused"
        ],
        [
          "option",
          "done",
          "Nice"
        ]
      ],
      "hat2": [
        [
          "if",
          "hasitem(elv_scrap)<10"
        ],
        [
          "goto",
          "notenough"
        ],
        [
          "say",
          "The machine emits a noise like a duck and a slot opens.  The El Vibrato scraps in your pack vibrate, so you cram some of them in the hole.  After ten, the slot closes and reopens, having converted your garbage into one of those headbands!"
        ],
        [
          "removeitem",
          "elv_scrap,10"
        ],
        [
          "checklocation",
          "El Vibrato Outpost (Madness Maw Mine) - Vending Machine (SOMZAKBUNOK)"
        ],
        [
          "addflag",
          "madnessmawmine_vending_gotheadbandcheck"
        ],
        [
          "incflag",
          "madnessmawmine_vendingbuttonsused"
        ],
        [
          "option",
          "done",
          "Nice"
        ]
      ],
      "pants": [
        [
          "if",
          "hasitem(elv_scrap)<10"
        ],
        [
          "goto",
          "notenough"
        ],
        [
          "say",
          "The machine emits a noise like a duck and a slot opens.  The El Vibrato scraps in your pack vibrate, so you cram some of them in the hole.  After ten, the slot closes and reopens, having converted your garbage into pants!"
        ],
        [
          "removeitem",
          "elv_scrap,10"
        ],
        [
          "checklocation",
          "El Vibrato Outpost (Madness Maw Mine) - Vending Machine (ZEVENOKKRO)"
        ],
        [
          "addflag",
          "madnessmawmine_vending_gotpantscheck"
        ],
        [
          "incflag",
          "madnessmawmine_vendingbuttonsused"
        ],
        [
          "option",
          "done",
          "Nice"
        ]
      ],
      "boots": [
        [
          "if",
          "hasitem(elv_scrap)<10"
        ],
        [
          "goto",
          "notenough"
        ],
        [
          "say",
          "The machine emits a noise like a duck and a slot opens.  The El Vibrato scraps in your pack vibrate, so you cram some of them in the hole.  After ten, the slot closes and reopens, having converted your garbage into boots!"
        ],
        [
          "removeitem",
          "elv_scrap,10"
        ],
        [
          "checklocation",
          "El Vibrato Outpost (Madness Maw Mine) - Vending Machine (BUKUZKRO)"
        ],
        [
          "addflag",
          "madnessmawmine_vending_gotbootscheck"
        ],
        [
          "incflag",
          "madnessmawmine_vendingbuttonsused"
        ],
        [
          "option",
          "done",
          "Nice"
        ]
      ]
    },
    "mine6_fusetable": {
      "take": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "El Vibrato Outpost (Madness Maw Mine) - Cylinder"
        ],
        [
          "addflag",
          "mine6_gotfuse"
        ]
      ]
    },
    "mine6_talkcultist7": {
      "headband2": [
        [
          "leftsay",
          "Instructions to do what, exactly?"
        ],
        [
          "rightsay",
          "To dig. To free him. To... excuse me, I have to go freak out now."
        ],
        [
          "removeitem",
          "hat_elvheadband"
        ],
        [
          "addxp",
          "@xpreward_f@"
        ],
        [
          "incflag",
          "peoplehelped,1"
        ],
        [
          "incflag",
          "robertocultistsrescued"
        ],
        [
          "addflag",
          "mine6_cultist$cultist$gone"
        ],
        [
          "say",
          "He drops his mask on the ground and runs away."
        ],
        [
          "checklocation",
          "Madness Maw Mine (Level 3) - Head Cultist"
        ],
        [
          "sayoption",
          "done",
          "Okay, bye. Good luck!"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "addflag",
          "mine6_cultist7gone"
        ],
        [
          "say",
          "You beat up the cult leader and take his mask. Looks like you just got promoted!"
        ],
        [
          "addxp",
          "@xpreward_f@"
        ],
        [
          "checklocation",
          "Madness Maw Mine (Level 3) - Head Cultist"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "mine7_beaniron3_insidemain": {
      "popup": [
        [
          "say",
          "You sense a deposit of bean iron!"
        ],
        [
          "if",
          "hasitem(pick)"
        ],
        [
          "option",
          "pickit",
          "Mine it [pickaxe]"
        ],
        [
          "else",
          ""
        ],
        [
          "say",
          "Unfortunately, you are sans pickaxe."
        ]
      ],
      "pickit": [
        [
          "cls"
        ],
        [
          "playsound",
          "Player_Use_Pickaxe"
        ],
        [
          "say",
          "There we go!"
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "Abandoned Mine (Inside) - Bean-Iron Deposit"
        ]
      ]
    },
    "mine7_beaniron3_sidetunnel1": {
      "popup": [
        [
          "say",
          "You sense a deposit of bean iron!"
        ],
        [
          "if",
          "hasitem(pick)"
        ],
        [
          "option",
          "pickit",
          "Mine it [pickaxe]"
        ],
        [
          "else",
          ""
        ],
        [
          "say",
          "Unfortunately, you are sans pickaxe."
        ]
      ],
      "pickit": [
        [
          "cls"
        ],
        [
          "playsound",
          "Player_Use_Pickaxe"
        ],
        [
          "say",
          "There we go!"
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "Abandoned Mine (Side Tunnel 1) - Bean-Iron Deposit"
        ]
      ]
    },
    "mine7_beaniron3_sidetunnel2": {
      "popup": [
        [
          "say",
          "You sense a deposit of bean iron!"
        ],
        [
          "if",
          "hasitem(pick)"
        ],
        [
          "option",
          "pickit",
          "Mine it [pickaxe]"
        ],
        [
          "else",
          ""
        ],
        [
          "say",
          "Unfortunately, you are sans pickaxe."
        ]
      ],
      "pickit": [
        [
          "cls"
        ],
        [
          "playsound",
          "Player_Use_Pickaxe"
        ],
        [
          "say",
          "There we go!"
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "Abandoned Mine (Side Tunnel 2) - Bean-Iron Deposit"
        ]
      ]
    },
    "mine7_cardtable": {
      "take": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "They're full of holes!"
        ],
        [
          "checklocation",
          "El Vibrato Storage Room - Card Table (Item 1)"
        ],
        [
          "checklocation",
          "El Vibrato Storage Room - Card Table (Item 2)"
        ]
      ]
    },
    "mine7_drillmachine": {
      "e": [
        [
          "cls"
        ],
        [
          "say",
          "You grab the pointiest part of the machine."
        ],
        [
          "checklocation",
          "Abandoned Mine (Side Tunnel 2) - Drilling Machine"
        ],
        [
          "addflag",
          "geologistquest,8"
        ]
      ]
    },
    "mine7_drywasher": {
      "e": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "You scrub the machine down.  It doesn't look any better afterwards, but you do find some ore wedged in crannies here and there."
        ],
        [
          "checklocation",
          "Abandoned Mine - Drywasher"
        ],
        [
          "addxp",
          "10"
        ]
      ]
    },
    "mine7_elvchest": {
      "unlock": [
        [
          "particleburstwaa",
          "chest,burst_elvdespawnup,50,15"
        ],
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "addstate",
          "returnscript,mine7_elvchest"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_elv"
        ]
      ],
      "afterloot": []
    },
    "mine7_fusetable": {
      "take": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "addflag",
          "mine7_gotfuse"
        ],
        [
          "checklocation",
          "El Vibrato Storage Room - Cylinder"
        ]
      ]
    },
    "mine7_medicinecabinet": {
      "e": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "addstate",
          "returnscript,mine7_medicinecabinet"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_medical"
        ]
      ],
      "afterloot": []
    },
    "mine7_shinypile": {
      "e": [
        [
          "cls"
        ],
        [
          "checklocation",
          "Abandoned Mine - Rocks to Right of Entrance"
        ],
        [
          "addflag",
          "mine7_shinypile"
        ]
      ]
    },
    "mine7_stash": {
      "e": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "addstate",
          "returnscript,mine7_stash"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_mine"
        ]
      ],
      "afterloot": []
    },
    "mine8_beaniron3": {
      "popup": [
        [
          "say",
          "You sense a deposit of bean iron!"
        ],
        [
          "if",
          "hasitem(pick)"
        ],
        [
          "option",
          "pickit",
          "Mine it [pickaxe]"
        ],
        [
          "else",
          ""
        ],
        [
          "say",
          "Unfortunately, you are sans pickaxe."
        ]
      ],
      "pickit": [
        [
          "cls"
        ],
        [
          "playsound",
          "Player_Use_Pickaxe"
        ],
        [
          "say",
          "There we go!"
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "Deepest Delve Mine (Alt Entrance) - Bean-Iron Deposit"
        ]
      ]
    },
    "mine8_bracelet": {
      "e": [
        [
          "addflag",
          "mine8_gotbracelet"
        ],
        [
          "checklocation",
          "Deepest Delve Mine (Level 2) - Bracelet"
        ]
      ]
    },
    "mine8_coalsmasher": {
      "e2": [
        [
          "cls"
        ],
        [
          "playsound",
          "coalsmasher_smash"
        ],
        [
          "say",
          "The machine works its magic, and compresses the massive lump of coal into a much smaller lump of coal."
        ],
        [
          "addflag",
          "mine8_coalcart,3"
        ],
        [
          "checklocation",
          "Deepest Delve Mine - Coal Smasher 5000"
        ]
      ]
    },
    "mine8_l2altarpop": {
      "e": [
        [
          "cls"
        ],
        [
          "say",
          "You put the cross in your pack."
        ],
        [
          "checklocation",
          "Deepest Delve Mine (Level 2) - Cult Altar"
        ],
        [
          "addflag",
          "mine8_gotelvcross"
        ]
      ]
    },
    "mine8_partcrate": {
      "e": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "Huh.  All it had in it was a gas cap."
        ],
        [
          "checklocation",
          "Deepest Delve Mine (Alt Entrance) - Toolbox"
        ]
      ]
    },
    "mission1_nun": {
      "initstore": [
        [
          "addflag",
          "store_mission1"
        ],
        [
          "addnpcstoreitem",
          "mission1,combat_armyfirstaid,-1"
        ],
        [
          "addnpcstoreitem",
          "mission1,potion_bloodtonic,-1"
        ],
        [
          "addflag",
          "mission1_storeupdate,@day@"
        ],
        [
          "teleportplayer",
          "375,170"
        ],
        [
          "resetanimation",
          "player"
        ],
        [
          "resetanimation",
          "nun1"
        ],
        [
          "npcstore",
          "mission1,410,-10"
        ],
        [
          "exit"
        ]
      ]
    },
    "moonshinestill_usestill": {
      "getjar": [
        [
          "cls"
        ],
        [
          "checklocation",
          "Moonshine Still - Free Jar"
        ],
        [
          "addflag",
          "moonshinestill_first"
        ]
      ]
    },
    "necrotower_necromancer": {
      "annihilate3": [
        [
          "checklocation",
          "Necromancer's Tower - Necromancer Defeated"
        ],
        [
          "say",
          "You pick up his crown.  Funny.  There's nothing to it.  Why couldn't you see that before?"
        ],
        [
          "option",
          "necrodone",
          "Leave"
        ]
      ],
      "alicewins": [
        [
          "say",
          "Your feet feel like lead. You struggle to take a single step. And then another. Ever so slowly, you drag yourself away from the throne. The struggle takes years, decades, <i>eons</i>."
        ],
        [
          "say",
          "You barely hear Alice's shotgun. Mostly you hear the scream as the Necromancer's withered husk explodes into dust, and the dust takes on the shape of a wailing skull. And then the dust dissipates and is gone."
        ],
        [
          "checklocation",
          "Necromancer's Tower - Necromancer Defeated"
        ],
        [
          "say",
          "You collapse to the ground. Alice helps you to your feet, and examines your face."
        ],
        [
          "rightsay",
          "Mmm. Color's coming back a little. How you feeling?"
        ],
        [
          "sayoption",
          "alicewins2",
          "B... better?"
        ]
      ],
      "destroy": [
        [
          "tracking",
          "side_destroynecro"
        ],
        [
          "if",
          "alice"
        ],
        [
          "goto",
          "alicedestroy"
        ],
        [
          "else",
          ""
        ],
        [
          "say",
          "You puff a breath at the Necromancer and he crumbles to powder.  His crown hits the ground and bounces off of the throne's raised base, rolling to a stop at your feet."
        ],
        [
          "checklocation",
          "Necromancer's Tower - Necromancer Defeated"
        ],
        [
          "addflag",
          "necrotower_necromancer,2"
        ],
        [
          "addxp",
          "@xpreward_g@*9"
        ],
        [
          "option",
          "done",
          "Welp. So much for that, and good riddance."
        ]
      ],
      "alicedestroy": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftspeak",
          "Doc, you wanna do the honors?"
        ],
        [
          "rightpicture",
          "portrait_alice"
        ],
        [
          "rightspeak",
          "My pleasure."
        ],
        [
          "say",
          "She racks her shotgun and gives the wretched mummy both barrels. It explodes into dust, which dissipates with a sad whisper."
        ],
        [
          "rightsay",
          "Eat that, you old bastard. That's for Elliot."
        ],
        [
          "checklocation",
          "Necromancer's Tower - Necromancer Defeated"
        ],
        [
          "leftsay",
          "How's it feel?"
        ],
        [
          "rightsay",
          "Better. Much better."
        ],
        [
          "sayoption",
          "adestroy2",
          "So... now what?"
        ]
      ]
    },
    "postalstation_papers3": {
      "e": [
        [
          "cls"
        ],
        [
          "say",
          "Nothing interesting.  Oh, wait, there's actually a postcard in here that you could use."
        ],
        [
          "addflag",
          "postalstation_gotpostcard"
        ],
        [
          "checklocation",
          "Postal Way Station - Middle Newspaper Stack"
        ]
      ]
    },
    "postalstation_papers4": {
      "letter": [
        [
          "cls"
        ],
        [
          "say",
          "Oh hey, there's an undelivered letter underneath the stack."
        ],
        [
          "say",
          "It's addressed to Roy Bean."
        ],
        [
          "addflag",
          "postalstation_royletter"
        ],
        [
          "checklocation",
          "Postal Way Station - Top-Right Newspaper Stack"
        ],
        [
          "if",
          "!hasflag(map_roybean)"
        ],
        [
          "say",
          "You look at the address and jot it down on your map."
        ],
        [
          "if",
          "!hasflag(map_roybean)"
        ],
        [
          "mapunlock",
          "roybean,Roy Bean's House of Justice and Jellybeans"
        ],
        [
          "addstate",
          "maplocs,=countflags(map_)"
        ],
        [
          "if",
          "$maplocs$>36 && $maplocs$<40"
        ],
        [
          "giveachievement",
          "ach_37maplocs"
        ]
      ]
    },
    "professor_talk": {
      "intro3": [
        [
          "removeitem",
          "elv_introitem"
        ],
        [
          "rightsay",
          "Aha! As I suspected, this is one of their transponders. It detects other El Vibrato technology and homes in, you see. That'll be why it led you here, I've got a thing I've been trying to repair."
        ],
        [
          "say",
          "He tinkers around with the transponder for a bit and then plugs a strange stone marble into a socket on it."
        ],
        [
          "rightsay",
          "There you go! Good as new! Just swipe up or down to turn it on or off."
        ],
        [
          "checklocation",
          "The Perfessor's House - Show the Stone Arrow"
        ],
        [
          "sayoption",
          "intro4",
          "'Swipe'?"
        ]
      ]
    },
    "railcamp_rockremains": {
      "popup": [
        [
          "say",
          "The remains of your triumph over that crazy rock pile / guy."
        ],
        [
          "if",
          "hasflag(geologistquest)>3 && !hasflag(geologistquest_golem)"
        ],
        [
          "option",
          "e",
          "Grab a rock for Dr. Morton"
        ]
      ],
      "e": [
        [
          "cls"
        ],
        [
          "say",
          "You grab a rock, which you hope is sufficiently interesting."
        ],
        [
          "checklocation",
          "Railroad Camp (East) - Rock Monster's Remains (Dr. Morton's Quest)"
        ],
        [
          "addflag",
          "geologistquest_golem"
        ]
      ]
    },
    "ranch1_altar": {
      "getblood": [
        [
          "say",
          "A chill runs down your spine as you touch the goblet."
        ],
        [
          "checklocation",
          "Stearns Ranch Cellar - Blood Altar"
        ],
        [
          "addflag",
          "ranch1_altar,1"
        ],
        [
          "option",
          "done",
          "Ugh."
        ]
      ],
      "smash": [
        [
          "say",
          "You don't know what this is, but you know it's abominable.  You grab the goblet and smash it against the altar."
        ],
        [
          "say",
          "Everywhere the blood lands, cracks appear.  The altar groans as it crumbles into ruin.  In the rubble, something catches your eye, previously hidden beneath the unholy shrine."
        ],
        [
          "checklocation",
          "Stearns Ranch Cellar - Blood Altar"
        ],
        [
          "addflag",
          "ranch1_altar,2"
        ],
        [
          "addxp",
          "50"
        ],
        [
          "option",
          "done",
          "And how."
        ]
      ]
    },
    "ranch1_crate": {
      "open": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "addstate",
          "returnscript,ranch1_crate"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_ranch"
        ]
      ],
      "afterloot": []
    },
    "ranch1_flower": {
      "pick": [
        [
          "markused"
        ],
        [
          "cls"
        ],
        [
          "say",
          "Ow ow ow!"
        ],
        [
          "checklocation",
          "Stearns Ranch - Smoking Flower"
        ],
        [
          "exit"
        ]
      ]
    },
    "ranch1_hearth": {
      "take": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "You upend the pot into your pack."
        ],
        [
          "checklocation",
          "Stearns Ranch House - Pot"
        ]
      ]
    },
    "ranch1_jethrosbones": {
      "search": [
        [
          "cls"
        ],
        [
          "say",
          "You find a charred locket among the blackened bones."
        ],
        [
          "checklocation",
          "Stearns Ranch - Jethro's Bones"
        ],
        [
          "addflag",
          "ranch1_gotlocket"
        ],
        [
          "exit"
        ]
      ]
    },
    "ranch1_lockbox": {
      "picklock": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "playsound",
          "Player_Use_Lockpick"
        ],
        [
          "say",
          "You pick the lock and open the box."
        ],
        [
          "removeitem",
          "needle"
        ],
        [
          "say",
          "Ooh, a document!"
        ],
        [
          "checklocation",
          "Stearns Ranch House - Lockbox"
        ],
        [
          "exit"
        ]
      ]
    },
    "ranch1_outhouse": {
      "win": [
        [
          "addflag",
          "ranch1_pyrobove"
        ],
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "The outhouse is now safe as houses.  Outhouses."
        ],
        [
          "addxp",
          "@xpreward_a@"
        ],
        [
          "say",
          "By the soft light of the fading embers, you see a glint of light from below.  You hold your nose with one hand as you fish out your prize with the other."
        ],
        [
          "checklocation",
          "Stearns Ranch - Outhouse Beast Defeated"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "ranch1_safe": {
      "open": [
        [
          "cls"
        ],
        [
          "playsound",
          "opensafe"
        ],
        [
          "say",
          "You open the safe.  Somebody in the Stearns family was quite the investor, it appears!"
        ],
        [
          "checklocation",
          "Stearns Ranch Cellar - Safe"
        ],
        [
          "markused"
        ]
      ]
    },
    "ranch1_shelf": {
      "inv": [
        [
          "cls"
        ],
        [
          "say",
          "Your deft fingers find a hidden catch, and the back panel of the shelf slides away to reveal a secret compartment."
        ],
        [
          "say",
          "There's a book inside!"
        ],
        [
          "checklocation",
          "Stearns Ranch House - Burnt Bookshelf"
        ],
        [
          "addflag",
          "ranch1_marydiary"
        ]
      ]
    },
    "ranch2_crate": {
      "open": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "The stuff inside is unburnt! That's a pretty good crate."
        ],
        [
          "addstate",
          "returnscript,ranch2_crate"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_ranch"
        ]
      ],
      "afterloot": []
    },
    "ranch2_hippy1": {
      "opts": [
        [
          "if",
          "hasflag(ranch2_boughtremedy)"
        ],
        [
          "goto",
          "alreadybought"
        ],
        [
          "if",
          "meat>15"
        ],
        [
          "option",
          "buy",
          "Buy one [15 Meat]"
        ],
        [
          "else",
          ""
        ],
        [
          "grayoption",
          "booy",
          "Buy one [Requires 15 Meat]"
        ],
        [
          "option",
          "done",
          "Leave"
        ]
      ],
      "buy": [
        [
          "rightsay",
          "Hey, groovy. Thanks."
        ],
        [
          "addmeat",
          "-15"
        ],
        [
          "checklocation",
          "Lazy-A Dude Ranch - Purchased Herbal Remedy"
        ],
        [
          "addflag",
          "ranch2_boughtremedy"
        ],
        [
          "goto",
          "opts"
        ]
      ],
      "alreadybought": [
        [
          "say",
          "You don't feel the need to buy anything else."
        ],
        [
          "option",
          "done",
          "Leave"
        ]
      ]
    },
    "ranch2_hippy2": {
      "yesbane": [
        [
          "rightsay",
          "I sure do, man! Baled it up for ya and everything!"
        ],
        [
          "checklocation",
          "Lazy-A Dude Ranch - Cowsbane Harvest"
        ],
        [
          "addflag",
          "ranch2_fencequest,3"
        ],
        [
          "leftsay",
          "Great, thanks!"
        ],
        [
          "rightsay",
          "Boom shanka, man."
        ],
        [
          "option",
          "done",
          "Uh-huh!"
        ]
      ],
      "yeshat": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftspeak",
          "$lastoption$"
        ],
        [
          "rightportrait",
          "hippy2_nohat"
        ],
        [
          "rightsay",
          "Nice, man! Barter is like, commerce, man, except <i>natural</i>, can you dig it?"
        ],
        [
          "checklocation",
          "Lazy-A Dude Ranch - Dreads Dude Hat Trade"
        ],
        [
          "removeitem",
          "hat_oldmilitary"
        ],
        [
          "incflag",
          "peoplehelped,1"
        ],
        [
          "addflag",
          "ranch2_gothat,2"
        ],
        [
          "sayoption",
          "done",
          "Yeah, groovy."
        ]
      ]
    },
    "ranch3_crate": {
      "open": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "addstate",
          "returnscript,ranch3_crate"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_ranch"
        ]
      ],
      "afterloot": []
    },
    "ranch3_getmilk": {
      "get": [
        [
          "markused"
        ],
        [
          "cls"
        ],
        [
          "say",
          "You manage to gather up three jars worth."
        ],
        [
          "checklocation",
          "Butterfield Ranch Barn - Milk Shelf"
        ]
      ]
    },
    "ranch3_hearth": {
      "e": [
        [
          "cls"
        ],
        [
          "say",
          "Ow ow ow!"
        ],
        [
          "checklocation",
          "Butterfield Ranch - Fireplace"
        ],
        [
          "markused"
        ]
      ]
    },
    "ranch3_ropefence": {
      "take": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "Butterfield Ranch - Rope on Fence"
        ]
      ]
    },
    "ranch3_toybox": {
      "open": [
        [
          "cls"
        ],
        [
          "say",
          "It's full of toy skeletons!"
        ],
        [
          "checklocation",
          "Butterfield Ranch Barn - Toybox"
        ],
        [
          "markused"
        ]
      ]
    },
    "ranch4_bookshelf1": {
      "inv": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "A small diary is the only legible thing left on this shelf."
        ],
        [
          "checklocation",
          "Alexandria Ranch - Ruined Bookshelf (Left)"
        ]
      ]
    },
    "ranch4_bookshelf2": {
      "inv": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "You manage to extract one non-destroyed book from the collection."
        ],
        [
          "checklocation",
          "Alexandria Ranch - Ruined Bookshelf (Right)"
        ]
      ]
    },
    "ranch4_burntbooks": {
      "dig": [
        [
          "cls"
        ],
        [
          "if",
          "hasflag(breadwood_quest3)==1 && !alexandriaranch_gotbookpilecheck"
        ],
        [
          "goto",
          "getbook"
        ],
        [
          "else",
          ""
        ],
        [
          "say",
          "The books are wrecked.  The volumes are ruined.  The tomes are kaput."
        ]
      ],
      "getbook": [
        [
          "say",
          "You manage to find... part of the overdue book from the Breadwood library."
        ],
        [
          "checklocation",
          "Alexandria Ranch - Smoldering Book Pile"
        ]
      ]
    },
    "ranch4_case1": {
      "picklock": [
        [
          "cls"
        ],
        [
          "playsound",
          "Player_Use_Lockpick"
        ],
        [
          "say",
          "You make short work of the lock and grab the book."
        ],
        [
          "markused"
        ],
        [
          "removeitem",
          "needle"
        ],
        [
          "checklocation",
          "Alexandria Ranch Vault - Glass Case (Left)"
        ]
      ]
    },
    "ranch4_case2": {
      "picklock": [
        [
          "cls"
        ],
        [
          "playsound",
          "Player_Use_Lockpick"
        ],
        [
          "say",
          "You make short work of the lock and grab the book."
        ],
        [
          "markused"
        ],
        [
          "removeitem",
          "needle"
        ],
        [
          "checklocation",
          "Alexandria Ranch Vault - Glass Case (Middle)"
        ]
      ]
    },
    "ranch4_case3": {
      "picklock": [
        [
          "cls"
        ],
        [
          "playsound",
          "Player_Use_Lockpick"
        ],
        [
          "say",
          "You make short work of the lock and grab the book."
        ],
        [
          "markused"
        ],
        [
          "removeitem",
          "needle"
        ],
        [
          "checklocation",
          "Alexandria Ranch Vault - Glass Case (Right)"
        ]
      ]
    },
    "ranch4_shelf1": {
      "e": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "You choose the book with the most sensational-sounding title."
        ],
        [
          "checklocation",
          "Alexandria Ranch Vault - Left Bookshelf"
        ]
      ]
    },
    "ranch4_shelf2": {
      "e": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "You take the one that looks the most relevant to your experience."
        ],
        [
          "checklocation",
          "Alexandria Ranch Vault - Middle Bookshelf"
        ]
      ]
    },
    "ranch4_shelf3": {
      "e": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "You take the one that looks the most interesting."
        ],
        [
          "checklocation",
          "Alexandria Ranch Vault - Right Bookshelf"
        ]
      ]
    },
    "ranch5_animalskeleton": {
      "get": [
        [
          "cls"
        ],
        [
          "say",
          "You fold up the ape skeleton and stuff it in your pocket."
        ],
        [
          "checklocation",
          "Kellogg Ranch (Office) - Animal Skeleton"
        ],
        [
          "markused"
        ]
      ]
    },
    "ranch5_barbedwire": {
      "get": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "You stuff the coil of barbed wire into your pack. Maybe you can send it to a sick friend, or something."
        ],
        [
          "checklocation",
          "Kellogg Ranch (Barn) - Barbed Wire"
        ]
      ]
    },
    "ranch5_bed1": {
      "get": [
        [
          "cls"
        ],
        [
          "checklocation",
          "Kellogg Ranch (Dormitory) - Top-Left Bed"
        ],
        [
          "markused"
        ]
      ]
    },
    "ranch5_bed5": {
      "take": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "Kellogg Ranch (Dormitory) - Bottom-Middle Bed"
        ]
      ]
    },
    "ranch5_grainpiles": {
      "get": [
        [
          "addflag",
          "ranch5_gotgrain"
        ],
        [
          "checklocation",
          "Kellogg Ranch (Barn) - Grain Pile"
        ]
      ]
    },
    "ranch5_hiddenkeys": {
      "popup": [
        [
          "if",
          "kelloggranch_gothiddenkeycheck"
        ],
        [
          "goto",
          "alreadygot"
        ],
        [
          "say",
          "There's a loose board here with fingerprints on it..."
        ],
        [
          "if",
          "hasitem(crowbar)"
        ],
        [
          "option",
          "pry",
          "Pry it up [crowbar]"
        ],
        [
          "else",
          ""
        ],
        [
          "grayoption",
          "pref",
          "Pry it up [Requires crowbar]"
        ]
      ],
      "pry": [
        [
          "cls"
        ],
        [
          "say",
          "There's a keyring hidden under the board!"
        ],
        [
          "checklocation",
          "Kellogg Ranch (Main Building) - Loose Floorboard"
        ],
        [
          "addflag",
          "kelloggranch_gothiddenkeycheck"
        ]
      ]
    },
    "ranch5_kelloggdesk2": {
      "drawer1": [
        [
          "say",
          "You find a binder full of cryptic, messily-written notes, labeled \"KELLOGG'S GRAIN FLAKES PREPARATION.\""
        ],
        [
          "if",
          "kelloggranch_gotrecipecheck"
        ],
        [
          "goto",
          "alreadygotrecipe"
        ],
        [
          "say",
          "Interesting."
        ],
        [
          "if",
          "mysticality>=20"
        ],
        [
          "option",
          "decode",
          "Decode the recipe [20 Mysticality]"
        ],
        [
          "else",
          ""
        ],
        [
          "grayoption",
          "derchoad",
          "Decode the recipe [Requires 20 Mysticality]"
        ],
        [
          "option",
          "done",
          "Well, not really."
        ]
      ],
      "decode": [
        [
          "say",
          "You grab a sheet of paper and consolidate the crazy series of notes into a more-or-less straightforward recipe."
        ],
        [
          "checklocation",
          "Kellogg Ranch (Office) - Desk Drawer"
        ],
        [
          "addflag",
          "kelloggranch_gotrecipecheck"
        ],
        [
          "option",
          "done",
          "Excellent."
        ]
      ]
    },
    "ranch5_locker1": {
      "open": [
        [
          "cls"
        ],
        [
          "if",
          "hasflag(ranch5_locker1looted)"
        ],
        [
          "goto",
          "empty"
        ],
        [
          "say",
          "Looks like this one belonged to a cook."
        ],
        [
          "addflag",
          "ranch5_locker1looted"
        ],
        [
          "checklocation",
          "Kellogg Ranch (Dormitory) - First Locker (Item 1)"
        ],
        [
          "checklocation",
          "Kellogg Ranch (Dormitory) - First Locker (Item 2)"
        ]
      ]
    },
    "ranch5_locker2": {
      "open": [
        [
          "cls"
        ],
        [
          "if",
          "hasflag(ranch5_locker2looted)"
        ],
        [
          "goto",
          "empty"
        ],
        [
          "addflag",
          "ranch5_locker2looted"
        ],
        [
          "say",
          "Looks like this person had a secret stash of candy in addition to an earnest commitment to fitness."
        ],
        [
          "additem",
          "potion_candy4,rand(2,3)"
        ],
        [
          "additem",
          "potion_candy5,rand(2,3)"
        ],
        [
          "checklocation",
          "Kellogg Ranch (Dormitory) - Second Locker"
        ]
      ]
    },
    "ranch5_locker4": {
      "open": [
        [
          "cls"
        ],
        [
          "if",
          "hasflag(ranch5_locker4looted)"
        ],
        [
          "goto",
          "empty"
        ],
        [
          "addflag",
          "ranch5_locker4looted"
        ],
        [
          "say",
          "There's nothing in this locker but a sewing kit.  Needles and thread."
        ],
        [
          "say",
          "You take the needles and leave the thread."
        ],
        [
          "checklocation",
          "Kellogg Ranch (Dormitory) - Fourth Locker"
        ]
      ]
    },
    "ranch5_locker5": {
      "open": [
        [
          "cls"
        ],
        [
          "if",
          "hasflag(ranch5_locker5looted)"
        ],
        [
          "goto",
          "empty"
        ],
        [
          "addflag",
          "ranch5_locker5looted"
        ],
        [
          "say",
          "Whoever had this locker was apparently hiding some... performance enhancers."
        ],
        [
          "checklocation",
          "Kellogg Ranch (Dormitory) - Fifth Locker"
        ]
      ]
    },
    "ranch5_locker6": {
      "open": [
        [
          "cls"
        ],
        [
          "if",
          "hasflag(ranch5_locker6looted)"
        ],
        [
          "goto",
          "empty"
        ],
        [
          "addflag",
          "ranch5_locker6looted"
        ],
        [
          "say",
          "The locker is filled with dirty laundry.  Assuming that the laundry at the very bottom of the pile was hidden there on purpose because it's really important, you grab it."
        ],
        [
          "checklocation",
          "Kellogg Ranch (Dormitory) - Sixth Locker (Item 1)"
        ],
        [
          "checklocation",
          "Kellogg Ranch (Dormitory) - Sixth Locker (Item 2)"
        ]
      ]
    },
    "ranch5_oven2": {
      "finish": [
        [
          "say",
          "You set the time knob to $time$ minutes and wait for the oven to finish."
        ],
        [
          "addstate",
          "total,=$temp$*$time$"
        ],
        [
          "if",
          "$total$<5120"
        ],
        [
          "goto",
          "toocold"
        ],
        [
          "if",
          "$total$>5120"
        ],
        [
          "goto",
          "toohot"
        ],
        [
          "say",
          "The oven dings and a perfectly-cooked tray of toasty flakes emerges from the slot."
        ],
        [
          "checklocation",
          "Kellogg Ranch (Kitchen) - Dough Baked"
        ],
        [
          "option",
          "done",
          "They're Grrrreat!"
        ]
      ]
    },
    "ranch6_bookshelf": {
      "e": [
        [
          "cls"
        ],
        [
          "markused"
        ],
        [
          "say",
          "You find a single mostly-unburnt book."
        ],
        [
          "checklocation",
          "Hellstrom Ranch (Barn) - Bookshelf"
        ]
      ]
    },
    "randomencounter": {
      "start": [
        [
          "if",
          "matchstring(@regionto@,bs)"
        ],
        [
          "goto",
          "realdone"
        ],
        [
          "if",
          "!wandering && matchstring(@travelfrom@,@travelto@)"
        ],
        [
          "goto",
          "realdone"
        ],
        [
          "addstate",
          "skipchance,5"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_nores)"
        ],
        [
          "incstate",
          "skipchance,25"
        ],
        [
          "if",
          "hasflag(randomencounters_@regionto@)>5"
        ],
        [
          "incstate",
          "skipchance,10"
        ],
        [
          "if",
          "hasflag(randomencounters_@regionto@)>10"
        ],
        [
          "incstate",
          "skipchance,10"
        ],
        [
          "if",
          "hasflag(randomencounters_@regionto@)>15"
        ],
        [
          "incstate",
          "skipchance,10"
        ],
        [
          "if",
          "hasflag(randomencounters_@regionto@)>20"
        ],
        [
          "incstate",
          "skipchance,10"
        ],
        [
          "if",
          "hasflag(randomencounters_@regionto@)>25"
        ],
        [
          "incstate",
          "skipchance,10"
        ],
        [
          "if",
          "hasflag(randomencounters_@regionto@)>30"
        ],
        [
          "incstate",
          "skipchance,10"
        ],
        [
          "if",
          "rand(1,100)<=$skipchance$ && !wandering"
        ],
        [
          "goto",
          "realdone"
        ],
        [
          "incflag",
          "randomencounters,1"
        ],
        [
          "incflag",
          "randomencounters_@regionto@,1"
        ],
        [
          "if",
          "!hasflag(visited_@regionto@)"
        ],
        [
          "addflag",
          "visited_@regionto@,1"
        ],
        [
          "if",
          "pete && !matchstring(@regionto@,a) && hasflag(randomencounters_@regionto@)>rand(1,2) && !hasflag(re_petelevelup_@regionto@)"
        ],
        [
          "runscript",
          "re_petelevelup_@regionto@"
        ],
        [
          "if",
          "@randomencounters@==7"
        ],
        [
          "goto",
          "skillbook1"
        ],
        [
          "if",
          "@randomencounters@==9"
        ],
        [
          "goto",
          "meateor"
        ],
        [
          "if",
          "@randomencounters@==13"
        ],
        [
          "goto",
          "necrobook"
        ],
        [
          "if",
          "@randomencounters@==21"
        ],
        [
          "goto",
          "skillbook2"
        ],
        [
          "if",
          "divisible(@randomencounters@,5)"
        ],
        [
          "runscript",
          "mapdiscovery_@regionto@"
        ],
        [
          "if",
          "wandering && rand(1,2)==1"
        ],
        [
          "runscript",
          "mapdiscovery_@regionto@"
        ],
        [
          "runscript",
          "randomevent_@regionto@"
        ],
        [
          "say",
          "Fell through without picking an encounter.  This should never happen."
        ],
        [
          "option",
          "done",
          "Something went wrong"
        ]
      ]
    },
    "randomevent_a": {
      "afterpalehorse": [
        [
          "if",
          "!hasflag(re_walkingstupid)"
        ],
        [
          "pushrandom",
          "walkingstupid"
        ],
        [
          "goto",
          "aftercrazyhorse"
        ]
      ],
      "afterdarkhorse": [
        [
          "if",
          "!hasflag(re_goblinambush)"
        ],
        [
          "pushrandom",
          "goblinambush"
        ],
        [
          "if",
          "!hasflag(re_skeletonambush)"
        ],
        [
          "pushrandom",
          "skeletonambush"
        ],
        [
          "if",
          "!hasflag(re_banditambush)"
        ],
        [
          "pushrandom",
          "banditambush"
        ],
        [
          "if",
          "!hasflag(re_cowambush)"
        ],
        [
          "pushrandom",
          "cowambush"
        ],
        [
          "pushrandom",
          "undeada1"
        ],
        [
          "if",
          "palehorse"
        ],
        [
          "pushrandom",
          "undeada2"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_skeletons)"
        ],
        [
          "pushrandom",
          "undeada1"
        ],
        [
          "pushrandom",
          "cowa1"
        ],
        [
          "pushrandom",
          "cowa2"
        ],
        [
          "if",
          "cowpuncher"
        ],
        [
          "pushrandom",
          "pickone(cowa1,cowa2)"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_cows)"
        ],
        [
          "pushrandom",
          "cowa1"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_cows)"
        ],
        [
          "pushrandom",
          "cowa2"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_cows)"
        ],
        [
          "pushrandom",
          "pickone(cowa1,cowa2)"
        ],
        [
          "pushrandom",
          "snakea"
        ],
        [
          "if",
          "snakeoiler"
        ],
        [
          "pushrandom",
          "snakea"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_snakes)"
        ],
        [
          "pushrandom",
          "snakea"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_snakes)"
        ],
        [
          "pushrandom",
          "snakea"
        ],
        [
          "if",
          "matchstring(@travelfrom@,sally_low) || matchstring(@travelfrom@,sally_high) || matchstring(@travelfrom@,sally_alpine)"
        ],
        [
          "nop"
        ],
        [
          "else",
          ""
        ],
        [
          "pushrandom",
          "trader"
        ],
        [
          "if",
          "matchstring(@travelfrom@,sally_low) || matchstring(@travelfrom@,sally_high) || matchstring(@travelfrom@,sally_alpine)"
        ],
        [
          "nop"
        ],
        [
          "else",
          ""
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_stealth)"
        ],
        [
          "pushrandom",
          "trader"
        ],
        [
          "pushrandom",
          "woundedguy"
        ],
        [
          "pushrandom",
          "brokewagon"
        ],
        [
          "pushrandom",
          "minecart"
        ],
        [
          "pushrandom",
          "forage"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_foragin)"
        ],
        [
          "pushrandom",
          "forage"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_foragin)"
        ],
        [
          "pushrandom",
          "forage"
        ],
        [
          "pushrandom",
          "dynamitea"
        ],
        [
          "pushrandom",
          "armycratea"
        ],
        [
          "pushrandom",
          "lootgravea"
        ],
        [
          "pushrandom",
          "minecratea"
        ],
        [
          "pushrandom",
          "ranchcratea"
        ],
        [
          "pushrandom",
          "lockboxa"
        ],
        [
          "pushrandom",
          "basicboozea"
        ],
        [
          "pushrandom",
          "statcheck"
        ],
        [
          "pushrandom",
          "statcheck"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_stealth)"
        ],
        [
          "pushrandom",
          "dynamitea"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_stealth)"
        ],
        [
          "pushrandom",
          "armycratea"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_stealth)"
        ],
        [
          "pushrandom",
          "lootgravea"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_stealth)"
        ],
        [
          "pushrandom",
          "ranchcratea"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_stealth)"
        ],
        [
          "pushrandom",
          "lockboxa"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_stealth)"
        ],
        [
          "pushrandom",
          "basicboozea"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_stealth)"
        ],
        [
          "pushrandom",
          "statcheck"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_stealth)"
        ],
        [
          "pushrandom",
          "statcheck"
        ],
        [
          "if",
          "hasitem(elv_transponder) && !hasflag(elvtransponderoff)"
        ],
        [
          "pushrandom",
          "elvmonster"
        ],
        [
          "if",
          "hasitem(elv_transponder) && !hasflag(elvtransponderoff)"
        ],
        [
          "pushrandom",
          "elvmonster"
        ],
        [
          "if",
          "hasitem(elv_transponder) && !hasflag(elvtransponderoff)"
        ],
        [
          "pushrandom",
          "elvcache"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_elv)"
        ],
        [
          "pushrandom",
          "elvmonster"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_elv)"
        ],
        [
          "pushrandom",
          "elvmonster"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_elv)"
        ],
        [
          "pushrandom",
          "elvcache"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_elv)"
        ],
        [
          "pushrandom",
          "elvcache"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_elv)"
        ],
        [
          "pushrandom",
          "elvcache"
        ],
        [
          "if",
          "rand(1,10)==1"
        ],
        [
          "pushrandom",
          "meateor"
        ],
        [
          "if",
          "!hasflag(re_deadcowboya)"
        ],
        [
          "pushrandom",
          "deadcowboya"
        ],
        [
          "if",
          "hasflag(re_binoculars)<3"
        ],
        [
          "pushrandom",
          "binoculars"
        ],
        [
          "log",
          "DEBUG: Choosing a random encounter from $sizeofrandom$ possibilities."
        ],
        [
          "addstate",
          "event,poprandom()"
        ],
        [
          "if",
          "!hasproperty(lastre)"
        ],
        [
          "addproperty",
          "lastre,nothing"
        ],
        [
          "if",
          "matchstring($event$,@lastre@)"
        ],
        [
          "addstate",
          "event,poprandom()"
        ],
        [
          "if",
          "matchstring($event$,@lastre@)"
        ],
        [
          "addstate",
          "event,poprandom()"
        ],
        [
          "if",
          "matchstring($event$,@lastre@)"
        ],
        [
          "addstate",
          "event,poprandom()"
        ],
        [
          "if",
          "matchstring($event$,@lastre@)"
        ],
        [
          "addstate",
          "event,poprandom()"
        ],
        [
          "addproperty",
          "lastre,$event$"
        ],
        [
          "if",
          "matchstring(@travelto@,dirtwater) && hasflag(dirtwater_chefquest)==2 && !re_a_gotchefpeppercheck"
        ],
        [
          "addstate",
          "event,chefpepper"
        ],
        [
          "if",
          "matchstring(@travelto@,dirtwater_saloon) && hasflag(dirtwater_chefquest)==2 && !re_a_gotchefpeppercheck"
        ],
        [
          "addstate",
          "event,chefpepper"
        ],
        [
          "if",
          "matchstring(@travelto@,dirtwater_saloon_kitchen) && hasflag(dirtwater_chefquest)==2 && !re_a_gotchefpeppercheck"
        ],
        [
          "addstate",
          "event,chefpepper"
        ],
        [
          "if",
          "matchstring(@travelto@,dirtwater_yourroom) && hasflag(dirtwater_chefquest)==2 && !re_a_gotchefpeppercheck"
        ],
        [
          "addstate",
          "event,chefpepper"
        ],
        [
          "log",
          "DEBUG: Choosing $event$"
        ],
        [
          "if",
          "nodeexists($event$)"
        ],
        [
          "goto",
          "$event$"
        ],
        [
          "say",
          "picked event $event$"
        ],
        [
          "say",
          "But there was no such node in the random encounter script."
        ],
        [
          "option",
          "done",
          "Okay, I'll tell Zack"
        ]
      ]
    },
    "randomevent_d": {
      "start": [
        [
          "if",
          "hasflag(randomencounters_d)==3"
        ],
        [
          "goto",
          "ponyring"
        ],
        [
          "clearrandom",
          ""
        ],
        [
          "if",
          "!palehorse"
        ],
        [
          "goto",
          "afterpalehorse"
        ],
        [
          "goto",
          "afterpalehorse"
        ]
      ],
      "afterdarkhorse": [
        [
          "if",
          "!hasflag(re_goblind1)"
        ],
        [
          "pushrandom",
          "goblind1"
        ],
        [
          "if",
          "!hasflag(re_goblind2)"
        ],
        [
          "pushrandom",
          "goblind2"
        ],
        [
          "if",
          "!hasflag(re_goblind3)"
        ],
        [
          "pushrandom",
          "goblind3"
        ],
        [
          "if",
          "!hasflag(re_skeletond1)"
        ],
        [
          "pushrandom",
          "skeletond1"
        ],
        [
          "if",
          "!hasflag(re_skeletond2)"
        ],
        [
          "pushrandom",
          "skeletond2"
        ],
        [
          "if",
          "!hasflag(re_skeletond3)"
        ],
        [
          "pushrandom",
          "skeletond3"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_skeletons) && !hasflag(re_skeletond1)"
        ],
        [
          "pushrandom",
          "skeletond1"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_skeletons) && !hasflag(re_skeletond2)"
        ],
        [
          "pushrandom",
          "skeletond2"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_skeletons) && !hasflag(re_skeletond3)"
        ],
        [
          "pushrandom",
          "skeletond3"
        ],
        [
          "if",
          "!hasflag(re_banditd1)"
        ],
        [
          "pushrandom",
          "banditd1"
        ],
        [
          "if",
          "!hasflag(re_banditd2)"
        ],
        [
          "pushrandom",
          "banditd2"
        ],
        [
          "if",
          "!hasflag(re_banditd3)"
        ],
        [
          "pushrandom",
          "banditd3"
        ],
        [
          "pushrandom",
          "undeadd2"
        ],
        [
          "pushrandom",
          "undeadd1"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_skeletons)"
        ],
        [
          "pushrandom",
          "undeadd2"
        ],
        [
          "pushrandom",
          "cowd1"
        ],
        [
          "pushrandom",
          "cowd2"
        ],
        [
          "if",
          "cowpuncher"
        ],
        [
          "pushrandom",
          "cowd1"
        ],
        [
          "if",
          "cowpuncher"
        ],
        [
          "pushrandom",
          "cowd2"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_cows)"
        ],
        [
          "pushrandom",
          "cowd1"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_cows)"
        ],
        [
          "pushrandom",
          "cowd2"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_cows)"
        ],
        [
          "pushrandom",
          "pickone(cowd1,cowd2)"
        ],
        [
          "pushrandom",
          "snaked"
        ],
        [
          "if",
          "snakeoiler"
        ],
        [
          "pushrandom",
          "snaked"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_snakes)"
        ],
        [
          "pushrandom",
          "snaked"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_snakes)"
        ],
        [
          "pushrandom",
          "snaked"
        ],
        [
          "pushrandom",
          "forage"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_foragin)"
        ],
        [
          "pushrandom",
          "forage"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_foragin)"
        ],
        [
          "pushrandom",
          "forage"
        ],
        [
          "pushrandom",
          "medicinewagon"
        ],
        [
          "pushrandom",
          "minecrated"
        ],
        [
          "pushrandom",
          "ranchcrated"
        ],
        [
          "pushrandom",
          "armycrated"
        ],
        [
          "pushrandom",
          "lootgraved"
        ],
        [
          "pushrandom",
          "statcheck"
        ],
        [
          "pushrandom",
          "statcheck"
        ],
        [
          "if",
          "matchstring(@travelfrom@,sally_low) || matchstring(@travelfrom@,sally_high) || matchstring(@travelfrom@,sally_alpine)"
        ],
        [
          "nop"
        ],
        [
          "else",
          ""
        ],
        [
          "pushrandom",
          "trader"
        ],
        [
          "if",
          "matchstring(@travelfrom@,sally_low) || matchstring(@travelfrom@,sally_high) || matchstring(@travelfrom@,sally_alpine)"
        ],
        [
          "nop"
        ],
        [
          "else",
          ""
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_stealth)"
        ],
        [
          "pushrandom",
          "trader"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_stealth)"
        ],
        [
          "pushrandom",
          "medicinewagon"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_stealth)"
        ],
        [
          "pushrandom",
          "minecrated"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_stealth)"
        ],
        [
          "pushrandom",
          "ranchcrated"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_stealth)"
        ],
        [
          "pushrandom",
          "armycrated"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_stealth)"
        ],
        [
          "pushrandom",
          "lootgraved"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_stealth)"
        ],
        [
          "pushrandom",
          "statcheck"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_stealth)"
        ],
        [
          "pushrandom",
          "statcheck"
        ],
        [
          "if",
          "hasitem(elv_transponder) && !hasflag(elvtransponderoff)"
        ],
        [
          "pushrandom",
          "elvmonster"
        ],
        [
          "if",
          "hasitem(elv_transponder) && !hasflag(elvtransponderoff)"
        ],
        [
          "pushrandom",
          "elvmonster"
        ],
        [
          "if",
          "hasitem(elv_transponder) && !hasflag(elvtransponderoff)"
        ],
        [
          "pushrandom",
          "elvcache"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_elv)"
        ],
        [
          "pushrandom",
          "elvmonster"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_elv)"
        ],
        [
          "pushrandom",
          "elvmonster"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_elv)"
        ],
        [
          "pushrandom",
          "elvcache"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_elv)"
        ],
        [
          "pushrandom",
          "elvcache"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_elv)"
        ],
        [
          "pushrandom",
          "elvcache"
        ],
        [
          "if",
          "rand(1,10)==1"
        ],
        [
          "pushrandom",
          "meateor"
        ],
        [
          "log",
          "DEBUG: Choosing a random encounter from $sizeofrandom$ possibilities."
        ],
        [
          "addstate",
          "event,poprandom()"
        ],
        [
          "if",
          "!hasproperty(lastre)"
        ],
        [
          "addproperty",
          "lastre,nothing"
        ],
        [
          "if",
          "matchstring($event$,@lastre@)"
        ],
        [
          "addstate",
          "event,poprandom()"
        ],
        [
          "if",
          "matchstring($event$,@lastre@)"
        ],
        [
          "addstate",
          "event,poprandom()"
        ],
        [
          "if",
          "matchstring($event$,@lastre@)"
        ],
        [
          "addstate",
          "event,poprandom()"
        ],
        [
          "if",
          "matchstring($event$,@lastre@)"
        ],
        [
          "addstate",
          "event,poprandom()"
        ],
        [
          "addproperty",
          "lastre,$event$"
        ],
        [
          "if",
          "nodeexists($event$)"
        ],
        [
          "goto",
          "$event$"
        ],
        [
          "say",
          "picked event $event$"
        ],
        [
          "runscript",
          "re_nothing"
        ]
      ]
    },
    "randomevent_h": {
      "afterdarkhorse": [
        [
          "if",
          "!hasflag(re_goblinh1)"
        ],
        [
          "pushrandom",
          "goblinh1"
        ],
        [
          "if",
          "!hasflag(re_goblinh2)"
        ],
        [
          "pushrandom",
          "goblinh2"
        ],
        [
          "if",
          "!hasflag(re_goblinh3)"
        ],
        [
          "pushrandom",
          "goblinh3"
        ],
        [
          "if",
          "!hasflag(re_skeletonh1)"
        ],
        [
          "pushrandom",
          "skeletonh1"
        ],
        [
          "if",
          "!hasflag(re_skeletonh2)"
        ],
        [
          "pushrandom",
          "skeletonh2"
        ],
        [
          "if",
          "!hasflag(re_skeletonh3)"
        ],
        [
          "pushrandom",
          "skeletonh3"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_skeletons) && !hasflag(re_skeletonh1)"
        ],
        [
          "pushrandom",
          "skeletonh1"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_skeletons) && !hasflag(re_skeletonh2)"
        ],
        [
          "pushrandom",
          "skeletonh2"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_skeletons) && !hasflag(re_skeletonh3)"
        ],
        [
          "pushrandom",
          "skeletonh3"
        ],
        [
          "if",
          "!hasflag(re_bandith1)"
        ],
        [
          "pushrandom",
          "bandith1"
        ],
        [
          "if",
          "!hasflag(re_bandith2)"
        ],
        [
          "pushrandom",
          "bandith2"
        ],
        [
          "if",
          "!hasflag(re_bandith3)"
        ],
        [
          "pushrandom",
          "bandith3"
        ],
        [
          "pushrandom",
          "undeadh2"
        ],
        [
          "pushrandom",
          "undeadh1"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_skeletons)"
        ],
        [
          "pushrandom",
          "undeadh2"
        ],
        [
          "pushrandom",
          "cowh1"
        ],
        [
          "pushrandom",
          "cowh2"
        ],
        [
          "if",
          "cowpuncher"
        ],
        [
          "pushrandom",
          "cowh1"
        ],
        [
          "if",
          "cowpuncher"
        ],
        [
          "pushrandom",
          "cowh2"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_cows)"
        ],
        [
          "pushrandom",
          "cowh1"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_cows)"
        ],
        [
          "pushrandom",
          "cowh2"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_cows)"
        ],
        [
          "pushrandom",
          "pickone(cowh1,cowh2)"
        ],
        [
          "pushrandom",
          "snakeh"
        ],
        [
          "if",
          "snakeoiler"
        ],
        [
          "pushrandom",
          "snakeh"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_snakes)"
        ],
        [
          "pushrandom",
          "snakeh"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_snakes)"
        ],
        [
          "pushrandom",
          "snakeh"
        ],
        [
          "pushrandom",
          "forage"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_foragin)"
        ],
        [
          "pushrandom",
          "forage"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_foragin)"
        ],
        [
          "pushrandom",
          "forage"
        ],
        [
          "pushrandom",
          "minecrateh"
        ],
        [
          "pushrandom",
          "lootgraveh"
        ],
        [
          "pushrandom",
          "statcheck"
        ],
        [
          "pushrandom",
          "statcheck"
        ],
        [
          "if",
          "matchstring(@travelfrom@,sally_low) || matchstring(@travelfrom@,sally_high) || matchstring(@travelfrom@,sally_alpine)"
        ],
        [
          "nop"
        ],
        [
          "else",
          ""
        ],
        [
          "pushrandom",
          "trader"
        ],
        [
          "if",
          "matchstring(@travelfrom@,sally_low) || matchstring(@travelfrom@,sally_high) || matchstring(@travelfrom@,sally_alpine)"
        ],
        [
          "nop"
        ],
        [
          "else",
          ""
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_stealth)"
        ],
        [
          "pushrandom",
          "trader"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_stealth)"
        ],
        [
          "pushrandom",
          "minecrateh"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_stealth)"
        ],
        [
          "pushrandom",
          "lootgraveh"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_stealth)"
        ],
        [
          "pushrandom",
          "statcheck"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_stealth)"
        ],
        [
          "pushrandom",
          "statcheck"
        ],
        [
          "if",
          "hasitem(elv_transponder) && !hasflag(elvtransponderoff)"
        ],
        [
          "pushrandom",
          "elvmonster"
        ],
        [
          "if",
          "hasitem(elv_transponder) && !hasflag(elvtransponderoff)"
        ],
        [
          "pushrandom",
          "elvmonster"
        ],
        [
          "if",
          "hasitem(elv_transponder) && !hasflag(elvtransponderoff)"
        ],
        [
          "pushrandom",
          "elvcache"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_elv)"
        ],
        [
          "pushrandom",
          "elvmonster"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_elv)"
        ],
        [
          "pushrandom",
          "elvmonster"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_elv)"
        ],
        [
          "pushrandom",
          "elvcache"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_elv)"
        ],
        [
          "pushrandom",
          "elvcache"
        ],
        [
          "if",
          "matchstring(@gear.ring.id@,ring_elv)"
        ],
        [
          "pushrandom",
          "elvcache"
        ],
        [
          "log",
          "DEBUG: Choosing a random encounter from $sizeofrandom$ possibilities."
        ],
        [
          "addstate",
          "event,poprandom()"
        ],
        [
          "if",
          "!hasproperty(lastre)"
        ],
        [
          "addproperty",
          "lastre,nothing"
        ],
        [
          "if",
          "matchstring($event$,@lastre@)"
        ],
        [
          "addstate",
          "event,poprandom()"
        ],
        [
          "if",
          "matchstring($event$,@lastre@)"
        ],
        [
          "addstate",
          "event,poprandom()"
        ],
        [
          "if",
          "matchstring($event$,@lastre@)"
        ],
        [
          "addstate",
          "event,poprandom()"
        ],
        [
          "if",
          "matchstring($event$,@lastre@)"
        ],
        [
          "addstate",
          "event,poprandom()"
        ],
        [
          "addproperty",
          "lastre,$event$"
        ],
        [
          "if",
          "nodeexists($event$)"
        ],
        [
          "goto",
          "$event$"
        ],
        [
          "say",
          "picked event $event$"
        ],
        [
          "runscript",
          "re_nothing"
        ]
      ]
    },
    "re_armycratea": {
      "open": [
        [
          "say",
          "You fish through the crate and help yourself to its military contents.  It's not like those army cowards have any use for it, back east in their coward hidey holes."
        ],
        [
          "addstate",
          "returnscript,re_armycratea"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_army"
        ]
      ],
      "afterloot": [
        [
          "option",
          "done",
          "Continue on"
        ]
      ]
    },
    "re_armycratec": {
      "open": [
        [
          "say",
          "You pry the lid off the crate and help yourself to the contents. Can't let taxpayer-funded materiel go to waste, after all."
        ],
        [
          "addstate",
          "returnscript,re_armycratec"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_army"
        ]
      ],
      "afterloot": [
        [
          "say",
          "Now let's get back on the trail, soldier."
        ],
        [
          "option",
          "done",
          "Sir yes sir"
        ]
      ]
    },
    "re_armycrated": {
      "open": [
        [
          "say",
          "You crack open the crate's hard outer shell and collect the sweet inner meat. Except it isn't meat, it's items."
        ],
        [
          "addstate",
          "returnscript,re_armycrated"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_army"
        ]
      ],
      "afterloot": [
        [
          "say",
          "Sorry, that analogy wasn't very good."
        ],
        [
          "option",
          "done",
          "Don't sweat it"
        ]
      ]
    },
    "re_armycratee": {
      "open": [
        [
          "say",
          "You pry the lid off the crate and help yourself to the contents.  If Fort Memoriam doesn't want it, you'll take it!"
        ],
        [
          "addstate",
          "returnscript,re_armycratee"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_army"
        ]
      ],
      "afterloot": [
        [
          "say",
          "Now let's get back on the trail, soldier."
        ],
        [
          "option",
          "done",
          "Sir yes sir"
        ]
      ]
    },
    "re_armycratef": {
      "gopen2": [
        [
          "say",
          "On the bright side, you apparently managed to get the crate open at some point in your self-destructive reverie."
        ],
        [
          "addstate",
          "returnscript,re_armycratef"
        ],
        [
          "addstate",
          "returnstate,afterarmyloot1"
        ],
        [
          "runscript",
          "container_loot_army"
        ]
      ],
      "afterarmyloot1": [
        [
          "say",
          "There's even more stuff in the bottom of the crate!"
        ],
        [
          "option",
          "loot2",
          "Keep looting"
        ]
      ],
      "loot2": [
        [
          "addstate",
          "returnscript,re_armycratef"
        ],
        [
          "addstate",
          "returnstate,aftermedicalloot1"
        ],
        [
          "runscript",
          "container_loot_medical"
        ]
      ],
      "aftermedicalloot1": [
        [
          "say",
          "You try to decide if that stuff was worth the butt kicking you ended up giving yourself, and it just makes you mad."
        ],
        [
          "incflag",
          "ending_fightslost"
        ],
        [
          "delflag",
          "cowfight"
        ],
        [
          "delflag",
          "undeadfight"
        ],
        [
          "delflag",
          "housefight"
        ],
        [
          "incflag",
          "winstreak_region@regionto@,-2"
        ],
        [
          "if",
          "hasflag(winstreak_region@regionto@)<0"
        ],
        [
          "addflag",
          "winstreak_region@regionto@,0"
        ],
        [
          "incflag",
          "combatslost,1"
        ],
        [
          "if",
          "hasflag(combatslost)>10 && !hasskill(gluttonforpunishment) && !hasflag(gaveup)"
        ],
        [
          "addskill",
          "gluttonforpunishment"
        ],
        [
          "if",
          "hasskill(gluttonforpunishment) && !hasflag(gaveup)"
        ],
        [
          "addstate",
          "region,@regionto@"
        ],
        [
          "if",
          "hasskill(gluttonforpunishment) && !hasflag(gaveup)"
        ],
        [
          "addxp",
          "@xpreward_$region$@/2"
        ],
        [
          "delflag",
          "gaveup"
        ],
        [
          "if",
          "haseffect(angry)<@toughness@"
        ],
        [
          "goto",
          "dontexplode"
        ],
        [
          "addeffect",
          "angry"
        ],
        [
          "say",
          "You get so angry about losing that fight that you pass out."
        ],
        [
          "incflag",
          "winstreak_region@regionto@,-3"
        ],
        [
          "if",
          "hasflag(winstreak_region@regionto@)<0"
        ],
        [
          "addflag",
          "winstreak_region@regionto@,0"
        ],
        [
          "option",
          "sleef",
          "Zzzzz"
        ]
      ],
      "open": [
        [
          "say",
          "You pry the lid off the crate, being careful to avoid the mushrooms (just in case) and grab the supplies inside."
        ],
        [
          "addstate",
          "returnscript,re_armycratef"
        ],
        [
          "addstate",
          "returnstate,afterarmyloot2"
        ],
        [
          "runscript",
          "container_loot_army"
        ]
      ],
      "afterarmyloot2": [
        [
          "say",
          "Wow, there's a lot of stuff in here!"
        ],
        [
          "option",
          "open2",
          "Keep looting"
        ]
      ],
      "open2": [
        [
          "addstate",
          "returnscript,re_armycratef"
        ],
        [
          "addstate",
          "returnstate,aftermedicalloot2"
        ],
        [
          "runscript",
          "container_loot_medical"
        ]
      ],
      "aftermedicalloot2": [
        [
          "say",
          "Now let's get back on the trail, soldier."
        ],
        [
          "option",
          "done",
          "Sir yes sir"
        ]
      ]
    },
    "re_armycrateg": {
      "open": [
        [
          "say",
          "You pry the lid off the crate and help yourself to the contents."
        ],
        [
          "addstate",
          "returnscript,re_armycrateg"
        ],
        [
          "addstate",
          "returnstate,afterarmyloot"
        ],
        [
          "runscript",
          "container_loot_army"
        ]
      ],
      "afterarmyloot": [
        [
          "say",
          "Oh hey, there's also a first-aid kit in here."
        ],
        [
          "option",
          "loot2",
          "Score! What's in it?"
        ]
      ],
      "loot2": [
        [
          "say",
          "Well, let's see..."
        ],
        [
          "addstate",
          "returnscript,re_armycrateg"
        ],
        [
          "addstate",
          "returnstate,aftermedicalloot"
        ],
        [
          "runscript",
          "container_loot_medical"
        ]
      ],
      "aftermedicalloot": [
        [
          "say",
          "Not bad for like five seconds work."
        ],
        [
          "option",
          "done",
          "Not bad at all"
        ]
      ]
    },
    "re_banditambush": {
      "hornstwo": [
        [
          "leftsay",
          "Well, I reckon he's lookin' fer three fellas dressed like bandits, right? Not two fellas dressed like bandits and one fella in his underwear."
        ],
        [
          "rightsay",
          "Hey! That there's some good thinkin'! Thanks, pardner!"
        ],
        [
          "say",
          "The three bandits draw lots, and the loser hands you his gear."
        ],
        [
          "additem",
          "pistol_bandit"
        ],
        [
          "additem",
          "hat_black"
        ],
        [
          "checklocation",
          "Random Encounter (Region A) - Sharpshootin' Bandits"
        ],
        [
          "option",
          "done",
          "Nice"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You beat up and/or blew up those bandits."
        ],
        [
          "addxp",
          "@xpreward_a@*3"
        ],
        [
          "additem",
          "pickone(pistol_bandit,hat_black)"
        ],
        [
          "if",
          "!hasitem(pistol_bandit) && itemroll(40)"
        ],
        [
          "additem",
          "pistol_bandit"
        ],
        [
          "if",
          "!hasitem(hat_black) && itemroll(40)"
        ],
        [
          "additem",
          "hat_black"
        ],
        [
          "checklocation",
          "Random Encounter (Region A) - Sharpshootin' Bandits"
        ],
        [
          "addmeat",
          "rand(20,30),1"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_banditb1": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You handily defeat the bandit and take all his stuff. Including his pants. But his underwear is elaborately quilted too, so don't feel bad about it."
        ],
        [
          "addxp",
          "@xpreward_b@"
        ],
        [
          "checklocation",
          "Random Encounter (Region B) - Quilty-Pantsed Bandit"
        ],
        [
          "if",
          "!hasitem(boots_black) && itemroll(40)"
        ],
        [
          "additem",
          "boots_black"
        ],
        [
          "if",
          "!hasitem(hat_black) && itemroll(30)"
        ],
        [
          "additem",
          "hat_black"
        ],
        [
          "if",
          "!hasitem(pistol_bandit) && itemroll(30)"
        ],
        [
          "additem",
          "pistol_bandit"
        ],
        [
          "addmeat",
          "rand(15,20),1"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_banditb2": {
      "punch2": [
        [
          "rightsay",
          "Here, you can keep this stupid defective thing."
        ],
        [
          "say",
          "She dusts herself off, tosses you the ring and slouches away, rubbing her jaw."
        ],
        [
          "say",
          "Oh hey -- looks like she dropped her wallet when she fell down, too."
        ],
        [
          "checklocation",
          "Random Encounter (Region B) - Scientifically-Minded Bandit"
        ],
        [
          "addmeat",
          "rand(20,30),1"
        ],
        [
          "addxp",
          "@xpreward_b@"
        ],
        [
          "option",
          "done",
          "Score!"
        ]
      ],
      "outfox2": [
        [
          "leftsay",
          "Sigma? Oh, no, that won't do at all. I mean, it'll soak some kinetic force, sure, but as soon as things get heavy that's going to overheat and burn your finger off."
        ],
        [
          "rightsay",
          "Oh jeez, really? I hadn't thought of that. Back to the drawing board, I guess."
        ],
        [
          "say",
          "She tosses you the ring and turns to leave."
        ],
        [
          "addxp",
          "@xpreward_a@"
        ],
        [
          "checklocation",
          "Random Encounter (Region B) - Scientifically-Minded Bandit"
        ],
        [
          "option",
          "done",
          "Sweet"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You proved, once and for all, that science is not as powerful a force as bullying."
        ],
        [
          "addxp",
          "@xpreward_b@"
        ],
        [
          "say",
          "Hopefully her fancy science ring works better for you than it did for her."
        ],
        [
          "checklocation",
          "Random Encounter (Region B) - Scientifically-Minded Bandit"
        ],
        [
          "if",
          "!hasitem(hat_black) && itemroll(20)"
        ],
        [
          "additem",
          "hat_black"
        ],
        [
          "addmeat",
          "rand(20,30),1"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_banditb3": {
      "horn2": [
        [
          "checklocation",
          "Random Encounter (Region B) - Hightailin' Bandit"
        ],
        [
          "addxp",
          "@xpreward_a@"
        ],
        [
          "option",
          "done",
          "Awesome!"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You beat up the bandit and take her presumably ill-gotten Meat, as well as her fancy speed-enchanted boots. Odd that she wasn't taking advantage of them -- maybe she misread the label and assumed her horse would go faster too."
        ],
        [
          "addxp",
          "@xpreward_b@"
        ],
        [
          "checklocation",
          "Random Encounter (Region B) - Hightailin' Bandit"
        ],
        [
          "if",
          "!hasitem(hat_black) && itemroll(30)"
        ],
        [
          "additem",
          "hat_black"
        ],
        [
          "if",
          "!hasitem(pistol_bandit) && itemroll(30)"
        ],
        [
          "additem",
          "pistol_bandit"
        ],
        [
          "addmeat",
          "rand(30,40),1"
        ],
        [
          "addstate",
          "winbutton,Hmm!"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_banditc1": {
      "intim": [
        [
          "say",
          "This is possibly the least intimidateable human person you've ever seen in your life. Fortunately, you are <i>absurdly</i> intimidating for someone who only stopped living with @his@ parents a few days ago."
        ],
        [
          "leftsay",
          "I'LL SKIN YOU WITH MY TEETH AND USE YOUR FACE FOR UNDERWEAR"
        ],
        [
          "say",
          "Look at that, he ran away so fast, his pants flew right off."
        ],
        [
          "checklocation",
          "Random Encounter (Region C) - Grizzled Skinner (Pants)"
        ],
        [
          "addxp",
          "@xpreward_b@"
        ],
        [
          "option",
          "done",
          "Alright!"
        ]
      ],
      "hornsthree": [
        [
          "leftsay",
          "Oh my gosh! You have to get rid of those pants right now! Go find a river or something to jump into!"
        ],
        [
          "say",
          "The skinner runs away frantically -- and pantslessly."
        ],
        [
          "checklocation",
          "Random Encounter (Region C) - Grizzled Skinner (Pants)"
        ],
        [
          "addxp",
          "@xpreward_b@"
        ],
        [
          "option",
          "done",
          "Sucker"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You beat up the grizzled skinner and take his grisly skin pants."
        ],
        [
          "addxp",
          "@xpreward_c@"
        ],
        [
          "checklocation",
          "Random Encounter (Region C) - Grizzled Skinner (Pants)"
        ],
        [
          "checklocation",
          "Random Encounter (Region C) - Grizzled Skinner (Varmint Knife)"
        ],
        [
          "addmeat",
          "rand(15,25),1"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_banditc2": {
      "teach2": [
        [
          "say",
          "You spend some time teaching the butcher how to manipulate objects with his mind -- at least well enough to make his cleaver seem a little lighter and less unwieldy. He gives you some of his animal carcass as payment."
        ],
        [
          "checklocation",
          "Random Encounter (Region C) - Backwoods Butcher (Steak)"
        ],
        [
          "addmeat",
          "rand(15,25),1"
        ],
        [
          "addxp",
          "@xpreward_b@"
        ],
        [
          "option",
          "done",
          "Nice!"
        ]
      ],
      "intim": [
        [
          "leftsay",
          "Haw! You can barely lift that thing! Let me show you how it's done!"
        ],
        [
          "say",
          "You grab the cleaver's handle from the nonplussed butcher, lift the blade over your head with a \"Yarrrrgh!\" and slam it into the carcass, chopping the beast right in half."
        ],
        [
          "rightsay",
          "..."
        ],
        [
          "leftsay",
          "Whaddya think of <i>that?</i>"
        ],
        [
          "rightsay",
          "I'll just... collect my meat here and go. Go 'head and keep the chopper, that's fine."
        ],
        [
          "checklocation",
          "Random Encounter (Region C) - Backwoods Butcher (Cleaver)"
        ],
        [
          "addxp",
          "@xpreward_b@"
        ],
        [
          "option",
          "done",
          "Okay!"
        ]
      ],
      "outfox": [
        [
          "leftsay",
          "No, look, you're doing it wrong."
        ],
        [
          "rightsay",
          "What's that?"
        ],
        [
          "leftsay",
          "You're just kind of dropping the cleaver on the meat, you aren't directing the force properly. You need to pull down and through with your elbows and rotate your hips into the move... here, let me just show you."
        ],
        [
          "say",
          "You help the butcher improve his posture and cleaving technique, and he gives you some of his possibly-goat carcass as thanks."
        ],
        [
          "checklocation",
          "Random Encounter (Region C) - Backwoods Butcher (Steak)"
        ],
        [
          "addxp",
          "@xpreward_b@"
        ],
        [
          "option",
          "done",
          "Cooll!"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You won! Specifically you won a huge slab of a cleaver and all the Meat you can carry, which isn't all that much once you factor in the weight of the cleaver."
        ],
        [
          "addxp",
          "@xpreward_c@"
        ],
        [
          "checklocation",
          "Random Encounter (Region C) - Backwoods Butcher (Cleaver)"
        ],
        [
          "checklocation",
          "Random Encounter (Region C) - Backwoods Butcher (Steak)"
        ],
        [
          "addmeat",
          "rand(15,25),1"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_banditc3": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You won! More specifically, you won the weirdest hat you've ever seen."
        ],
        [
          "addxp",
          "@xpreward_c@"
        ],
        [
          "checklocation",
          "Random Encounter (Region C) - Clown Hunter"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_banditd1": {
      "outfox": [
        [
          "leftsay",
          "Listen, you know that old saying \"Give a man a fish and he eats for a day, teach a man to fish and he eats for the rest of his life?\""
        ],
        [
          "rightsay",
          "I don't like fish, I just like bread."
        ],
        [
          "leftsay",
          "You've kind of missed the point. I'll go slowly."
        ],
        [
          "say",
          "You write down your mom's bread recipe and explain it to him in short words. He gives you his large (and very stale) loaf of bread in exchange and rides away excitedly."
        ],
        [
          "checklocation",
          "Random Encounter (Region D) - Big Tough Bandit"
        ],
        [
          "addxp",
          "@xpreward_c@"
        ],
        [
          "option",
          "done",
          "Nice!"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You beat up the bandit and take his big loaf of extremely stale bread. \"Noo!\" he protests. \"Not my bread!\""
        ],
        [
          "checklocation",
          "Random Encounter (Region D) - Big Tough Bandit"
        ],
        [
          "addxp",
          "@xpreward_d@"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_banditd2": {
      "didtake": [
        [
          "leftsay",
          "Don't worry, I'll be careful."
        ],
        [
          "rightsay",
          "I got me a real bad feelin' about this!"
        ],
        [
          "say",
          "You pick up the strange helmet and stow it carefully in your pack."
        ],
        [
          "checklocation",
          "Random Encounter (Region D) - Strangely-Helmeted Lunatic"
        ],
        [
          "addxp",
          "@xpreward_c@"
        ],
        [
          "option",
          "done",
          "Okay"
        ]
      ],
      "outfox3": [
        [
          "leftsay",
          "Eesh. Poor guy."
        ],
        [
          "if",
          "susie"
        ],
        [
          "rightpicture",
          "portrait_susie"
        ],
        [
          "if",
          "susie"
        ],
        [
          "rightsay",
          "What in the hell was that about?"
        ],
        [
          "if",
          "alice"
        ],
        [
          "rightpicture",
          "portrait_alice"
        ],
        [
          "if",
          "alice"
        ],
        [
          "rightsay",
          "Seen some weird things in my time, but..."
        ],
        [
          "if",
          "gary"
        ],
        [
          "rightpicture",
          "portrait_gary"
        ],
        [
          "if",
          "gary"
        ],
        [
          "rightsay",
          "Poor human! Such a bad brains to having!"
        ],
        [
          "say",
          "You pick up the strange helmet and stow it carefully in your pack."
        ],
        [
          "checklocation",
          "Random Encounter (Region D) - Strangely-Helmeted Lunatic"
        ],
        [
          "addxp",
          "@xpreward_c@"
        ],
        [
          "option",
          "done",
          "Okay"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You beat the weirdo down and take his crazy hat. That'll teach him not to startle innocent travelers."
        ],
        [
          "addxp",
          "@xpreward_d@"
        ],
        [
          "checklocation",
          "Random Encounter (Region D) - Strangely-Helmeted Lunatic"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_banditd3": {
      "intim": [
        [
          "say",
          "You grit your teeth and flex your muscles at the guy. Your shirtsleeves tear open."
        ],
        [
          "leftsay",
          "nnnnnggg<i>HHNNNNNGGGGGHH!</i>"
        ],
        [
          "rightsay",
          "Whoa."
        ],
        [
          "leftsay",
          "<i>Gimme yer stuff ARRRRRGGH!</i>"
        ],
        [
          "rightsay",
          "Uh, I yield to your superior swoleness."
        ],
        [
          "say",
          "He puts his gun and wallet on the ground and backs away slowly."
        ],
        [
          "checklocation",
          "Random Encounter (Region D) - Breadwood Highwayman"
        ],
        [
          "addmeat",
          "rand(40,50),1"
        ],
        [
          "addxp",
          "@xpreward_c@"
        ],
        [
          "sayoption",
          "done",
          "Nnnnggg."
        ]
      ],
      "autowin2": [
        [
          "if",
          "hasproperty(middlename)"
        ],
        [
          "leftsay",
          "That's right, <i>@firstname@ @middlename@</i> @lastname@. Now, why don't you hand over your gear, and next time maybe you'll remember faster."
        ],
        [
          "else",
          ""
        ],
        [
          "leftsay",
          "That's right, <i>@firstname@</i> @lastname@. Now, why don't you hand over your gear, and next time maybe you'll remember faster."
        ],
        [
          "rightsay",
          "Uh. Sorry."
        ],
        [
          "checklocation",
          "Random Encounter (Region D) - Breadwood Highwayman"
        ],
        [
          "addxp",
          "@xpreward_d@"
        ],
        [
          "addmeat",
          "rand(40,50),1"
        ],
        [
          "sayoption",
          "done",
          "Good boy."
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You try to roll his unconscious body into the bushes, but he's too heavy, so you just take his gun."
        ],
        [
          "addxp",
          "@xpreward_d@"
        ],
        [
          "checklocation",
          "Random Encounter (Region D) - Breadwood Highwayman"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_bandite1": {
      "showhood2": [
        [
          "rightsay",
          "I've been killing them with their own daggers, for the sake of poetic justice. Here, have one."
        ],
        [
          "if",
          "!hasflag(map_cemetery3)"
        ],
        [
          "say",
          "If you want to aid in the fight against this evil, there's a cemetery nearby I can direct you to, as well."
        ],
        [
          "if",
          "!hasflag(map_cemetery3)"
        ],
        [
          "mapunlock",
          "cemetery3,Reboot Hill"
        ],
        [
          "addstate",
          "maplocs,=countflags(map_)"
        ],
        [
          "if",
          "$maplocs$>36 && $maplocs$<40"
        ],
        [
          "giveachievement",
          "ach_37maplocs"
        ],
        [
          "checklocation",
          "Random Encounter (Region E) - Vigilante Cultist Hunter"
        ],
        [
          "addxp",
          "@xpreward_e@"
        ],
        [
          "sayoption",
          "done",
          "Neat, thanks!"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You beat the guy up but stop short of killing him, since this is basically just a big misunderstanding and all."
        ],
        [
          "addxp",
          "@xpreward_e@"
        ],
        [
          "checklocation",
          "Random Encounter (Region E) - Vigilante Cultist Hunter"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_bandite2": {
      "intim2": [
        [
          "leftsay",
          "I kinda doubt you'll be able to raise <i>yourself</i> from the dead. You wanna place a bet?"
        ],
        [
          "say",
          "You grab the shovel out of his hands, and raise it threateningly. He runs away, shouting at you over his shoulder:"
        ],
        [
          "rightsay",
          "My master will hear about this! You'll be sorry!"
        ],
        [
          "if",
          "alice"
        ],
        [
          "leftpicture",
          "portrait_alice_flipped"
        ],
        [
          "if",
          "alice"
        ],
        [
          "leftsay",
          "Should've just plugged him."
        ],
        [
          "checklocation",
          "Random Encounter (Region E) - Wandering Necromancer Cultist (Shovel)"
        ],
        [
          "addxp",
          "@xpreward_d@"
        ],
        [
          "if",
          "alice"
        ],
        [
          "sayoption",
          "done",
          "Yeah, maybe."
        ],
        [
          "if",
          "!alice"
        ],
        [
          "sayoption",
          "done",
          "Yeah, whatever."
        ]
      ],
      "fox3": [
        [
          "leftsay",
          "Sucker."
        ],
        [
          "leftpicture",
          "portrait_alice_flipped"
        ],
        [
          "leftsay",
          "Don't you ever frighten me like that again."
        ],
        [
          "checklocation",
          "Random Encounter (Region E) - Wandering Necromancer Cultist (Shovel)"
        ],
        [
          "checklocation",
          "Random Encounter (Region E) - Wandering Necromancer Cultist (Hood)"
        ],
        [
          "addxp",
          "@xpreward_d@"
        ],
        [
          "sayoption",
          "done",
          "Sorry."
        ]
      ],
      "horn2": [
        [
          "leftspeak",
          "$lastoption$"
        ],
        [
          "say",
          "You respectfully fill the hole back in while the cultist slouches away, grumbling."
        ],
        [
          "if",
          "alice"
        ],
        [
          "leftpicture",
          "portrait_alice_flipped"
        ],
        [
          "if",
          "alice"
        ],
        [
          "leftsay",
          "Should've just plugged him."
        ],
        [
          "checklocation",
          "Random Encounter (Region E) - Wandering Necromancer Cultist (Shovel)"
        ],
        [
          "addxp",
          "@xpreward_d@"
        ],
        [
          "if",
          "alice"
        ],
        [
          "sayoption",
          "done",
          "Yeah, maybe."
        ],
        [
          "if",
          "!alice"
        ],
        [
          "sayoption",
          "done",
          "Heh, sucker."
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You won! You kick him into the hole he's dug and fill it in. That'll show him."
        ],
        [
          "addxp",
          "@xpreward_e@"
        ],
        [
          "checklocation",
          "Random Encounter (Region E) - Wandering Necromancer Cultist (Hood)"
        ],
        [
          "checklocation",
          "Random Encounter (Region E) - Wandering Necromancer Cultist (Shovel)"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_bandite3": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You beat the hell out of the cowboy and take his fancy silver pistol. I'm not sure what the lesson is here, but he's probably learned it?"
        ],
        [
          "addxp",
          "@xpreward_e@"
        ],
        [
          "checklocation",
          "Random Encounter (Region E) - Cow Hunter"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_banditf1": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You knock the guy unconscious and take his pants, on the assumption that the constriction is probably squeezing all the blood out of his legs and overloading his brain."
        ],
        [
          "addxp",
          "@xpreward_f@"
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Kurtz-Cult Runaway"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_banditf2": {
      "intim2": [
        [
          "leftsay",
          "It can't be hot enough! It can't be done!"
        ],
        [
          "rightsay",
          "No! Noooo!"
        ],
        [
          "leftsay",
          "IT'S IMPOSSIBLE FOR IT TO BE HOT ENOUGH!"
        ],
        [
          "rightsay",
          "Nooooaaaarrrggghhh!"
        ],
        [
          "say",
          "The chef runs away into the desert, screaming. As you watch him go, there's a <i>clang</i> behind you as the door to his stove falls off, the hinges having melted through."
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Mad Hedge Chef"
        ],
        [
          "addxp",
          "@xpreward_e@"
        ],
        [
          "option",
          "done",
          "Well done!"
        ]
      ],
      "tellhim": [
        [
          "leftsay",
          "Buddy... gazpacho soup is served cold."
        ],
        [
          "rightsay",
          "What... no. No! It's not true!"
        ],
        [
          "leftsay",
          "Yeah. Sorry."
        ],
        [
          "say",
          "The chef runs off into the desert, screaming. As you watch him go, there's a <i>clang</i> behind you as the door to his stove falls off, the hinges having melted through."
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Mad Hedge Chef"
        ],
        [
          "addxp",
          "@xpreward_e@"
        ],
        [
          "option",
          "done",
          "Well okay!"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You knock out the crazed chef and, feeling merciful, push him into the shade of a large rock before checking out his stove that is slowly melting into slag."
        ],
        [
          "addxp",
          "@xpreward_f@"
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Mad Hedge Chef"
        ],
        [
          "addmeat",
          "rand(25,35),1"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_banditf3": {
      "dynamite": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "Here, try sending your bosses this!"
        ],
        [
          "say",
          "You pitch a bundle of dynamite at the guy, who shoots it reflexively."
        ],
        [
          "say",
          "When the dust and smoke clears, all that's left is a gun, a crater, and a hat drifting down to the ground."
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Cow-Cult Brigand"
        ],
        [
          "additem",
          "hat_black"
        ],
        [
          "addxp",
          "@xpreward_e@"
        ],
        [
          "option",
          "done",
          "Nice"
        ]
      ],
      "outfox2": [
        [
          "leftsay",
          "Look, let me see the gun. Yeah, just as I thought. These squiggles here, these are old beanslinger runes. \"Tah-Bah-Sco\", it means \"bring the heat\". This is just regular magic, doesn't have anything to do with the cows."
        ],
        [
          "rightsay",
          "Well shucks! And here I thought I was doin' somethin' of religious significance!"
        ],
        [
          "leftsay",
          "Nope, sorry."
        ],
        [
          "rightsay",
          "Guess I got some reflectin' ta do. Go ahead and keep the gun."
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Cow-Cult Brigand"
        ],
        [
          "addxp",
          "@xpreward_e@"
        ],
        [
          "sayoption",
          "done",
          "Okay, thanks!"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You won! Now his magical pistol is in slightly more responsible hands."
        ],
        [
          "addxp",
          "@xpreward_f@"
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Cow-Cult Brigand"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_banditg1": {
      "intim": [
        [
          "say",
          "You stand up in your stirrups and point at the man angrily."
        ],
        [
          "leftsay",
          "Fool! Your mortal hammer cannot touch my ghostly incorporeal form! Begone lest I wrench thy spirit from its meaty shell!"
        ],
        [
          "rightsay",
          "What?"
        ],
        [
          "leftsay",
          "...<i>BOOOOOO!</i>"
        ],
        [
          "rightsay",
          "Aaaaahh!"
        ],
        [
          "say",
          "He faints dead away. After checking to make sure this isn't literal, you take his sledgehammer. You know, just to make sure he doesn't hurt anybody with his weirdo ghost mania."
        ],
        [
          "checklocation",
          "Random Encounter (Region G) - Insane Construction Worker"
        ],
        [
          "addxp",
          "@xpreward_f@"
        ],
        [
          "option",
          "done",
          "Alright!"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You beat the guy senseless and take his hammer, so he can't attack any more travelers. And his wallet, so he can't buy any more hammers."
        ],
        [
          "addxp",
          "@xpreward_g@"
        ],
        [
          "checklocation",
          "Random Encounter (Region G) - Insane Construction Worker"
        ],
        [
          "addmeat",
          "rand(25,35),1"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_banditg2": {
      "intim": [
        [
          "leftsay",
          "Buddy, I have a nigh-inexhaustible capacity for violence, and for your own good if you do not take that hat off I will punch you in the head until it comes off on its own!"
        ],
        [
          "rightsay",
          "Goodness gracious! That seems quite unnecessary!"
        ],
        [
          "leftsay",
          "If I have to beat the crap out of you to save your life, that's a sacrifice I'm willing to make."
        ],
        [
          "rightsay",
          "Very well, if you feel so strongly about it, I suppose I have no choice. Here, you may keep it for yourself."
        ],
        [
          "say",
          "He hands you his burning hat and walks away quickly."
        ],
        [
          "checklocation",
          "Random Encounter (Region G) - Burning Man"
        ],
        [
          "addxp",
          "@xpreward_f@"
        ],
        [
          "sayoption",
          "done",
          "Thank you."
        ]
      ],
      "outfox": [
        [
          "leftsay",
          "Look, I'll put it this way: you're an artist, right? You depend on your eyes for your ability to create. Well, once your hat burns down far enough, your eyeballs are going to boil in their sockets."
        ],
        [
          "rightsay",
          "Ah. Well... that would put a hamper on my painting..."
        ],
        [
          "leftsay",
          "Of course, well before that happens, your brain will roast. Starting with the parietal lobes on top, which govern visual perception and object manipulation."
        ],
        [
          "rightsay",
          "Oh my. Very well, you've made your point. Here."
        ],
        [
          "checklocation",
          "Random Encounter (Region G) - Burning Man"
        ],
        [
          "addxp",
          "@xpreward_f@"
        ],
        [
          "sayoption",
          "done",
          "Thank you."
        ]
      ],
      "hornstwo": [
        [
          "leftsay",
          "$lastoption$"
        ],
        [
          "say",
          "The man wordlessly removes his burning hat, hands it to you, and walks away."
        ],
        [
          "checklocation",
          "Random Encounter (Region G) - Burning Man"
        ],
        [
          "addxp",
          "@xpreward_f@"
        ],
        [
          "sayoption",
          "done",
          "Was it something I said?"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You won! Specifically, you have won a hat that is on fire. Congratulations?"
        ],
        [
          "addxp",
          "@xpreward_g@"
        ],
        [
          "checklocation",
          "Random Encounter (Region G) - Burning Man"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_banditg3": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You won! You claim the jogger's goofy-looking shoes as your just reward."
        ],
        [
          "addxp",
          "@xpreward_g@"
        ],
        [
          "checklocation",
          "Random Encounter (Region G) - Bandit Jogger"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_bandith1": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You won! Here's hoping there aren't two more like him out here."
        ],
        [
          "addxp",
          "@xpreward_h@"
        ],
        [
          "checklocation",
          "Random Encounter (Region H) - Grizzled Mountain Man"
        ],
        [
          "addstate",
          "winbutton,Whew"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_bandith2": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You won! Looks like your metaphorical goose gets to stay literally uncooked."
        ],
        [
          "addxp",
          "@xpreward_h@"
        ],
        [
          "checklocation",
          "Random Encounter (Region H) - Back-Country Chef-Magus"
        ],
        [
          "addstate",
          "winbutton,Whew!"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_bandith3": {
      "boughtit": [
        [
          "addmeat",
          "-500"
        ],
        [
          "say",
          "The barista pours you a piping-hot cup of coffee and turns to tend to her whistling contraption."
        ],
        [
          "checklocation",
          "Random Encounter (Region H) - Barista (Coffee)"
        ],
        [
          "addflag",
          "re_h_gotbaristacoffeecheck"
        ],
        [
          "option",
          "attack",
          "Yell and kick over her stupid coffee machine [Fight]"
        ],
        [
          "option",
          "done",
          "Wave goodbye and leave"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You beat the barista senseless and take back your Meat, and something to wipe up the coffee that splashed on you. You know, it actually smells pretty good."
        ],
        [
          "addxp",
          "@xpreward_h@"
        ],
        [
          "checklocation",
          "Random Encounter (Region H) - Barista (Pants)"
        ],
        [
          "addmeat",
          "500"
        ],
        [
          "if",
          "!re_h_gotbaristacoffeecheck"
        ],
        [
          "say",
          "There's still some coffee left in the pot, so you pour yourself a cup before you go."
        ],
        [
          "if",
          "!re_h_gotbaristacoffeecheck"
        ],
        [
          "checklocation",
          "Random Encounter (Region H) - Barista (Coffee)"
        ],
        [
          "addstate",
          "winbutton,Oh well!"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_chefpepper": {
      "grab": [
        [
          "say",
          "Your finger and thumb immediately start throbbing as you pluck the pepper.  You toss it into your rucksack before it can do any more damage."
        ],
        [
          "checklocation",
          "Random Encounter (Region A) - Murder Pepper"
        ],
        [
          "addflag",
          "re_a_gotchefpeppercheck"
        ],
        [
          "option",
          "done",
          "Hot!"
        ]
      ]
    },
    "re_deadcowboya": {
      "deadcowboya2": [
        [
          "say",
          "He won't be needing these pants any more."
        ],
        [
          "checklocation",
          "Random Encounter (Region A) - Corpse of a Cowboy"
        ],
        [
          "option",
          "done",
          "I'll put 'em to good use."
        ]
      ],
      "ruthless": [
        [
          "say",
          "Dang, @firstname@.  You're really not the sentimental type, are you."
        ],
        [
          "checklocation",
          "Random Encounter (Region A) - Corpse of a Cowboy"
        ],
        [
          "additem",
          "bone,3"
        ],
        [
          "option",
          "done",
          "Nope."
        ]
      ],
      "honorable": [
        [
          "say",
          "You dig a grave and put the cowboy's remains in it.  It's the least you could do."
        ],
        [
          "if",
          "matchstring(@motivation@,altruism)"
        ],
        [
          "addxp",
          "@xpreward_a@*2"
        ],
        [
          "else",
          ""
        ],
        [
          "addxp",
          "@xpreward_a@"
        ],
        [
          "say",
          "Oh, wait!  The cowboy's chaps are still lying on the ground.  They must have slipped off his bones somehow while you were gently dumping them into that hole."
        ],
        [
          "say",
          "Well, you wouldn't want to dig him back up at this point.  That would be <i>dis</i>honorable.  And just leaving them here would be wasteful, so..."
        ],
        [
          "checklocation",
          "Random Encounter (Region A) - Corpse of a Cowboy"
        ],
        [
          "option",
          "done",
          "It's not really graverobbing if they never made it into the grave."
        ]
      ]
    },
    "re_elvcache_a": {
      "open": [
        [
          "say",
          "You find a few bits and pieces worth keeping."
        ],
        [
          "addstate",
          "returnscript,re_elvcache_a"
        ],
        [
          "addstate",
          "returnstate,keepgoing"
        ],
        [
          "runscript",
          "container_loot_elv"
        ]
      ]
    },
    "re_elvcache_b": {
      "open": [
        [
          "addstate",
          "returnscript,re_elvcache_b"
        ],
        [
          "addstate",
          "returnstate,keepgoing"
        ],
        [
          "runscript",
          "container_loot_elv"
        ]
      ]
    },
    "re_elvcache_c": {
      "open": [
        [
          "say",
          "You fumble around the outside of the crate until you find the bit that makes the lid slide open when you push it."
        ],
        [
          "addstate",
          "returnscript,re_elvcache_c"
        ],
        [
          "addstate",
          "returnstate,keepgoing"
        ],
        [
          "runscript",
          "container_loot_elv"
        ]
      ]
    },
    "re_elvcache_d": {
      "open": [
        [
          "say",
          "You poke at the crate until you find the button that makes it open. Presumably the bear won't miss this stuff."
        ],
        [
          "addstate",
          "returnscript,re_elvcache_d"
        ],
        [
          "addstate",
          "returnstate,keepgoing"
        ],
        [
          "runscript",
          "container_loot_elv"
        ]
      ]
    },
    "re_elvcache_e": {
      "open": [
        [
          "say",
          "You slot the keystone into the appropriate hole, and the lid slides open, conveniently covering up the keyhole so you can't take the stone back. You do get some other stuff in exchange, though."
        ],
        [
          "removeitem",
          "elv_key"
        ],
        [
          "addstate",
          "returnscript,re_elvcache_e"
        ],
        [
          "addstate",
          "returnstate,keepgoing"
        ],
        [
          "runscript",
          "container_loot_elv"
        ]
      ]
    },
    "re_elvcache_f": {
      "open": [
        [
          "say",
          "You cross your fingers as you feed the crate one of your valuable keystones. It opens to reveal..."
        ],
        [
          "removeitem",
          "elv_key"
        ],
        [
          "addstate",
          "returnscript,re_elvcache_f"
        ],
        [
          "addstate",
          "returnstate,keepgoing"
        ],
        [
          "runscript",
          "container_loot_elv"
        ]
      ]
    },
    "re_goblinambush": {
      "gary2": [
        [
          "say",
          "You shout \"Thanks!\" down to it in goblin. At least, that was your intention, and the goblin doesn't seem offended, so presumably you pronounced it more-or-less right."
        ],
        [
          "addxp",
          "@xpreward_a@"
        ],
        [
          "checklocation",
          "Random Encounter (Region A) - Moxious Goblin"
        ],
        [
          "option",
          "done",
          "Cool"
        ]
      ],
      "hornswoggle": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "Hey! Quick! There's a cougar coming! We have to distract it! Do you have any food to throw at it? Hurry!"
        ],
        [
          "if",
          "!gary"
        ],
        [
          "if",
          "gary"
        ],
        [
          "rightsay",
          "Gary quickly translates, and the goblin throws you a sandwich before running away in a panic."
        ],
        [
          "checklocation",
          "Random Encounter (Region A) - Moxious Goblin"
        ],
        [
          "option",
          "done",
          "Score!"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You clobber the goblin, and find some goodies in the shrubbery he was rustling."
        ],
        [
          "addxp",
          "@xpreward_a@"
        ],
        [
          "checklocation",
          "Random Encounter (Region A) - Moxious Goblin"
        ],
        [
          "if",
          "!hasitem(pistol_goblin) && itemroll(20)"
        ],
        [
          "additem",
          "pistol_goblin"
        ],
        [
          "addmeat",
          "rand(20,30),1"
        ],
        [
          "addstate",
          "winbutton,Sweet"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_goblinb1": {
      "intim2": [
        [
          "leftspeak",
          "$lastoption$"
        ],
        [
          "checklocation",
          "Random Encounter (Region B) - Gulch Goblin Cactusjack"
        ],
        [
          "addxp",
          "@xpreward_a@"
        ],
        [
          "sayoption",
          "done",
          "Probably."
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You won! I guess sometimes violence is the solution after all, if the problem is not having an axe."
        ],
        [
          "addxp",
          "@xpreward_b@"
        ],
        [
          "checklocation",
          "Random Encounter (Region B) - Gulch Goblin Cactusjack"
        ],
        [
          "if",
          "itemroll(20)"
        ],
        [
          "additem",
          "food_guffin"
        ],
        [
          "addmeat",
          "rand(15,20),1"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_goblinb2": {
      "gary": [
        [
          "say",
          "Gary and the goblin have a conversation. They're talking quickly and using long words, so you can't make most of it out, but they seem pretty amiable. The chef even jacks up a couple flipflaps for you."
        ],
        [
          "say",
          "...I mean, flips up a couple flapjacks. Man, what do they put in this cough syrup?"
        ],
        [
          "checklocation",
          "Random Encounter (Region B) - Gulch Goblin Flapjackjack (Flapjacks)"
        ],
        [
          "addxp",
          "@xpreward_b@"
        ],
        [
          "option",
          "done",
          "Nice!"
        ]
      ],
      "intim2": [
        [
          "leftsay",
          "The agreement, I to altering. To praying, you, that I not to altering it fu--"
        ],
        [
          "rightsay",
          "Ugh. Just to taking and going away."
        ],
        [
          "checklocation",
          "Random Encounter (Region B) - Gulch Goblin Flapjackjack (Flapjacks)"
        ],
        [
          "addxp",
          "@xpreward_a@"
        ],
        [
          "option",
          "done",
          "Alright!"
        ]
      ],
      "fox2": [
        [
          "say",
          "You teach the goblin a simple magical cantrip to flip cooking foods over with a snap of the fingers, and they happily give you the spatula."
        ],
        [
          "checklocation",
          "Random Encounter (Region B) - Gulch Goblin Flapjackjack (Spatula)"
        ],
        [
          "addxp",
          "@xpreward_a@"
        ],
        [
          "option",
          "done",
          "Cool!"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You handily flipped that flapjerk."
        ],
        [
          "addxp",
          "@xpreward_b@"
        ],
        [
          "checklocation",
          "Random Encounter (Region B) - Gulch Goblin Flapjackjack (Spatula)"
        ],
        [
          "checklocation",
          "Random Encounter (Region B) - Gulch Goblin Flapjackjack (Flapjacks)"
        ],
        [
          "if",
          "itemroll(50)"
        ],
        [
          "additem",
          "food_goblinflapjacks"
        ],
        [
          "if",
          "itemroll(30)"
        ],
        [
          "additem",
          "food_goblinflapjacks"
        ],
        [
          "addmeat",
          "rand(10,20),1"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_goblinb3": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You beat the goblin crackerjack and take all the toy surprises inside."
        ],
        [
          "addxp",
          "@xpreward_b@"
        ],
        [
          "checklocation",
          "Random Encounter (Region B) - Gulch Goblin Crackerjack"
        ],
        [
          "if",
          "itemroll(20)"
        ],
        [
          "additem",
          "food_goblinsandwich"
        ],
        [
          "if",
          "itemroll(20)"
        ],
        [
          "additem",
          "pistol_goblin"
        ],
        [
          "addmeat",
          "rand(20,25),1"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_goblinc1": {
      "horns3": [
        [
          "leftspeak",
          "$lastoption$"
        ],
        [
          "rightsay",
          "Yes! Yes!"
        ],
        [
          "say",
          "The goblin wiggles out of its boots, and you take them and ride away on your horse. Which seems absurdly mean, but goblins don't typically wear shoes at all, so it's only <i>pretty</i> mean."
        ],
        [
          "checklocation",
          "Random Encounter (Region C) - Jackbooted Gulch Goblin"
        ],
        [
          "addxp",
          "@xpreward_b@"
        ],
        [
          "option",
          "done",
          "Yeah"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You gave that goblin the boot, and took away its boots."
        ],
        [
          "addxp",
          "@xpreward_c@"
        ],
        [
          "checklocation",
          "Random Encounter (Region C) - Jackbooted Gulch Goblin"
        ],
        [
          "additem",
          "food_guffin"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]

    },
    "re_goblinc2": {
      "hornswoggle": [
        [
          "leftsay",
          "I to knowing a good clown trick, a good trick of magic!"
        ],
        [
          "rightsay",
          "Oh yes oh good! To showing me it?"
        ],
        [
          "say",
          "You borrow its ball, and with elaborate and theatrical flourishes you make it appear to vanish, while hiding it in your armpit. The goblin applauds, very impressed, and waves happily as you leave."
        ],
        [
          "checklocation",
          "Random Encounter (Region C) - Gulch Goblin Juggler"
        ],
        [
          "addxp",
          "@xpreward_b@"
        ],
        [
          "option",
          "done",
          "Sweet"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You beat up the goblin. Another weird clown is the last thing this world needs."
        ],
        [
          "addxp",
          "@xpreward_c@"
        ],
        [
          "checklocation",
          "Random Encounter (Region C) - Gulch Goblin Juggler"
        ],
        [
          "additem",
          "food_goblinsandwich"
        ],
        [
          "addstate",
          "winbutton,For real"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_goblinc3": {
      "options": [
        [
          "option",
          "fight",
          "Rob the goblin [Fight]"
        ],
        [
          "if",
          "hasskill(goblintongue)"
        ],
        [
          "option",
          "talk",
          "Talk to it [Goblintongue]"
        ],
        [
          "if",
          "gary"
        ],
        [
          "option",
          "gary",
          "Have Gary deal with it"
        ],
        [
          "if",
          "!hasskill(goblintongue)"
        ],
        [
          "option",
          "comm",
          "Try to communicate with it"
        ],
        [
          "else",
          ""
        ],
        [
          "option",
          "leave",
          "Leave the goblin alone"
        ]
      ],
      "comm": [
        [
          "say",
          "You and the goblin gesture at each other for a bit and manage just enough understanding for a simple transaction or two."
        ],
        [
          "rightpicture",
          "portrait_goblinc3"
        ],
        [
          "rightsay",
          "%goblin_paragraph%"
        ],
        [
          "say",
          "Presumably you could put some Meat down and the goblin would give you something for it."
        ],
        [
          "option",
          "shop",
          "Examine the merchandise"
        ],
        [
          "option",
          "fight",
          "Rob the goblin [Fight]"
        ],
        [
          "option",
          "leave",
          "Leave the goblin alone"
        ]
      ],
      "shop": [
        [
          "if",
          "re_c_gotnailringcheck && re_c_gotglassringcheck && re_c_gotleadringcheck"
        ],
        [
          "goto",
          "boughtall"
        ],
        [
          "say",
          "On closer inspection, most of the jewelry on offer is rubbish, but you do spot a few rings that are rather nice-looking.  The goblin notices your interest."
        ],
        [
          "rightpicture",
          "portrait_goblinc3"
        ],
        [
          "if",
          "hasskill(goblintongue)"
        ],
        [
          "rightsay",
          "Rings are 100 meat for buying!"
        ],
        [
          "else",
          ""
        ],
        [
          "rightsay",
          "%goblin_paragraph%"
        ],
        [
          "if",
          "meat<=99"
        ],
        [
          "grayoption",
          "fart",
          "Buy a ring [Requires 100 meat]"
        ],
        [
          "if",
          "meat>99 && !re_c_gotnailringcheck"
        ],
        [
          "option",
          "ring1",
          "Buy the tough-looking ring [100 Meat]"
        ],
        [
          "if",
          "meat>99 && !re_c_gotglassringcheck"
        ],
        [
          "option",
          "ring2",
          "Buy the sparkly ring [100 Meat]"
        ],
        [
          "if",
          "meat>99 && !re_c_gotleadringcheck"
        ],
        [
          "option",
          "ring3",
          "Buy the elegant ring [100 Meat]"
        ],
        [
          "option",
          "fight",
          "Rob him [Fight]"
        ],
        [
          "option",
          "done",
          "Leave"
        ]
      ],
      "ring1": [
        [
          "addmeat",
          "-100"
        ],
        [
          "if",
          "hasskill(goblintongue)"
        ],
        [
          "rightsay",
          "So thanking you! Here it is!"
        ],
        [
          "else",
          ""
        ],
        [
          "rightsay",
          "%goblin_paragraph%"
        ],
        [
          "checklocation",
          "Random Encounter (Region C) - Gulch Goblin Jeweler (Nail Ring)"
        ],
        [
          "addflag",
          "re_c_gotnailringcheck"
        ],
        [
          "goto",
          "afterpurchaseopts"
        ]
      ],
      "ring2": [
        [
          "addmeat",
          "-100"
        ],
        [
          "if",
          "hasskill(goblintongue)"
        ],
        [
          "rightsay",
          "So thanking you! Here it is!"
        ],
        [
          "else",
          ""
        ],
        [
          "rightsay",
          "%goblin_paragraph%"
        ],
        [
          "checklocation",
          "Random Encounter (Region C) - Gulch Goblin Jeweler (Glass Ring)"
        ],
        [
          "addflag",
          "re_c_gotglassringcheck"
        ],
        [
          "goto",
          "afterpurchaseopts"
        ]
      ],
      "ring3": [
        [
          "addmeat",
          "-100"
        ],
        [
          "if",
          "hasskill(goblintongue)"
        ],
        [
          "rightsay",
          "So thanking you! Here it is!"
        ],
        [
          "else",
          ""
        ],
        [
          "rightsay",
          "%goblin_paragraph%"
        ],
        [
          "checklocation",
          "Random Encounter (Region C) - Gulch Goblin Jeweler (Lead Ring)"
        ],
        [
          "addflag",
          "re_c_gotleadringcheck"
        ],
        [
          "goto",
          "afterpurchaseopts"
        ]
      ],
      "afterpurchaseopts": [
        [
          "if",
          "re_c_gotnailringcheck && re_c_gotglassringcheck && re_c_gotleadringcheck"
        ],
        [
          "option",
          "boughtall",
          "Seems like that was the last one"
        ],
        [
          "else",
          ""
        ],
        [
          "option",
          "shop",
          "Keep shopping"
        ],
        [
          "if",
          "!(re_c_gotnailringcheck && re_c_gotglassringcheck && re_c_gotleadringcheck)"
        ],
        [
          "option",
          "done",
          "Thank them and leave"
        ]
      ],
      "boughtall": [
        [
          "say",
          "The goblin's ramshackle counter is now bare.  He scratches his head and looks through his bag before shrugging, apparently pleased with the day's profits."
        ],
        [
          "option",
          "fight",
          "<i>Now</i> rob him [Fight]"
        ],
        [
          "option",
          "done",
          "Tip your hat and leave"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You knock the goblin out.  During the scuffle it seems like most of his Meat and any remaining wares were ruined, but a shiny ring catches your eye."
        ],
        [
          "addxp",
          "@xpreward_c@"
        ],
        [
          "checklocation",
          "Random Encounter (Region C) - Gulch Goblin Jeweler (Magic Ring)"
        ],
        [
          "addmeat",
          "rand(15,25),1"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_goblind1": {
      "gary2": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "Hmm, yeah."
        ],
        [
          "leftpicture",
          "portrait_gary_flipped"
        ],
        [
          "leftsay",
          "It some pebbles to giving me? You can having."
        ],
        [
          "checklocation",
          "Random Encounter (Region D) - Goblin Moon Weirdo"
        ],
        [
          "addxp",
          "@xpreward_d@"
        ],
        [
          "sayoption",
          "done",
          "Thanks?"
        ]
      ],
      "comm": [
        [
          "say",
          "You get the goblin's attention again, and try to ask what it's doing with gestures and shrugs and exaggerated confused expressions. It points emphatically up at the sky and does a little dance with lots of smiling and its arms making a big circle."
        ],
        [
          "rightpicture",
          "portrait_goblind1"
        ],
        [
          "rightsay",
          "%goblin_paragraph%"
        ],
        [
          "leftsay",
          "...A moon? It's way too early, the moons won't be out for hours."
        ],
        [
          "say",
          "The goblin hands you some pebbles with a grin, and goes back to staring upward."
        ],
        [
          "checklocation",
          "Random Encounter (Region D) - Goblin Moon Weirdo"
        ],
        [
          "addxp",
          "@xpreward_c@"
        ],
        [
          "sayoption",
          "done",
          "Thanks?"
        ]
      ],
      "intim": [
        [
          "leftsay",
          "You should to giving me moon rocks these. Or else!"
        ],
        [
          "rightsay",
          "Okay! Here are they!"
        ],
        [
          "checklocation",
          "Random Encounter (Region D) - Goblin Moon Weirdo"
        ],
        [
          "leftsay",
          "Oh. I was not to expecting this so easily."
        ],
        [
          "rightsay",
          "At home many more I to having! You to enjoying them!"
        ],
        [
          "addxp",
          "@xpreward_c@"
        ],
        [
          "sayoption",
          "done",
          "Thanks!"
        ]
      ],
      "outfox": [
        [
          "say",
          "You start to explain the moons -- their make-up, their origins, how they orbit the planet and each other, and so on -- to the goblin, but it turns out that the goblin actually knows far more about it than you do. Fortunately, they're kind enough to not shame you for humansplaining, and even share their moon rocks with you."
        ],
        [
          "checklocation",
          "Random Encounter (Region D) - Goblin Moon Weirdo"
        ],
        [
          "addxp",
          "@xpreward_c@"
        ],
        [
          "option",
          "done",
          "Cool"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You beat the goblin up and take its... moon rocks?"
        ],
        [
          "addxp",
          "@xpreward_d@"
        ],
        [
          "checklocation",
          "Random Encounter (Region D) - Goblin Moon Weirdo"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_goblind2": {
      "outfox2": [
        [
          "leftspeak",
          "$lastoption$"
        ],
        [
          "rightsay",
          "Ah! Yes! Another chef-mans suggesting this! But texture all of wrong. Here, you can having his pants, they don't goblin legs fitting."
        ],
        [
          "checklocation",
          "Random Encounter (Region D) - Goblin Chef"
        ],
        [
          "addxp",
          "@xpreward_c@"
        ],
        [
          "sayoption",
          "done",
          "Uh... okay. Thanks."
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You beat up the goblin and take some pants. Oddly, they're human-sized? Seems like maybe there's a story there."
        ],
        [
          "addxp",
          "@xpreward_d@"
        ],
        [
          "checklocation",
          "Random Encounter (Region D) - Goblin Chef"
        ],
        [
          "addstate",
          "winbutton,Hmmm."
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_goblind3": {
      "intim2": [
        [
          "leftsay",
          "Giving me that pamphlet, or I'll telling your whole village about a rudeness!"
        ],
        [
          "say",
          "The goblin grumbles profanely, but gives you the pamphlet."
        ],
        [
          "checklocation",
          "Random Encounter (Region D) - Foul-Mouthed Goblin"
        ],
        [
          "addxp",
          "@xpreward_c@"
        ],
        [
          "option",
          "done",
          "Alright!"
        ]
      ],
      "outfox": [
        [
          "leftsay",
          "Giving me this pamphlet, and I am teaching you more better swearings."
        ],
        [
          "rightsay",
          "Oh! Wow! Yes okay!"
        ],
        [
          "say",
          "You rack your brain for all the best things your uncle used to say when he was roaring drunk, and the goblin is suitably impressed."
        ],
        [
          "checklocation",
          "Random Encounter (Region D) - Foul-Mouthed Goblin"
        ],
        [
          "addxp",
          "@xpreward_c@"
        ],
        [
          "option",
          "done",
          "Sweet"
        ]
      ],
      "horns2": [
        [
          "say",
          "You teach the goblin a number of phrases like \"charming gentleman\" and \"have a pleasant afternoon\". He doesn't suspect a thing, and the next human he meets will have a much more polite (if puzzling) encounter."
        ],
        [
          "checklocation",
          "Random Encounter (Region D) - Foul-Mouthed Goblin"
        ],
        [
          "addxp",
          "@xpreward_c@"
        ],
        [
          "option",
          "done",
          "Nice"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You won! That'll teach him to insult strangers, the muffin-chucker."
        ],
        [
          "addxp",
          "@xpreward_d@"
        ],
        [
          "checklocation",
          "Random Encounter (Region D) - Foul-Mouthed Goblin"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_gobline1": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You beat the goblin up and take his fancy buffalo skull hat, as well as the Meat that was lying on the ground."
        ],
        [
          "addxp",
          "@xpreward_e@"
        ],
        [
          "checklocation",
          "Random Encounter (Region E) - Goblin Wearing a Buffalo Skull"
        ],
        [
          "addmeat",
          "11"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_gobline2": {
      "gary2": [
        [
          "say",
          "Eventually Gary directs the goblin to a stand of cactus the two of you passed a ways back that didn't look any different to you than any of the rest of the cactus around here, and the goblin gives him a spare fork as thanks."
        ],
        [
          "checklocation",
          "Random Encounter (Region E) - Goblin Tuna Chef"
        ],
        [
          "addxp",
          "@xpreward_e@"
        ],
        [
          "sayoption",
          "done",
          "Alrighty then."
        ]
      ],
      "intim": [
        [
          "leftsay",
          "I'll show <i>you</i> tuna! Give me that fork, or I'll tuna you!!"
        ],
        [
          "rightsay",
          "Ahh! What that even meaning?"
        ],
        [
          "leftsay",
          "Graaahh!"
        ],
        [
          "say",
          "The goblin drops its fork and runs away, panicked and confused."
        ],
        [
          "checklocation",
          "Random Encounter (Region E) - Goblin Tuna Chef"
        ],
        [
          "addxp",
          "@xpreward_d@"
        ],
        [
          "option",
          "done",
          "Cool"
        ]
      ],
      "fox2": [
        [
          "say",
          "The goblin gives you a tuna fork, and the two of you hunt around for a while until you find a stand of prickly pears aka tunas. It turns out the fork is necessary because tuna pricklers are tiny, barbed, and absolute bastards."
        ],
        [
          "checklocation",
          "Random Encounter (Region E) - Goblin Tuna Chef"
        ],
        [
          "addxp",
          "@xpreward_d@"
        ],
        [
          "option",
          "done",
          "Okay!"
        ]
      ],
      "horn2": [
        [
          "say",
          "The goblin gives you its fork, and you point in a random direction. After all, this is the desert, and you're bound to find plenty of cactuses no matter where you go."
        ],
        [
          "checklocation",
          "Random Encounter (Region E) - Goblin Tuna Chef"
        ],
        [
          "addxp",
          "@xpreward_d@"
        ],
        [
          "option",
          "done",
          "Cool"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You beat up the goblin chef and take his big fork before he can use it to eat you, which he probably almost certainly was going to do."
        ],
        [
          "addxp",
          "@xpreward_e@"
        ],
        [
          "checklocation",
          "Random Encounter (Region E) - Goblin Tuna Chef"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_gobline3": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You won! Such lawlessness!"
        ],
        [
          "addxp",
          "@xpreward_e@"
        ],
        [
          "checklocation",
          "Random Encounter (Region E) - Self-Deputized Goblin"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_goblinf1": {
      "intim": [
        [
          "leftsay",
          "Hah! Foolish goblin! The worst cactus predator is me!"
        ],
        [
          "rightsay",
          "Oh no!"
        ],
        [
          "leftsay",
          "Watching me kicking over all of a cactuses!"
        ],
        [
          "rightsay",
          "No! Here, will giving you a gift not to doing that!"
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Cactus-Suited Goblin"
        ],
        [
          "sayoption",
          "intim2",
          "Very well, I am accepting your offer."
        ]
      ],
      "horn2": [
        [
          "leftspeak",
          "$lastoption$"
        ],
        [
          "rightsay",
          "Umm... giving you this club?"
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Cactus-Suited Goblin"
        ],
        [
          "leftsay",
          "...I'm not sure why you didn't just attack me with it, but okay, fair's fair."
        ],
        [
          "addxp",
          "@xpreward_e@"
        ],
        [
          "option",
          "done",
          "Cool"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You beat up a goblin in a cactus costume. Will this be the silliest fight in the whole adventure? Probably not."
        ],
        [
          "addxp",
          "@xpreward_f@"
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Cactus-Suited Goblin"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_goblinf2": {
      "buyyes": [
        [
          "say",
          "You purchase the boots from the goblin, who seems very excited to have made a sale."
        ],
        [
          "addmeat",
          "-250"
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Goblin Tanner"
        ],
        [
          "option",
          "done",
          "Cool"
        ]
      ],
      "intim2": [
        [
          "leftsay",
          "No! For <i>free</i> giving them, or beating you up!"
        ],
        [
          "rightsay",
          "Oh no!"
        ],
        [
          "say",
          "The goblin sadly hands over the boots."
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Goblin Tanner"
        ],
        [
          "addxp",
          "@xpreward_e@"
        ],
        [
          "option",
          "done",
          "Good!"
        ]
      ],
      "outfox": [
        [
          "leftsay",
          "Hmm. Will you giving me boots for teaching a tanning magic?"
        ],
        [
          "rightsay",
          "Oh! Wow! Sure!"
        ],
        [
          "say",
          "You teach the goblin a simplified low-power broiling cantrip that should roast the leather more quickly than sunlight, and they happily give you the boots as payment."
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Goblin Tanner"
        ],
        [
          "addxp",
          "@xpreward_e@"
        ],
        [
          "option",
          "done",
          "Nice!"
        ]
      ],
      "hagglebuy": [
        [
          "say",
          "You buy the boots for @goblinf2_haggle@ Meat."
        ],
        [
          "addmeat",
          "-@goblinf2_haggle@"
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Goblin Tanner"
        ],
        [
          "addxp",
          "@xpreward_e@"
        ],
        [
          "option",
          "done",
          "Cool"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You beat the goblin up and take his boots. Good job?"
        ],
        [
          "addxp",
          "@xpreward_f@"
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Goblin Tanner"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_goblinf3": {
      "gary": [
        [
          "say",
          "Gary and the soldier-goblin chatter back and forth for a bit. The soldier gives Gary a small bundle, and the two of them part ways with a salute."
        ],
        [
          "leftpicture",
          "portrait_gary_flipped"
        ],
        [
          "leftsay",
          "They finding outfit on dead soldier mans and is soldier now! Here, giving us a thing not needing."
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Goblin Grave Robber (Field Trauma Kit)"
        ],
        [
          "addxp",
          "@xpreward_f@"
        ],
        [
          "sayoption",
          "done",
          "Well, that's nice of them."
        ]
      ],
      "medals": [
        [
          "leftsay",
          "I seeing you having a medal!"
        ],
        [
          "rightsay",
          "Hmm? Oh! Shiny dangle! Yes!"
        ],
        [
          "leftsay",
          "Not earning shiny dangle properly! Should giving to me, for collection."
        ],
        [
          "rightsay",
          "Aww. Okay."
        ],
        [
          "say",
          "The goblin hands over his medal, and you put it with your others, without a shred of irony."
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Goblin Grave Robber (Pin)"
        ],
        [
          "option",
          "done",
          "Excellent"
        ]
      ],
      "intim2": [
        [
          "leftsay",
          "Giving supplies!"
        ],
        [
          "rightsay",
          "Sempering fi!"
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Goblin Grave Robber (Field Trauma Kit)"
        ],
        [
          "addxp",
          "@xpreward_e@"
        ],
        [
          "sayoption",
          "done",
          "Good! At easing!"
        ]
      ],
      "fox2": [
        [
          "leftsay",
          "Not earning shiny dangle properly, other soldiers angry if seeing!"
        ],
        [
          "rightsay",
          "Oh no! You take!"
        ],
        [
          "say",
          "The goblin hands over his medal with a grateful salute."
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Goblin Grave Robber (Pin)"
        ],
        [
          "addxp",
          "@xpreward_e@"
        ],
        [
          "option",
          "done",
          "Okay!"
        ]
      ],
      "horn2": [
        [
          "leftspeak",
          "$lastoption$"
        ],
        [
          "rightsay",
          "Oh! Okay!"
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Goblin Grave Robber (Field Trauma Kit)"
        ],
        [
          "addxp",
          "@xpreward_e@"
        ],
        [
          "option",
          "done",
          "Cool"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You won a decisive military victory over that one goblin."
        ],
        [
          "addxp",
          "@xpreward_f@"
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Goblin Grave Robber (Pin)"
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Goblin Grave Robber (Field Trauma Kit)"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_gobling1": {
      "options": [
        [
          "option",
          "fight",
          "Attack the goblin [Fight]"
        ],
        [
          "if",
          "hasskill(goblintongue)"
        ],
        [
          "option",
          "talk",
          "Talk to it [Goblintongue]"
        ],
        [
          "if",
          "gary"
        ],
        [
          "option",
          "gary",
          "Have Gary deal with it"
        ],
        [
          "if",
          "!hasskill(goblintongue)"
        ],
        [
          "option",
          "comm",
          "Try to communicate with it"
        ],
        [
          "if",
          "darkhorse"
        ],
        [
          "option",
          "runaway",
          "Run away [Dark Horse]"
        ],
        [
          "else",
          ""
        ],
        [
          "option",
          "surrender",
          "Surrender"
        ]
      ],
      "buyweapon250": [
        [
          "say",
          "You give the goblin 250 Meat and pick up a... well, any piece of driftwood can be used as a weapon, right?"
        ],
        [
          "addmeat",
          "-250"
        ],
        [
          "checklocation",
          "Random Encounter (Region G) - Goblin Driftwood Sculptor (Weapon)"
        ],
        [
          "addflag",
          "re_g_gotdriftwoodweaponcheck"
        ],
        [
          "option",
          "shopagain250",
          "I guess so..."
        ]
      ],
      "buyhat250": [
        [
          "say",
          "You give the goblin 250 Meat and pick up a... a piece of driftwood with a chinstrap on it?"
        ],
        [
          "addmeat",
          "-250"
        ],
        [
          "checklocation",
          "Random Encounter (Region G) - Goblin Driftwood Sculptor (Hat)"
        ],
        [
          "addflag",
          "re_g_gotdriftwoodhatcheck"
        ],
        [
          "option",
          "shopagain250",
          "Well, okay..."
        ]
      ],
      "buyshield250": [
        [
          "say",
          "You give the goblin 250 Meat and pick up a... well, any piece of driftwood can be used as a shield, right?"
        ],
        [
          "addmeat",
          "-250"
        ],
        [
          "checklocation",
          "Random Encounter (Region G) - Goblin Driftwood Sculptor (Shield)"
        ],
        [
          "addflag",
          "re_g_gotdriftwoodshieldcheck"
        ],
        [
          "option",
          "shopagain250",
          "I guess so..."
        ]
      ],
      "shopagain250": [
        [
          "if",
          "re_g_gotdriftwoodweaponcheck && re_g_gotdriftwoodhatcheck && re_g_gotdriftwoodshieldcheck"
        ],
        [
          "goto",
          "boughtall"
        ],
        [
          "say",
          "The goblin's simmered down a bit but still gives you a hard stare as you look over their other \"art\"."
        ],
        [
          "if",
          "player.meat>=250 && !re_g_gotdriftwoodweaponcheck"
        ],
        [
          "option",
          "buyweapon250",
          "Buy a driftwood... weapon? [250 Meat]"
        ],
        [
          "if",
          "player.meat<250 && !re_g_gotdriftwoodweaponcheck"
        ],
        [
          "grayoption",
          "nobuy",
          "Buy a driftwood... weapon? [Requires 250 Meat]"
        ],
        [
          "if",
          "player.meat>=250 && !re_g_gotdriftwoodhatcheck"
        ],
        [
          "option",
          "buyhat250",
          "Buy a driftwood... hat? [250 Meat]"
        ],
        [
          "if",
          "player.meat<250 && !re_g_gotdriftwoodhatcheck"
        ],
        [
          "grayoption",
          "nobuy",
          "Buy a driftwood... hat? [Requires 250 Meat]"
        ],
        [
          "if",
          "player.meat>=250 && !re_g_gotdriftwoodshieldcheck"
        ],
        [
          "option",
          "buyshield250",
          "Buy a driftwood... shield? [250 Meat]"
        ],
        [
          "if",
          "player.meat<250 && !re_g_gotdriftwoodshieldcheck"
        ],
        [
          "grayoption",
          "nobuy",
          "Buy a driftwood... shield? [Requires 250 Meat]"
        ],
        [
          "option",
          "fight",
          "Attack the goblin [Fight]"
        ],
        [
          "if",
          "(re_g_gotdriftwoodweaponcheck && re_g_gotdriftwoodhatcheck) || (re_g_gotdriftwoodweaponcheck && re_g_gotdriftwoodshieldcheck) || (re_g_gotdriftwoodhatcheck && re_g_gotdriftwoodshieldcheck)"
        ],
        [
          "option",
          "done",
          "Take your new thingamajigs and leave"
        ],
        [
          "else",
          ""
        ],
        [
          "option",
          "done",
          "Take your new thingamajig and leave"
        ]
      ],
      "boughtall": [
        [
          "if",
          "hasskill(goblintongue)"
        ],
        [
          "say",
          "The goblin is counting their earnings and muttering about starting a studio and hiring more artists to carry out their vision."
        ],
        [
          "else",
          ""
        ],
        [
          "say",
          "The goblin is muttering excitedly and counting through its hefty bundle of Meat."
        ],
        [
          "option",
          "fight",
          "Time to show them the meaning of critique [Fight]"
        ],
        [
          "option",
          "done",
          "Leave them to it"
        ]
      ],
      "buyweapon300": [
        [
          "say",
          "You give the goblin 300 Meat and pick up a... well, any piece of driftwood can be used as a weapon, right?"
        ],
        [
          "addmeat",
          "-300"
        ],
        [
          "checklocation",
          "Random Encounter (Region G) - Goblin Driftwood Sculptor (Weapon)"
        ],
        [
          "addflag",
          "re_g_gotdriftwoodweaponcheck"
        ],
        [
          "option",
          "done",
          "I guess so..."
        ]
      ],
      "buyhat300": [
        [
          "say",
          "You give the goblin 300 Meat and pick up a... a piece of driftwood with a chinstrap on it?"
        ],
        [
          "addmeat",
          "-300"
        ],
        [
          "checklocation",
          "Random Encounter (Region G) - Goblin Driftwood Sculptor (Hat)"
        ],
        [
          "addflag",
          "re_g_gotdriftwoodhatcheck"
        ],
        [
          "option",
          "done",
          "Well, okay..."
        ]
      ],
      "buyshield300": [
        [
          "say",
          "You give the goblin 300 Meat and pick up a... well, any piece of driftwood can be used as a shield, right?"
        ],
        [
          "addmeat",
          "-300"
        ],
        [
          "checklocation",
          "Random Encounter (Region G) - Goblin Driftwood Sculptor (Shield)"
        ],
        [
          "addflag",
          "re_g_gotdriftwoodshieldcheck"
        ],
        [
          "option",
          "done",
          "I guess so..."
        ]
      ],
      "shopagain300": [
        [
          "if",
          "re_g_gotdriftwoodweaponcheck && re_g_gotdriftwoodhatcheck && re_g_gotdriftwoodshieldcheck"
        ],
        [
          "goto",
          "boughtall"
        ],
        [
          "say",
          "The goblin's simmered down a bit but still gives you a hard stare as you look over their other \"art\"."
        ],
        [
          "if",
          "player.meat>=300 && !re_g_gotdriftwoodweaponcheck"
        ],
        [
          "option",
          "buyweapon300",
          "Buy a driftwood... weapon? [300 Meat]"
        ],
        [
          "if",
          "player.meat<300 && !re_g_gotdriftwoodweaponcheck"
        ],
        [
          "grayoption",
          "nobuy",
          "Buy a driftwood... weapon? [Requires 300 Meat]"
        ],
        [
          "if",
          "player.meat>=300 && !re_g_gotdriftwoodhatcheck"
        ],
        [
          "option",
          "buyhat300",
          "Buy a driftwood... hat? [300 Meat]"
        ],
        [
          "if",
          "player.meat<300 && !re_g_gotdriftwoodhatcheck"
        ],
        [
          "grayoption",
          "nobuy",
          "Buy a driftwood... hat? [Requires 300 Meat]"
        ],
        [
          "if",
          "player.meat>=300 && !re_g_gotdriftwoodshieldcheck"
        ],
        [
          "option",
          "buyshield300",
          "Buy a driftwood... shield? [300 Meat]"
        ],
        [
          "if",
          "player.meat<300 && !re_g_gotdriftwoodshieldcheck"
        ],
        [
          "grayoption",
          "nobuy",
          "Buy a driftwood... shield? [Requires 300 Meat]"
        ],
        [
          "option",
          "fight",
          "Attack the goblin [Fight]"
        ],
        [
          "if",
          "(re_g_gotdriftwoodweaponcheck && re_g_gotdriftwoodhatcheck) || (re_g_gotdriftwoodweaponcheck && re_g_gotdriftwoodshieldcheck) || (re_g_gotdriftwoodhatcheck && re_g_gotdriftwoodshieldcheck)"
        ],
        [
          "option",
          "done",
          "Take your new thingamajigs and leave"
        ],
        [
          "else",
          ""
        ],
        [
          "option",
          "done",
          "Take your new thingamajig and leave"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "if",
          "re_g_gotdriftwoodweaponcheck && re_g_gotdriftwoodhatcheck && re_g_gotdriftwoodshieldcheck"
        ],
        [
          "say",
          "That'll teach 'em to share their creative work and hope to make a living from it."
        ],
        [
          "else",
          ""
        ],
        [
          "say",
          "You won! The goblin is much calmer now that they're unconscious."
        ],
        [
          "addxp",
          "@xpreward_g@"
        ],
        [
          "checklocation",
          "Random Encounter (Region G) - Goblin Driftwood Sculptor (Shield)"
        ],
        [
          "if",
          "re_g_gotdriftwoodweaponcheck || re_g_gotdriftwoodhatcheck || re_g_gotdriftwoodshieldcheck"
        ],
        [
          "say",
          "You leave them with the Meat. You're not some sort of dirty <i>thief</i> - you paid them, so everything after that was your right."
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_gobling2": {
      "intim2": [
        [
          "leftspeak",
          "$lastoption$"
        ],
        [
          "rightsay",
          "Okay yes!"
        ],
        [
          "say",
          "The goblin gives you the seashell and scampers away in a fright."
        ],
        [
          "checklocation",
          "Random Encounter (Region G) - Goblin Clamdigger"
        ],
        [
          "addxp",
          "@xpreward_f@"
        ],
        [
          "option",
          "done",
          "Good!"
        ]
      ],
      "fox2": [
        [
          "leftsay",
          "Thanks!"
        ],
        [
          "say",
          "Oddly, the shell has a lapel pin glued to the back of it. Maybe a wagonload of seaside souvenirs overturned here sometime in the past?"
        ],
        [
          "checklocation",
          "Random Encounter (Region G) - Goblin Clamdigger"
        ],
        [
          "addxp",
          "@xpreward_f@"
        ],
        [
          "option",
          "done",
          "Sweet!"
        ]
      ],
      "horn2": [
        [
          "leftspeak",
          "$lastoption$"
        ],
        [
          "checklocation",
          "Random Encounter (Region G) - Goblin Clamdigger"
        ],
        [
          "addxp",
          "@xpreward_f@"
        ],
        [
          "option",
          "done",
          "Smooth"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You successfully beat the heck out of a goblin clamdigger."
        ],
        [
          "addxp",
          "@xpreward_g@"
        ],
        [
          "checklocation",
          "Random Encounter (Region G) - Goblin Clamdigger"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_gobling3": {
      "outfox": [
        [
          "say",
          "You teach the goblin a small wind spell to help him guide his bullets a little more accurately, and he gratefully gives you a handmade ring in exchange."
        ],
        [
          "checklocation",
          "Random Encounter (Region G) - Trigger-Happy Goblin Driftwood Sculptor"
        ],
        [
          "addxp",
          "@xpreward_f@"
        ],
        [
          "option",
          "done",
          "Nice!"
        ]
      ],
      "hornswoggle": [
        [
          "say",
          "You spend a little time teaching the goblin how to improve his aim, and he gratefully gives you a handmade ring in exchange. Which is convenient, because you were originally planning on stealing it while shaking his hand."
        ],
        [
          "checklocation",
          "Random Encounter (Region G) - Trigger-Happy Goblin Driftwood Sculptor"
        ],
        [
          "addxp",
          "@xpreward_f@"
        ],
        [
          "option",
          "done",
          "Sweet"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You won, which is pretty lucky considering the goblin already had their gun out and ready!"
        ],
        [
          "addxp",
          "@xpreward_g@"
        ],
        [
          "checklocation",
          "Random Encounter (Region G) - Trigger-Happy Goblin Driftwood Sculptor"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_goblinh1": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You won! Looks like that goblin shouldn't've brought a boulder to a whatever you were using fight."
        ],
        [
          "addxp",
          "@xpreward_h@"
        ],
        [
          "checklocation",
          "Random Encounter (Region H) - Goblin Miner"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_goblinh2": {
      "gbuy": [
        [
          "say",
          "The goblin engraves one more sigil on the gun before giving it to you, but you think maybe it's just their initials."
        ],
        [
          "checklocation",
          "Random Encounter (Region H) - Goblin Gunsmith"
        ],
        [
          "addmeat",
          "-500"
        ],
        [
          "option",
          "done",
          "Cool"
        ]
      ],
      "cbuy": [
        [
          "say",
          "The goblin engraves one more sigil on the gun before giving it to you, but you think maybe it's just their initials."
        ],
        [
          "checklocation",
          "Random Encounter (Region H) - Goblin Gunsmith"
        ],
        [
          "addmeat",
          "-600"
        ],
        [
          "option",
          "done",
          "Cool"
        ]
      ],
      "ibuy": [
        [
          "say",
          "The goblin engraves one more sigil on the gun before giving it to you, but you think maybe it's just their initials."
        ],
        [
          "checklocation",
          "Random Encounter (Region H) - Goblin Gunsmith"
        ],
        [
          "addmeat",
          "-700"
        ],
        [
          "option",
          "done",
          "Cool"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You won! Looks like that goblin brought a gun to a... uh..."
        ],
        [
          "addxp",
          "@xpreward_h@"
        ],
        [
          "checklocation",
          "Random Encounter (Region H) - Goblin Gunsmith"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_goblinh3": {
      "intim2": [
        [
          "leftsay",
          "Human music way better is! Not sounding like a dogs eating a cats!"
        ],
        [
          "say",
          "The angry goblin throws his boots at you and chases you away."
        ],
        [
          "checklocation",
          "Random Encounter (Region H) - Flashy Goblin"
        ],
        [
          "addxp",
          "@xpreward_g@"
        ],
        [
          "option",
          "done",
          "Bah!"
        ]
      ],
      "outfox": [
        [
          "leftsay",
          "Hmm! Think you having a thing here!"
        ],
        [
          "rightsay",
          "Athanking-ya, athanking-ya verra mush."
        ],
        [
          "leftsay",
          "Might suggesting some changes for a human audiences?"
        ],
        [
          "say",
          "You give Gelvis some advice for adjusting their act for humans -- mostly to omit all the pelvic thrusting, which the world probably won't be ready for for another sixty to seventy years. As thanks, they give you a spare pair of their rhinestone boots."
        ],
        [
          "checklocation",
          "Random Encounter (Region H) - Flashy Goblin"
        ],
        [
          "addxp",
          "@xpreward_g@"
        ],
        [
          "option",
          "done",
          "Neat!"
        ]
      ],
      "horn2": [
        [
          "leftspeak",
          "$lastoption$"
        ],
        [
          "say",
          "The goblin signs a random piece of paper you pull out of your pack, and gives you a spare pair of their rhinestone boots as a down-payment."
        ],
        [
          "checklocation",
          "Random Encounter (Region H) - Flashy Goblin"
        ],
        [
          "addxp",
          "@xpreward_g@"
        ],
        [
          "option",
          "done",
          "Sweet"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You won! That'll show that goblin how we feel about anachronisms in <i>this</i> part of town!"
        ],
        [
          "addxp",
          "@xpreward_h@"
        ],
        [
          "checklocation",
          "Random Encounter (Region H) - Flashy Goblin"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_lockboxb": {
      "picklock": [
        [
          "playsound",
          "Player_Use_Lockpick"
        ],
        [
          "removeitem",
          "needle"
        ],
        [
          "say",
          "Once you're inside, you're not sure why they even bothered locking it.  It's been picked clean of everything but a tiny amount of food and an even tinier amount of medicine."
        ],
        [
          "clearrandom",
          ""
        ],
        [
          "pushrandom",
          "food_bloodsausage"
        ],
        [
          "pushrandom",
          "food_instantgrits"
        ],
        [
          "pushrandom",
          "food_jelliedescargot"
        ],
        [
          "pushrandom",
          "food_plumpudding"
        ],
        [
          "pushrandom",
          "food_sodacrackers"
        ],
        [
          "pushrandom",
          "potion_candy1"
        ],
        [
          "pushrandom",
          "potion_candy2"
        ],
        [
          "pushrandom",
          "potion_candy3"
        ],
        [
          "pushrandom",
          "potion_sarsaparilla"
        ],
        [
          "if",
          "hasflag(container_drygoods)>3"
        ],
        [
          "pushrandom",
          "potion_candy4"
        ],
        [
          "if",
          "hasflag(container_drygoods)>6"
        ],
        [
          "pushrandom",
          "potion_candy5"
        ],
        [
          "addstate",
          "quant,1"
        ],
        [
          "if",
          "hasflag(container_drygoods)>3"
        ],
        [
          "incstate",
          "quant,rand(1,2)"
        ],
        [
          "if",
          "hasflag(container_drygoods)>7"
        ],
        [
          "incstate",
          "quant,rand(1,2)"
        ],
        [
          "additem",
          "poprandom(),$quant$"
        ],
        [
          "addstate",
          "quant,1"
        ],
        [
          "if",
          "hasflag(container_drygoods)>5"
        ],
        [
          "incstate",
          "quant,rand(1,2)"
        ],
        [
          "additem",
          "poprandom(),$quant$"
        ],
        [
          "if",
          "itemroll(30)"
        ],
        [
          "additem",
          "poprandom"
        ],
        [
          "incflag",
          "container_drygoods,1"
        ],
        [
          "addstate",
          "returnscript,re_lockboxb"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_medical"
        ]
      ],
      "afterloot": [
        [
          "option",
          "done",
          "Oh well"
        ]
      ]
    },
    "re_lootgravea": {
      "open": [
        [
          "say",
          "Well, if it's a pothole it must have been here a very long time, because you've found the remains of an antique traffic accident."
        ],
        [
          "addstate",
          "returnscript,re_lootgravea"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_grave"
        ]
      ],
      "afterloot": [
        [
          "option",
          "done",
          "Get back on the trail"
        ]
      ]
    },
    "re_lootgraveb": {
      "open": [
        [
          "say",
          "Oh hey, the previous tenant left some stuff. Well, it's all yours now!"
        ],
        [
          "addstate",
          "returnscript,re_lootgraveb"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_grave"
        ]
      ],
      "afterloot": [
        [
          "option",
          "done",
          "Hit the trail"
        ]
      ]
    },
    "re_lootgravec": {
      "open": [
        [
          "playsound",
          "Player_Use_Shovel"
        ],
        [
          "say",
          "You dig up the grave and find... well, pretty much what you'd expect."
        ],
        [
          "addstate",
          "returnscript,re_lootgravec"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_grave"
        ]
      ],
      "afterloot": [
        [
          "option",
          "done",
          "Hit the trail"
        ]
      ]
    },
    "re_lootgraved": {
      "open": [
        [
          "say",
          "Oh hey, there are a few things in here already. Maybe they were just burying this junk, but forgot to fill the hole back in?"
        ],
        [
          "addstate",
          "returnscript,re_lootgraved"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_grave"
        ]
      ],
      "afterloot": [
        [
          "option",
          "done",
          "Hit the trail"
        ]
      ]
    },
    "re_lootgravee": {
      "open": [
        [
          "playsound",
          "Player_Use_Shovel"
        ],
        [
          "say",
          "The grave turns out to be disappointingly treasure-free."
        ],
        [
          "addstate",
          "returnscript,re_lootgravee"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_grave"
        ]
      ],
      "afterloot": [
        [
          "option",
          "done",
          "Hit the trail"
        ]
      ]
    },
    "re_lootgravef": {
      "open": [
        [
          "say",
          "The stuff you find in it makes you lean more toward the 'grave' theory."
        ],
        [
          "addstate",
          "returnscript,re_lootgravef"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_grave"
        ]
      ],
      "afterloot": [
        [
          "option",
          "done",
          "Hit the trail"
        ]
      ]
    },
    "re_lootgraveg": {
      "open": [
        [
          "playsound",
          "Player_Use_Shovel"
        ],
        [
          "say",
          "Oh yeah, it's definitely a grave. Check out this grave stuff:"
        ],
        [
          "addstate",
          "returnscript,re_lootgraveg"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_grave"
        ]
      ],
      "afterloot": [
        [
          "option",
          "done",
          "Yay, free grave stuff!"
        ]
      ]
    },
    "re_lootgraveh": {
      "open": [
        [
          "playsound",
          "Player_Use_Shovel"
        ],
        [
          "say",
          "You dig up the contents of the grave, which are pretty much the sort of stuff you'd expect to find."
        ],
        [
          "addstate",
          "returnscript,re_lootgraveh"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_grave"
        ]
      ],
      "afterloot": [
        [
          "option",
          "done",
          "Hit the trail"
        ]
      ]
    },
    "re_mallet": {
      "open": [
        [
          "say",
          "The crater is strange, like the thing that created it came from below, rather than above."
        ],
        [
          "say",
          "You dig through the rubble and find a hammer."
        ],
        [
          "checklocation",
          "Random Encounter (Region E) - 13th Encounter (Mallet)"
        ],
        [
          "addflag",
          "gotmallet"
        ],
        [
          "option",
          "done",
          "Continue on"
        ]
      ]
    },
    "re_medicinewagon": {
      "open": [
        [
          "say",
          "You fish through one of the bags and ferret out some medicine."
        ],
        [
          "addstate",
          "returnscript,re_medicinewagon"
        ],
        [
          "addstate",
          "returnstate,aftermedicalloot1"
        ],
        [
          "runscript",
          "container_loot_medical"
        ]
      ],
      "aftermedicalloot1": [
        [
          "say",
          "After thoroughly overfishing the first bag, you move on to the second."
        ],
        [
          "addstate",
          "returnscript,re_medicinewagon"
        ],
        [
          "addstate",
          "returnstate,aftermedicalloot2"
        ],
        [
          "runscript",
          "container_loot_medical"
        ]
      ],
      "aftermedicalloot2": [
        [
          "option",
          "done",
          "Pig away"
        ]
      ]
    },
    "re_minecratea": {
      "open": [
        [
          "say",
          "You fish through the crate and help yourself to the contents, which appear to be mining gear. So you were even more right than you knew."
        ],
        [
          "addstate",
          "returnscript,re_minecratea"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_mine"
        ]
      ],
      "afterloot": [
        [
          "option",
          "done",
          "Sweet."
        ]
      ]
    },
    "re_minecrateb": {
      "open": [
        [
          "say",
          "You pry the lid off the crate and help yourself to the contents, which are now YOUR STUFF."
        ],
        [
          "addstate",
          "returnscript,re_minecrateb"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_mine"
        ]
      ],
      "afterloot": [
        [
          "option",
          "done",
          "Get back on the trail"
        ]
      ]
    },
    "re_minecratec": {
      "open": [
        [
          "say",
          "You pry the lid off the crate with your crowbar, so that's one of the possibilities eliminated."
        ],
        [
          "addstate",
          "returnscript,re_minecratec"
        ],
        [
          "addstate",
          "returnstate,aftermineloot"
        ],
        [
          "runscript",
          "container_loot_mine"
        ]
      ],
      "aftermineloot": [
        [
          "addstate",
          "returnscript,re_minecratec"
        ],
        [
          "addstate",
          "returnstate,aftermedicalloot"
        ],
        [
          "runscript",
          "container_loot_medical"
        ]
      ],
      "aftermedicalloot": [
        [
          "option",
          "done",
          "Get back on the trail"
        ]
      ]
    },
    "re_minecrated": {
      "open": [
        [
          "say",
          "You brush the weeds/cactuses out of the way and help yourself to the randomly-generated contents."
        ],
        [
          "addstate",
          "returnscript,re_minecrated"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_mine"
        ]
      ],
      "afterloot": [
        [
          "option",
          "done",
          "Get back on the trail"
        ]
      ]
    },
    "re_minecratee": {
      "open": [
        [
          "say",
          "You pry the lid off your crate and reclaim all your lost and forgotten possessions."
        ],
        [
          "addstate",
          "returnscript,re_minecratee"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_mine"
        ]
      ],
      "afterloot": [
        [
          "option",
          "done",
          "Get back on the trail"
        ]
      ]
    },
    "re_minecratef": {
      "open": [
        [
          "say",
          "You pry the lid off the crate and help yourself to the contents."
        ],
        [
          "addstate",
          "returnscript,re_minecratef"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_mine"
        ]
      ],
      "afterloot": [
        [
          "option",
          "done",
          "Finders keepers!"
        ]
      ]
    },
    "re_minecrateg": {
      "open": [
        [
          "say",
          "You pry the lid off the crate and help yourself to the contents."
        ],
        [
          "addstate",
          "returnscript,re_minecrateg"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_mine"
        ]
      ],
      "afterloot": [
        [
          "option",
          "done",
          "Don't \"mine\" if I do! Ho ho!"
        ]
      ]
    },
    "re_minecrateh": {
      "open": [
        [
          "say",
          "You pry the lid off the crate and help yourself to the contents, which turn out to be both mining gear <i>and</i> first-aid supplies."
        ],
        [
          "addstate",
          "returnscript,re_minecrateh"
        ],
        [
          "addstate",
          "returnstate,aftermineloot"
        ],
        [
          "runscript",
          "container_loot_mine"
        ]
      ],
      "aftermineloot": [
        [
          "addstate",
          "returnscript,re_minecrateh"
        ],
        [
          "addstate",
          "returnstate,aftermedicalloot"
        ],
        [
          "runscript",
          "container_loot_medical"
        ]
      ],
      "aftermedicalloot": [
        [
          "option",
          "done",
          "Score!"
        ]
      ]
    },
    "re_necrobook": {
      "get3": [
        [
          "say",
          "A chill runs down your spine as you touch the book."
        ],
        [
          "checklocation",
          "Random Encounter (Any Region) - 13th Encounter"
        ],
        [
          "option",
          "done",
          "Nice"
        ]
      ]
    },
    "re_ponyring": {
      "get": [
        [
          "say",
          "Approaching the horse more closely, you see the tattered remains of a pair of Pony Express saddlebags on its skeletal flanks."
        ],
        [
          "say",
          "The starboard bag is empty, but the port one contains a skeletal human hand with a ring on it."
        ],
        [
          "say",
          "You conclude that either the horse's rider died with his hand in the saddlebag, or somebody is really sad that the skeleton hand they ordered never showed up even though they paid extra to have it sent Pony Express."
        ],
        [
          "say",
          "Either way, free ring!"
        ],
        [
          "checklocation",
          "Random Encounter (Region D) - 3rd Encounter"
        ],
        [
          "option",
          "done",
          "Continue on"
        ]
      ]
    },
    "re_ranchcratea": {
      "open": [
        [
          "say",
          "You fish through the crate and help yourself to the meager (but free!) contents."
        ],
        [
          "addstate",
          "returnscript,re_ranchcratea"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_ranch"
        ]
      ],
      "afterloot": [
        [
          "option",
          "done",
          "Continue on"
        ]
      ]
    },
    "re_ranchcrateb": {
      "open": [
        [
          "say",
          "You crack open that walnut and help yourself to the delicious nut meats inside."
        ],
        [
          "addstate",
          "returnscript,re_ranchcrateb"
        ],
        [
          "addstate",
          "returnstate,afterranchloot"
        ],
        [
          "runscript",
          "container_loot_ranch"
        ]
      ],
      "afterranchloot": [
        [
          "addstate",
          "returnscript,re_ranchcrateb"
        ],
        [
          "addstate",
          "returnstate,aftermedicalloot"
        ],
        [
          "runscript",
          "container_loot_medical"
        ]
      ],
      "aftermedicalloot": [
        [
          "option",
          "done",
          "In a manner of speaking"
        ]
      ]
    },
    "re_ranchcratec": {
      "open": [
        [
          "say",
          "You help the crate by prying the lid off and helping yourself to the contents."
        ],
        [
          "addstate",
          "returnscript,re_ranchcratec"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_ranch"
        ]
      ],
      "afterloot": [
        [
          "option",
          "done",
          "You're a helper!"
        ]
      ]
    },
    "re_ranchcrated": {
      "open": [
        [
          "say",
          "I don't know what you expected to find in there, but here's what it was:"
        ],
        [
          "addstate",
          "returnscript,re_ranchcrated"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_ranch"
        ]
      ],
      "afterloot": [
        [
          "option",
          "done",
          "I hope that meets your crate expectations."
        ]
      ]
    },
    "re_ranchcratee": {
      "open": [
        [
          "say",
          "You pry the lid off the crate and help yourself to the contents, or perhaps its seeds which just happen to look like the following objects:"
        ],
        [
          "addstate",
          "returnscript,re_ranchcratee"
        ],
        [
          "addstate",
          "returnstate,afterranchloot"
        ],
        [
          "runscript",
          "container_loot_ranch"
        ]
      ],
      "afterranchloot": [
        [
          "addstate",
          "returnscript,re_ranchcratee"
        ],
        [
          "addstate",
          "returnstate,aftermedicalloot"
        ],
        [
          "runscript",
          "container_loot_medical"
        ]
      ],
      "aftermedicalloot": [
        [
          "option",
          "done",
          "Nature is weird"
        ]
      ]
    },
    "re_ranchcratef": {
      "open": [
        [
          "say",
          "You smash the lid open with your crowbar and rob it of its contents."
        ],
        [
          "addstate",
          "returnscript,re_ranchcratef"
        ],
        [
          "addstate",
          "returnstate,afterloot"
        ],
        [
          "runscript",
          "container_loot_ranch"
        ]
      ],
      "afterloot": [
        [
          "option",
          "done",
          "Sorry, crate"
        ]
      ]
    },
    "re_skeletonambush": {
      "hornswoggle": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "Oh, now, this won't do at all. Your posture is terrible! You look like you died of scoliosis!"
        ],
        [
          "say",
          "The skeleton stands still, puzzled, as you move around behind it and grab its shoulders."
        ],
        [
          "leftsay",
          "Come on now, shoulders back! Spine straight! That's a <i>little</i> better, but jeez! Look at the curve in this neck! Hold still for a second."
        ],
        [
          "say",
          "With a sharp twist, you pop the skeleton's skull right off, take its hat, and toss the skull away. The rest of the body scampers off to try to find it."
        ],
        [
          "checklocation",
          "Random Encounter (Region A) - Skeleton of a Beanslinger"
        ],
        [
          "sayoption",
          "done",
          "<i>Much</i> better!"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You beat up the skeleton and search it for loot, which is much easier with skeletons than with most other types of people."
        ],
        [
          "addxp",
          "@xpreward_a@"
        ],
        [
          "additem",
          "pickone(bone,bone,skullchips,looseteeth,sell_goldtooth)"
        ],
        [
          "checklocation",
          "Random Encounter (Region A) - Skeleton of a Beanslinger"
        ],
        [
          "if",
          "!hasitem(hat_chef) && itemroll(20)"
        ],
        [
          "additem",
          "hat_chef"
        ],
        [
          "addmeat",
          "rand(20,30),1"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_skeletonb1": {
      "outfox": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "Your helmet is historically inaccurate, you know."
        ],
        [
          "rightpicture",
          "portrait_skeletonb1"
        ],
        [
          "rightsay",
          "...?"
        ],
        [
          "leftsay",
          "Those helmets never actually had horns on them."
        ],
        [
          "rightsay",
          "..."
        ],
        [
          "leftsay",
          "That's a misconception that began when an archaeologist found a viking buried with two drinking horns on either side of him, and misunder--"
        ],
        [
          "say",
          "The skeleton throws $skelposlow$ helmet at you to make you shut up and go away."
        ],
        [
          "checklocation",
          "Random Encounter (Region B) - Old Viking Skeleton"
        ],
        [
          "addxp",
          "@xpreward_a@"
        ],
        [
          "option",
          "done",
          "Sweet"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You knocked that viking skeleton back into the correct century!"
        ],
        [
          "addxp",
          "@xpreward_b@"
        ],
        [
          "checklocation",
          "Random Encounter (Region B) - Old Viking Skeleton"
        ],
        [
          "if",
          "itemroll(50)"
        ],
        [
          "additem",
          "pickone(bone,bone,skullchips,looseteeth,sell_goldtooth)"
        ],
        [
          "if",
          "itemroll(50)"
        ],
        [
          "additem",
          "sell_goldtooth"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_skeletonb2": {
      "buycan": [
        [
          "say",
          "It isn't clear what this skeleton is going to do with 100 Meat, but you give it to $skelacc$ anyway. $skelprocap$ tosses you the can of beans and recommences $skelposlow$ slumping."
        ],
        [
          "addmeat",
          "-100"
        ],
        [
          "checklocation",
          "Random Encounter (Region B) - Old Wizard Skeleton (Bean Can)"
        ],
        [
          "option",
          "done",
          "Okay"
        ]
      ],
      "outfox": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "You know, those beans have got to be <i>way</i> past their expiration date."
        ],
        [
          "rightpicture",
          "portrait_skeletonb2"
        ],
        [
          "rightsay",
          "..."
        ],
        [
          "leftsay",
          "And that can is pretty rusty. Might be a risk of botulism."
        ],
        [
          "rightsay",
          "..."
        ],
        [
          "leftsay",
          "Maybe I should just..."
        ],
        [
          "say",
          "The skeleton throws the can at you with an exasperated sigh."
        ],
        [
          "checklocation",
          "Random Encounter (Region B) - Old Wizard Skeleton (Bean Can)"
        ],
        [
          "addxp",
          "@xpreward_a@"
        ],
        [
          "sayoption",
          "done",
          "Cool"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You won! You beat up a tired old skeleton and took his beans! And his hat too! That'll teach <i>him!</i>"
        ],
        [
          "addxp",
          "@xpreward_b@"
        ],
        [
          "checklocation",
          "Random Encounter (Region B) - Old Wizard Skeleton (Bean Can)"
        ],
        [
          "checklocation",
          "Random Encounter (Region B) - Old Wizard Skeleton (Wizard Hat)"
        ],
        [
          "if",
          "itemroll(30)"
        ],
        [
          "additem",
          "pickone(bone,bone,skullchips,looseteeth,sell_goldtooth)"
        ],
        [
          "if",
          "itemroll(30)"
        ],
        [
          "additem",
          "sell_goldtooth"
        ],
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_skeletonb3": {
      "intim": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "So you think you're a big deal 'coz you're rich, huh? Think all that money makes you powerful, huh? Well, I'm alive and you're dead, so who's got the power now, skeleton?"
        ],
        [
          "say",
          "You flip the brim of the skeleton's top hat, knocking it off $skelposlow$ head. $skelprocap$ looks extremely affronted."
        ],
        [
          "leftsay",
          "What are ya gonna do about that? Is your money gonna pick up your hat for you, skeleton?"
        ],
        [
          "say",
          "The skeleton shakes $skelposlow$ cane angrily and looks around for some bodyguards that are not actually here. $skelprocap$ stalks away, grumbling."
        ],
        [
          "checklocation",
          "Random Encounter (Region B) - Cattle Baron's Skeleton (Top Hat)"
        ],
        [
          "addxp",
          "@xpreward_a@"
        ],
        [
          "option",
          "done",
          "Yeah! Fight the power!"
        ]
      ],
      "outfox": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "Er... something I can help you with, $skelhonor$?"
        ],
        [
          "say",
          "The skeleton hisses and chatters $skelposlow$ teeth at you, gesturing vaguely with $skelposlow$ cane. Since you don't speak skeleton (nobody can, because they can't speak), you have to figure out $skelposlow$ complaint from context and body language. It seems to be something along the lines of \"I'm rich and dead, how come all these poor people get to be alive? Where's the justice in that?\" You nod and make sympathetic noises in the right places, and eventually $skelprolow$ runs out of steam. $skelprocap$ throws $skelposlow$ lily on the ground with a \"Bah!\"-like cough, and shuffles away."
        ],
        [
          "checklocation",
          "Random Encounter (Region B) - Cattle Baron's Skeleton (Lily)"
        ],
        [
          "addxp",
          "@xpreward_a@"
        ],
        [
          "option",
          "done",
          "Okay"
        ]
      ],
      "hornswoggle": [
        [
          "say",
          "You give the skeleton a respectful bow."
        ],
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "Good afternoon, $skelhonor$! I must say I did not expect to meet such an esteemed $skeltitle$ in such a low-class environment. Have you perhaps lost your way? Please, allow me to direct you back to civilized lands."
        ],
        [
          "say",
          "The skeleton listens carefully as you make up some directions to a random patch of nowhere, then generously tips you an entire one Meat. You accept it graciously, since $skelprolow$ didn't notice you snagging the gold lily off of $skelposlow$ lapel when you had your hand on $skelposlow$ shoulder."
        ],
        [
          "addmeat",
          "1"
        ],
        [
          "checklocation",
          "Random Encounter (Region B) - Cattle Baron's Skeleton (Lily)"
        ],
        [
          "addxp",
          "@xpreward_a@"
        ],
        [
          "option",
          "done",
          "Sweet"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You won! You grab all the wealth that the skeleton couldn't take with it, and take it with you."
        ],
        [
          "addxp",
          "@xpreward_b@"
        ],
        [
          "checklocation",
          "Random Encounter (Region B) - Cattle Baron's Skeleton (Lily)"
        ],
        [
          "checklocation",
          "Random Encounter (Region B) - Cattle Baron's Skeleton (Top Hat)"
        ],
        [
          "additem",
          "pickone(bone,bone,skullchips,looseteeth)"
        ],
        [
          "addstate",
          "quant,1"
        ],
        [
          "if",
          "itemroll(30)"
        ],
        [
          "incstate",
          "quant,1"
        ],
        [
          "if",
          "itemroll(30)"
        ],
        [
          "incstate",
          "quant,1"
        ],
        [
          "if",
          "itemroll(30)"
        ],
        [
          "incstate",
          "quant,1"
        ],
        [
          "if",
          "itemroll(30)"
        ],
        [
          "incstate",
          "quant,1"
        ],
        [
          "additem",
          "sell_goldtooth,$quant$"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_skeletonc1": {
      "outfox": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "Hold on there just a minute, soldier. What's an infantry soldier doing wearing a cavalry hat?"
        ],
        [
          "rightpicture",
          "portrait_skeletonc1"
        ],
        [
          "rightsay",
          "<i>hiss, chatter</i>"
        ],
        [
          "leftsay",
          "What kind of fool do you take me for? Cavalry soldiers ride horses. That's what 'cavalry' <i>means</i>. If you're cavalry, where's your horse?"
        ],
        [
          "rightsay",
          "..."
        ],
        [
          "leftsay",
          "That's what I thought. Give me that hat, soldier. You can have it back when I see you riding a horse."
        ],
        [
          "say",
          "The skeleton glumly turns over $skelposlow$ hat and marches away."
        ],
        [
          "checklocation",
          "Random Encounter (Region C) - Skeletal Cavalryman"
        ],
        [
          "addxp",
          "@xpreward_b@"
        ],
        [
          "option",
          "done",
          "Sweet"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You end this ri<i>valry</i> by <i>cav</i>ing in your opponent's skull."
        ],
        [
          "addxp",
          "@xpreward_c@"
        ],
        [
          "checklocation",
          "Random Encounter (Region C) - Skeletal Cavalryman"
        ],
        [
          "addstate",
          "winbutton,Good one"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_skeletonc2": {
      "alice2": [
        [
          "say",
          "Alice blasts the skeleton with her shotgun at close range, obliterating everything above its sternum."
        ],
        [
          "leftpicture",
          "portrait_alice_flipped"
        ],
        [
          "leftsay",
          "...There. Yep, that did the trick."
        ],
        [
          "checklocation",
          "Random Encounter (Region C) - Deformed Skeleton"
        ],
        [
          "addxp",
          "@xpreward_c@"
        ],
        [
          "sayoption",
          "done",
          "Nice job."
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You won! Twice, kind of!"
        ],
        [
          "addxp",
          "@xpreward_c@"
        ],
        [
          "checklocation",
          "Random Encounter (Region C) - Deformed Skeleton"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_skeletonc3": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You won! Now it is the hunter who has become the hunted!"
        ],
        [
          "addxp",
          "@xpreward_c@"
        ],
        [
          "checklocation",
          "Random Encounter (Region C) - Skeleton of an Old Hunter"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_skeletond1": {
      "intim": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "Ten-HUT, soldier!"
        ],
        [
          "say",
          "The skeleton clacks to attention."
        ],
        [
          "rightpicture",
          "portrait_skeletond1"
        ],
        [
          "rightsay",
          "Hiss!"
        ],
        [
          "leftsay",
          "You're out of uniform, soldier! Look at the state of that jacket! And where're your pants? Drop and give me twenty!"
        ],
        [
          "say",
          "$skelprocap$ drops to the ground and starts doing push-ups. You give $skelacc$ a swift kick to the ribs, and $skelprolow$ explodes into scattered bone shards."
        ],
        [
          "checklocation",
          "Random Encounter (Region D) - Shot-to-Hell Skeleton"
        ],
        [
          "addxp",
          "@xpreward_c@"
        ],
        [
          "option",
          "done",
          "Nice!"
        ]
      ],
      "outfox": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "Wait, hold on. This isn't possible."
        ],
        [
          "rightpicture",
          "portrait_skeletond1"
        ],
        [
          "rightsay",
          "Hiss?"
        ],
        [
          "leftsay",
          "I mean, look at you. I'm willing to suspend disbelief for other skeletons because of, like, dried-out ligaments and so on. But there's no way you're holding together enough to stand up, let alone walk. Look at that femur, it's broken right through in three different places."
        ],
        [
          "say",
          "The skeleton looks down at $skelposlow$ shattered bones, and while $skelprolow$'s distracted you quickly push $skelacc$ over and jump up and down on $skelacc$ until the fragments stop trying to move."
        ],
        [
          "checklocation",
          "Random Encounter (Region D) - Shot-to-Hell Skeleton"
        ],
        [
          "addxp",
          "@xpreward_c@"
        ],
        [
          "option",
          "done",
          "Whew!"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You bust the skeleton up into fragments. Well, smaller fragments."
        ],
        [
          "addxp",
          "@xpreward_d@"
        ],
        [
          "checklocation",
          "Random Encounter (Region D) - Shot-to-Hell Skeleton"
        ],
        [
          "additem",
          "skullchips,rand(2,3)"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_skeletond2": {
      "outfox2": [
        [
          "leftsay",
          "The interesting bit is that the opposite is also true. If you run electrical current through bone, it compresses on itself. At low voltages this is sometimes used to compress small fractures and speed up healing time, but if too much current is applied, there's a possibility of mechanical strain, and..."
        ],
        [
          "say",
          "The skeleton suddenly explodes."
        ],
        [
          "checklocation",
          "Random Encounter (Region D) - Electrified Skeleton"
        ],
        [
          "addxp",
          "@xpreward_c@"
        ],
        [
          "option",
          "done",
          "Yes, just like that!"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You won! It takes a while before you're sure, because most of the skeleton's bones keep twitching afterward."
        ],
        [
          "addxp",
          "@xpreward_d@"
        ],
        [
          "checklocation",
          "Random Encounter (Region D) - Electrified Skeleton"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_skeletond3": {
      "hornswoggle2": [
        [
          "say",
          "The rifle is basically junk, but the skeleton's antique rangefinder seems useful."
        ],
        [
          "checklocation",
          "Random Encounter (Region D) - Skeletal Rifleman"
        ],
        [
          "addxp",
          "@xpreward_c@"
        ],
        [
          "option",
          "done",
          "Cool"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You beat the skeleton up and take their rangefinder. Hah, good luck shooting things that you don't know how far away they are, skeleton!"
        ],
        [
          "checklocation",
          "Random Encounter (Region D) - Skeletal Rifleman"
        ],
        [
          "addxp",
          "@xpreward_d@"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_skeletone1": {
      "buffout": [
        [
          "say",
          "You throw the medicine bottle at the buffalo-headed skeleton. It shatters on $skelposlow$ forehead, and one of the pills goes in $skelposlow$ eye socket. $skelprocap$ passes out immediately, and doesn't even wake up when you steal $skelposlow$ cool buffalo skin pants."
        ],
        [
          "removeitem",
          "quest_buffout"
        ],
        [
          "checklocation",
          "Random Encounter (Region E) - Buffalo Soldier"
        ],
        [
          "addxp",
          "@xpreward_e@"
        ],
        [
          "option",
          "done",
          "Awesome"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You won! That's one less crazy buffalo-headed skeleton walking around here, hopefully bringing the total to zero."
        ],
        [
          "addxp",
          "@xpreward_e@"
        ],
        [
          "checklocation",
          "Random Encounter (Region E) - Buffalo Soldier"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_skeletone2": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You won! Looks like that skeleton wasn't so smart after all!"
        ],
        [
          "addxp",
          "@xpreward_e@"
        ],
        [
          "checklocation",
          "Random Encounter (Region E) - Very Smart Skeleton"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_skeletone3": {
      "buffout": [
        [
          "say",
          "You throw the medicine bottle at the buffalo-headed skeleton. It shatters on $skelposlow$ forehead, and one of the pills goes in $skelposlow$ eye socket. $skelprocap$ passes out immediately, and doesn't even wake up when you steal $skelposlow$ cool bandolier."
        ],
        [
          "removeitem",
          "quest_buffout"
        ],
        [
          "checklocation",
          "Random Encounter (Region E) - Buffalo Soldier Rifleman"
        ],
        [
          "addxp",
          "@xpreward_e@"
        ],
        [
          "option",
          "done",
          "Awesome"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You destroyed a skeleton! Or skeletons! One skeleton and a skull?"
        ],
        [
          "addxp",
          "@xpreward_e@"
        ],
        [
          "checklocation",
          "Random Encounter (Region E) - Buffalo Soldier Rifleman"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_skeletonf1": {
      "hornswoggle": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "Whoo, buddy, that's some real nice bone growth, I can see you've been drinking your milk, but you know what you need?"
        ],
        [
          "rightsay",
          "...Hiss?"
        ],
        [
          "leftsay",
          "Protein! You can't build muscle without protein! And fortunately for you, I just happen to have a very reasonably-priced sample of a new instant protein shake right here in my pack..."
        ],
        [
          "say",
          "You turn away from the skeleton and fish an empty bottle out of your pack, and scoop some sand into it out of $skelposlow$ view."
        ],
        [
          "leftsay",
          "...Just add water and that's like ten thousand percent of your protein needs, plus all the silicon you could ever want, in one delicious shake! ...Uh, do you have anything to trade?"
        ],
        [
          "say",
          "The skeleton happily swaps $skelposlow$ boots for the bottle and runs off looking for some water."
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Thick-Boned Skeleton (Boots)"
        ],
        [
          "addxp",
          "@xpreward_e@"
        ],
        [
          "option",
          "done",
          "Nice"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You won! And it turns out what they say is true: skeletons with big bones have big feet."
        ],
        [
          "addxp",
          "@xpreward_f@"
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Thick-Boned Skeleton (Boots)"
        ],
        [
          "say",
          "He was also carrying some kind of... brochure?"
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Thick-Boned Skeleton (Brochure)"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_skeletonf2": {
      "intim": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "Make weird gestures at <i>me</i>, will you? I'll show you a weird gesture!"
        ],
        [
          "say",
          "You give the skeleton a kick in the pelvis so hard, one of the legs pops off. The rest of the skeleton crawls away in sheepish dismay."
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Mushroom-Covered Skeleton"
        ],
        [
          "addxp",
          "@xpreward_e@"
        ],
        [
          "option",
          "done",
          "Alright!"
        ]
      ],
      "outfox": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "No no no, you're getting these gestures all wrong. You're not accounting for your arms being lighter than normal, so the momentum is all out of kilter."
        ],
        [
          "rightpicture",
          "portrait_skeletonf2"
        ],
        [
          "rightsay",
          "Hiss?"
        ],
        [
          "leftsay",
          "I'll demonstrate without actually casting the spell. Watch closely."
        ],
        [
          "say",
          "You wave your arms in a complicated pattern, which the skeleton observes and then duplicates. The spell causes all the mushrooms to explode, blowing $skelacc$ apart."
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Mushroom-Covered Skeleton"
        ],
        [
          "addxp",
          "@xpreward_e@"
        ],
        [
          "option",
          "done",
          "Good job!"
        ]
      ],
      "hornswoggle": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "Say, are those mushrooms you're growing edible? They look pretty good..."
        ],
        [
          "rightpicture",
          "portrait_skeletonf2"
        ],
        [
          "rightsay",
          "...Hiss?"
        ],
        [
          "leftsay",
          "You haven't even tried them? That's surprising. If I could grow my own food like that..."
        ],
        [
          "say",
          "The skeleton shrugs and pops one of the mushrooms in $skelposlow$ mouth. If $skelprolow$'d had eyeballs, the pupils would have dilated instantly. $skelprocap$ falls on the ground and starts twitching and giggling, and doesn't react to you stealing one of $skelposlow$ legs."
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Mushroom-Covered Skeleton"
        ],
        [
          "addxp",
          "@xpreward_e@"
        ],
        [
          "option",
          "done",
          "Groovy"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You won! The lesson here is not to be a skeleton with mushrooms growing out of you."
        ],
        [
          "addxp",
          "@xpreward_f@"
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Mushroom-Covered Skeleton"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_skeletonf3": {
      "outfox": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "Hmm. You might not be aware of this, but although bone does not burn into ash the way wood does, intense heat does cause it to get quite brittle."
        ],
        [
          "rightpicture",
          "portrait_skeletonf3"
        ],
        [
          "rightsay",
          "Hiss!"
        ],
        [
          "say",
          "The skeleton goes for $skelposlow$ gun, and the momentum of the quick-draw causes the entire hand to pop off at the wrist and sail through the air, landing with a <i>plop</i> at your feet."
        ],
        [
          "leftsay",
          "There, see? Told you."
        ],
        [
          "say",
          "The skeleton runs away, embarrassed."
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Burnin' Skeleton"
        ],
        [
          "addxp",
          "@xpreward_e@"
        ],
        [
          "option",
          "done",
          "Okay!"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You showed that skeleton what it's like to be figuratively on fire instead of literally!"
        ],
        [
          "addxp",
          "@xpreward_f@"
        ],
        [
          "checklocation",
          "Random Encounter (Region F) - Burnin' Skeleton"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_skeletong1": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You defeated the ancient conqueror, making you officially the only living combatant of a war that ended three hundred years ago."
        ],
        [
          "addxp",
          "@xpreward_g@"
        ],
        [
          "checklocation",
          "Random Encounter (Region G) - Conquistador's Skeleton"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_skeletong2": {
      "intim": [
        [
          "leftsay",
          "Are you one of those drowned pirate skeletons? Because you're a lot less scary on land."
        ],
        [
          "rightsay",
          "Hiss!"
        ],
        [
          "leftsay",
          "Have you got your land legs yet? I bet you don't, right? Will it make you landsick if I just stand here motionless, not rocking from side to side at all?"
        ],
        [
          "rightsay",
          "..."
        ],
        [
          "leftsay",
          "..."
        ],
        [
          "say",
          "After a minute, the skeleton turns green and tries to throw up, but since it doesn't have a stomach its head just falls off."
        ],
        [
          "checklocation",
          "Random Encounter (Region G) - Seaweed-Draped Skeleton"
        ],
        [
          "addxp",
          "@xpreward_f@"
        ],
        [
          "option",
          "done",
          "Wow!"
        ]
      ],
      "outfox": [
        [
          "leftsay",
          "Oh hey, did you remember to stop and decompress as you were walking out of the briny depths? The difference in pressure between the seafloor and the surface can be really dramatic, and..."
        ],
        [
          "rightsay",
          "BAM!"
        ],
        [
          "say",
          "Most of the skeleton's joints explode, and it collapses into a heap of bones and rotten seaweed."
        ],
        [
          "leftsay",
          "Yeah, see? I warned you."
        ],
        [
          "checklocation",
          "Random Encounter (Region G) - Seaweed-Draped Skeleton"
        ],
        [
          "addxp",
          "@xpreward_f@"
        ],
        [
          "option",
          "done",
          "Yup"
        ]
      ],
      "hornswoggle": [
        [
          "leftsay",
          "Oh! Wait! Oh my gosh! Are you Davy Jones?"
        ],
        [
          "rightsay",
          "...Hiss?"
        ],
        [
          "leftsay",
          "I'm a huge fan, I have all your albums!"
        ],
        [
          "rightsay",
          "..."
        ],
        [
          "leftsay",
          "Can I have your autograph?"
        ],
        [
          "say",
          "The skeleton scribbles something onto a piece of paper for you, and then wanders off, puzzled."
        ],
        [
          "leftsay",
          "\"Rainy Jane\" was really underrated!"
        ],
        [
          "checklocation",
          "Random Encounter (Region G) - Seaweed-Draped Skeleton"
        ],
        [
          "addxp",
          "@xpreward_f@"
        ],
        [
          "option",
          "done",
          "Neat!"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You won! Unfortunately the skeleton didn't have much in the way of loot, but... oh, here, this'll do."
        ],
        [
          "addxp",
          "@xpreward_g@"
        ],
        [
          "checklocation",
          "Random Encounter (Region G) - Seaweed-Draped Skeleton"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_skeletong3": {
      "intim": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "I should be afraid of you? Are you kidding me? You didn't even survive getting off the boat!"
        ],
        [
          "rightpicture",
          "portrait_skeletong3"
        ],
        [
          "rightsay",
          "Hiss!"
        ],
        [
          "leftsay",
          "Oh, I'm shaking in my boots! My boots which are nice and dry because I didn't fall off a galleon and drown on my way to conquering a foreign land. Maybe you shoulda had a pool noodle instead of that blunderbuss, El Capitano Cinqo de Moron!"
        ],
        [
          "say",
          "The skeleton gets so angry $skelprolow$ can't even aim properly any more. $skelprocap$ petulantly throws $skelposlow$ gun on the ground and storms away."
        ],
        [
          "checklocation",
          "Random Encounter (Region G) - Conquistador Dragoon Skeleton"
        ],
        [
          "addxp",
          "@xpreward_f@"
        ],
        [
          "option",
          "done",
          "Alright!"
        ]
      ],
      "hornswoggle": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "Wow, you haven't been taking very good care of that gun. What, were you half-buried on the ocean floor for like four hundred years?"
        ],
        [
          "rightpicture",
          "portrait_skeletong3"
        ],
        [
          "rightsay",
          "...Hiss."
        ],
        [
          "leftsay",
          "Oh. Really? Huh. Well, anyway, that thing's probably just gonna explode if you try to fire it. Let me have a look, I can probably tune it up for you."
        ],
        [
          "say",
          "The skeleton hands over $skelposlow$ gun. You inspect it carefully and then use it to blow $skelposlow$ skull clean off."
        ],
        [
          "leftsay",
          "Okay, no, my mistake. It's a bit mucky but it's basically fine."
        ],
        [
          "checklocation",
          "Random Encounter (Region G) - Conquistador Dragoon Skeleton"
        ],
        [
          "addxp",
          "@xpreward_f@"
        ],
        [
          "option",
          "done",
          "Cool"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You won! Specifically, you won the oldest, filthiest gun you've ever seen."
        ],
        [
          "addxp",
          "@xpreward_g@"
        ],
        [
          "checklocation",
          "Random Encounter (Region G) - Conquistador Dragoon Skeleton"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_skeletonh1": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You won! That's a little surprising!"
        ],
        [
          "addxp",
          "@xpreward_g@"
        ],
        [
          "checklocation",
          "Random Encounter (Region H) - Bigfoot Skeleton"
        ],
        [
          "addstate",
          "winbutton,Nice!"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_skeletonh2": {
      "actually": [
        [
          "leftportrait",
          "player"
        ],
        [
          "leftsay",
          "Actually, we're kind of hunting him down to put an end to his evil schemes."
        ],
        [
          "rightsay",
          "Wow, really? That's great! I'm glad to see someone actually putting up some kind of fight, although to be honest I don't think much of your chances. Good luck, though!"
        ],
        [
          "leftsay",
          "Er, thanks."
        ],
        [
          "rightsay",
          "Here, have one of these buttons I made."
        ],
        [
          "checklocation",
          "Random Encounter (Region H) - Canada-Bound Skeleton"
        ],
        [
          "addxp",
          "@xpreward_g@"
        ],
        [
          "say",
          "The skeleton waves and continues on $skelposlow$ way."
        ],
        [
          "sayoption",
          "done",
          "Bye!"
        ]
      ],
      "killed": [
        [
          "leftsay",
          "Actually, I destroyed him not long ago. He wasn't even all that tough."
        ],
        [
          "rightsay",
          "You... destroyed him? Wow, I... I don't know what to say! I don't have to move, now! You deserve some kind of hero's reward, friend, but I'm afraid all I have are these campaign buttons."
        ],
        [
          "checklocation",
          "Random Encounter (Region H) - Canada-Bound Skeleton"
        ],
        [
          "addxp",
          "@xpreward_g@"
        ],
        [
          "leftsay",
          "Aw, thanks! It's just nice to have your efforts appreciated."
        ],
        [
          "rightsay",
          "Well, I sure do! I'm gonna go tell all my friends!"
        ],
        [
          "say",
          "The skeleton waves and runs back the way $skelprolow$ came."
        ],
        [
          "sayoption",
          "done",
          "Bye!"
        ]
      ],
      "voteno": [
        [
          "leftsay",
          "$lastoption$"
        ],
        [
          "rightsay",
          "Right on. Here, have one of these buttons I made."
        ],
        [
          "checklocation",
          "Random Encounter (Region H) - Canada-Bound Skeleton"
        ],
        [
          "addxp",
          "@xpreward_g@"
        ],
        [
          "rightsay",
          "Anyway, I've got a lot of walking ahead of me. So long, stranger."
        ],
        [
          "sayoption",
          "done",
          "Bye!"
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "You won! Take that, skeleton!"
        ],
        [
          "addxp",
          "@xpreward_h@"
        ],
        [
          "checklocation",
          "Random Encounter (Region H) - Canada-Bound Skeleton"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_skeletonh3": {
      "intim3": [
        [
          "say",
          "Dirty Jim collapses into a pile of loose old bones. The Ranger turns and nods to you, touching the brim of his hat in a salute. You salute back, and he tosses you his tin star before collapsing himself."
        ],
        [
          "checklocation",
          "Random Encounter (Region H) - Skeletal Texas Ranger"
        ],
        [
          "addxp",
          "@xpreward_g@"
        ],
        [
          "sayoption",
          "done",
          "Good hunting, ol' buddy."
        ]
      ],
      "outfox3": [
        [
          "say",
          "Dirty Jim collapses into a pile of loose old bones. The Ranger turns and nods to you, touching the brim of his hat in a salute. You salute back, and he tosses you his tin star before collapsing himself."
        ],
        [
          "checklocation",
          "Random Encounter (Region H) - Skeletal Texas Ranger"
        ],
        [
          "addxp",
          "@xpreward_g@"
        ],
        [
          "sayoption",
          "done",
          "Good hunting, ol' buddy."
        ]
      ],
      "horns3": [
        [
          "say",
          "Dirty Jim collapses into a pile of loose old bones. The Ranger turns and nods to you, touching the brim of his hat in a salute. You salute back, and he tosses you his tin star before collapsing himself."
        ],
        [
          "checklocation",
          "Random Encounter (Region H) - Skeletal Texas Ranger"
        ],
        [
          "addxp",
          "@xpreward_g@"
        ],
        [
          "sayoption",
          "done",
          "Good hunting, ol' buddy."
        ]
      ],
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "Assuming you're taking a real hardline stance toward undead and want to destroy them regardless of the honorableness of their motivations, you won!"
        ],
        [
          "addxp",
          "@xpreward_h@"
        ],
        [
          "checklocation",
          "Random Encounter (Region H) - Skeletal Texas Ranger"
        ],
        [
          "addstate",
          "winbutton,Nice"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_skillbook1": {
      "get": [
        [
          "say",
          "You pore over the detritus and manage to find exactly one book that is both undestroyed and remotely interesting to you."
        ],
        [
          "checklocation",
          "Random Encounter (Any Region) - 7th Encounter"
        ],
        [
          "option",
          "done",
          "Nice"
        ]
      ]
    },
    "re_skillbook2": {
      "get": [
        [
          "say",
          "The bag is full of books, mostly boring military field manuals.  You do find one of specific interest to you, though."
        ],
        [
          "checklocation",
          "Random Encounter (Any Region) - 21st Encounter"
        ],
        [
          "option",
          "done",
          "Continue on"
        ]
      ]
    },
    "re_undeadd1": {
      "bottle": [
        [
          "removeitem",
          "quest_ghostbottle"
        ],
        [
          "rightsay",
          "...Whatsis? You graftin' me a pleasance, barley-band?"
        ],
        [
          "leftsay",
          "Take it and go, please."
        ],
        [
          "rightsay",
          "Yer a good porsman, Margarine. You gotta good egg."
        ],
        [
          "say",
          "The weird ghost dissolves into nothingness."
        ],
        [
          "say",
          "And hey, he left a ring behind!"
        ],
        [
          "checklocation",
          "Random Encounter (Region D) - Drunk Ghost (Give Whiskey)"
        ],
        [
          "option",
          "done",
          "Whew"
        ]
      ]
    },
    "re_undeadh1": {
      "win": [
        [
          "addstate",
          "winbutton,Hooray!"
        ],
        [
          "say",
          "The trapper became the... trappee, I guess."
        ],
        [
          "addxp",
          "@xpreward_h@"
        ],
        [
          "if",
          "!re_h_gotghostskincapcheck"
        ],
        [
          "checklocation",
          "Random Encounter (Region H) - Ghost Trapper"
        ],
        [
          "if",
          "!re_h_gotghostskincapcheck"
        ],
        [
          "addflag",
          "re_h_gotghostskincapcheck"
        ],
        [
          "additem",
          "potion_bitoectoplasm"
        ],
        [
          "say",
          "You destroy the ghost trapper, and the animal spirits he collected are free to go to heaven. Or Valhalla, or wherever animals go."
        ],
        [
          "addstate",
          "winbutton,Nice job"
        ],
        [
          "incflag",
          "ending_fightswon"
        ],
        [
          "if",
          "hasflag(cowfight)"
        ],
        [
          "incflag",
          "ending_cowskilled,hasflag(cowfight)"
        ],
        [
          "if",
          "hasflag(undeadfight)"
        ],
        [
          "incflag",
          "ending_undeadkilled,hasflag(undeadfight)"
        ],
        [
          "if",
          "!susie"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "if",
          "!hasflag(cowfight)"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "susie_xp,hasflag(cowfight)"
        ],
        [
          "addstate",
          "rankup,0"
        ],
        [
          "say",
          "%pardner_susienotch%"
        ],
        [
          "if",
          "hasflag(susie_xp)>=1 && hasflag(pardnerrank)<2"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=4 && hasflag(pardnerrank)<3"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=8 && hasflag(pardnerrank)<4"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=15 && hasflag(pardnerrank)<5"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=25 && hasflag(pardnerrank)<6"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=40 && hasflag(pardnerrank)<7"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "hasflag(susie_xp)>=60 && hasflag(pardnerrank)<8"
        ],
        [
          "addstate",
          "rankup,1"
        ],
        [
          "if",
          "$rankup$==0"
        ],
        [
          "goto",
          "aftersusie"
        ],
        [
          "incflag",
          "pardnerrank,1"
        ],
        [
          "say",
          "Cow-hate flashes in her eyes.  Her resolve intensifies."
        ],
        [
          "say",
          "<b>Susie has become stronger!</b>"
        ],
        [
          "addstate",
          "winbutton,Way to go!"
        ],
        [
          "goto",
          "aftersusie"
        ]
      ]
    },
    "re_walkingstupid": {
      "walkingstupid2": [
        [
          "say",
          "You pick up the book, wondering why the gila monsters would have left just this one behind."
        ],
        [
          "checklocation",
          "Random Encounter (Region A) - Abandoned Stagecoach"
        ],
        [
          "addflag",
          "re_walkingstupid"
        ],
        [
          "option",
          "done",
          "Leave"
        ]
      ]
    },
    "re_wanderinsally": {
      "init_sally_1": [
        [
          "addnpcstoreitem",
          "sally,needle,rand(2,3)"
        ],
        [
          "if",
          "gary"
        ],
        [
          "addnpcstoreitem",
          "sally,shroomgro,1,400"
        ],
        [
          "goto",
          "launch"
        ]
      ],
      "init_sally_2": [
        [
          "addnpcstoreitem",
          "sally,combat_dynamite,rand(4,5)"
        ],
        [
          "addnpcstoreitem",
          "sally,food_carrot,rand(1,2),20"
        ],
        [
          "goto",
          "launch"
        ]
      ],
      "init_sally_3": [
        [
          "addnpcstoreitem",
          "sally,food_apple,rand(1,2),15"
        ],
        [
          "goto",
          "launch"
        ]
      ],
      "init_sally_6": [
        [
          "addnpcstoreitem",
          "sally,combat_dynamite,rand(4,5)"
        ],
        [
          "addnpcstoreitem",
          "sally,needle,rand(2,3)"
        ],
        [
          "addnpcstoreitem",
          "sally,food_carrot,rand(1,2),20"
        ],
        [
          "addnpcstoreitem",
          "sally,food_apple,rand(1,2),15"
        ],
        [
          "goto",
          "launch"
        ]
      ]
    },
    "roybean_honeybean": {
      "buy0": [
        [
          "addflag",
          "mainquest,34"
        ],
        [
          "addmeat",
          "-6000"
        ],
        [
          "say",
          "You hand over the exhorbitant amount of Meat and get the jellybean.  The cost of healthcare in this country is out of control!"
        ],
        [
          "checklocation",
          "Roy Bean's House - Honey Bean"
        ],
        [
          "option",
          "buy0joke",
          "You can say that again"
        ]
      ],
      "buy1": [
        [
          "addflag",
          "mainquest,34"
        ],
        [
          "addmeat",
          "-4000"
        ],
        [
          "say",
          "You hand over the slightly less exhorbitant amount of Meat and get the jellybean."
        ],
        [
          "checklocation",
          "Roy Bean's House - Honey Bean"
        ],
        [
          "option",
          "done",
          "Take your leave"
        ]
      ],
      "buy2": [
        [
          "addflag",
          "mainquest,34"
        ],
        [
          "addmeat",
          "-2000"
        ],
        [
          "say",
          "You hand over the slightly more reasonable amount of Meat and get the jellybean."
        ],
        [
          "checklocation",
          "Roy Bean's House - Honey Bean"
        ],
        [
          "option",
          "done",
          "Take your leave"
        ]
      ],
      "buy3": [
        [
          "addflag",
          "mainquest,34"
        ],
        [
          "addmeat",
          "-5"
        ],
        [
          "say",
          "You hand over the Meat.  You almost feel bad because of the depth of the discount."
        ],
        [
          "checklocation",
          "Roy Bean's House - Honey Bean"
        ],
        [
          "option",
          "done",
          "Take your leave"
        ]
      ]
    },
    "roybean_spittoontalk": {
      "five": [
        [
          "say",
          "Well, I tried. Don't ever say I didn't warn you."
        ],
        [
          "say",
          "You plunge your hand into the spittoon and fish around for a while. Eventually you pull out a really disgusting pistol, and a really disgusting hand to shoot it with."
        ],
        [
          "markused"
        ],
        [
          "addskill",
          "spittoonhand"
        ],
        [
          "checklocation",
          "Roy Bean's House - Spittoon"
        ],
        [
          "incflag",
          "spittoonsopen,1"
        ],
        [
          "option",
          "done",
          "Yayyyy."
        ]
      ]
    },
    "shaggydogcave_beaniron1": {
      "popup": [
        [
          "say",
          "You sense a deposit of bean iron!"
        ],
        [
          "if",
          "hasitem(pick)"
        ],
        [
          "option",
          "pickit",
          "Mine it [pickaxe]"
        ],
        [
          "else",
          ""
        ],
        [
          "say",
          "Unfortunately, you are sans pickaxe."
        ]
      ],
      "pickit": [
        [
          "cls"
        ],
        [
          "say",
          "There we go!"
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "Shaggy Dog Cave - Bean-Iron Deposit"
        ]
      ]
    },
    "shroomcave_cultist2": {
      "getloot": [
        [
          "additem",
          "bone"
        ],
        [
          "checklocation",
          "Shroomcave - Sleeping Cultist (Item 1)"
        ],
        [
          "checklocation",
          "Shroomcave - Sleeping Cultist (Item 2)"
        ],
        [
          "goto",
          "tokencontinue"
        ]
      ]
    },
    "shroomcave_jellycrate": {
      "grab": [
        [
          "cls"
        ],
        [
          "say",
          "Yoink! They do look pretty cool under the blacklight, you have to admit."
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "Shroomcave (Hidden Lounge) - Jellybean Jar"
        ]
      ]
    },
    "shroomcave_knapsack": {
      "investigate": [
        [
          "cls"
        ],
        [
          "say",
          "It contains some loose bits of granola and some very, very dirty clothes."
        ],
        [
          "if",
          "!hasflag(shroomcave_raidedsack)"
        ],
        [
          "say",
          "Oh, and a map!"
        ],
        [
          "if",
          "!hasflag(shroomcave_raidedsack)"
        ],
        [
          "checklocation",
          "Shroomcave - Dirty Knapsack"
        ],
        [
          "if",
          "gary"
        ],
        [
          "additem",
          "shroomgro"
        ],
        [
          "addflag",
          "shroomcave_raidedsack"
        ]
      ]
    },
    "shroomcave_lavalamp": {
      "take": [
        [
          "addflag",
          "shroomcave_tooklamp"
        ],
        [
          "cls"
        ],
        [
          "say",
          "You stow it in your pack. Fortunately, it isn't real lava."
        ],
        [
          "checklocation",
          "Shroomcave (Hidden Lounge) - Lava Lamp"
        ]
      ]
    },
    "shroomcave_shroom1": {
      "pick": [
        [
          "cls"
        ],
        [
          "say",
          "You carefully pluck the <i>Lactarius Dirtihippica</i> out of the ground and stow it away."
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "Shroomcave - First Magic Mushroom"
        ],
        [
          "exit"
        ]
      ]
    },
    "shroomcave_shroom2": {
      "pick": [
        [
          "cls"
        ],
        [
          "say",
          "You carefully pluck the <i>Lactarius Dirtihippica</i> out of the ground and stow it away."
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "Shroomcave - Second Magic Mushroom"
        ],
        [
          "exit"
        ]
      ]
    },
    "shroomcave_shroom3": {
      "pick": [
        [
          "cls"
        ],
        [
          "say",
          "You carefully pluck the <i>Lactarius Dirtihippica</i> out of the ground and stow it away."
        ],
        [
          "markused"
        ],
        [
          "checklocation",
          "Shroomcave - Third Magic Mushroom"
        ],
        [
          "exit"
        ]
      ]
    },
    "silverplater_platerhimself": {
      "barbedwire": [
        [
          "addmeat",
          "-1000"
        ],
        [
          "rightsay",
          "Lookin' ta keep some cows off yer property, eh? Good thinkin'."
        ],
        [
          "say",
          "He takes the coil of barbed wire, and gives it back a short time later, shiny and gleaming."
        ],
        [
          "removeitem",
          "quest_barbedwire"
        ],
        [
          "checklocation",
          "The Silver Plater - Plated Barbed Wire"
        ],
        [
          "option",
          "done",
          "Awesome!"
        ]
      ],
      "turnip": [
        [
          "addmeat",
          "-$turnipprice$"
        ],
        [
          "say",
          "He takes the turnip, and gives it back a short time later, shiny and gleaming."
        ],
        [
          "rightsay",
          "Hadda hollow it out in the middle, so it wouldn't rot inside. But ya can wear it as a hat now!"
        ],
        [
          "removeitem",
          "food_turnip"
        ],
        [
          "checklocation",
          "The Silver Plater - Plated the Turnip"
        ],
        [
          "option",
          "done",
          "Neat!"
        ]
      ]
    },
    "silversmith_foodshelf": {
      "get": [
        [
          "markused"
        ],
        [
          "cls"
        ],
        [
          "say",
          "You find a couple of things that still look edible."
        ],
        [
          "checklocation",
          "Silversmith's House - Shelf (Item 1)"
        ],
        [
          "checklocation",
          "Silversmith's House - Shelf (Item 2)"
        ],
        [
          "option",
          "done",
          "Excellent."
        ]
      ]
    },
    "silversmith_safe": {
      "open": [
        [
          "playsound",
          "opensafe"
        ],
        [
          "say",
          "You open the safe!"
        ],
        [
          "checklocation",
          "Silversmith's House - Safe"
        ],
        [
          "markused"
        ]
      ]
    },
    "silversmith_spittoon": {
      "nine": [
        [
          "say",
          "You found a filthy slime-covered old brooch, are you happy? I bet you're going to put it on without even washing it first."
        ],
        [
          "checklocation",
          "Silversmith's House - Spittoon"
        ],
        [
          "markused"
        ],
        [
          "incflag",
          "spittoonsopen,1"
        ],
        [
          "option",
          "done",
          "Maybe I will! So there!"
        ]
      ]
    },
    "snakespring_timerift": {
      "grab": [
        [
          "addflag",
          "snakespring_rift"
        ],
        [
          "say"
        ],
        [
          "checklocation",
          "Snake Spring - Temporal Rift"
        ],
        [
          "option",
          "done",
          "Strange"
        ]
      ]
    },
    "timenexus_camaro": {
      "e": [
        [
          "cls"
        ],
        [
          "say",
          "On the seat inside you find a gun.  You think."
        ],
        [
          "addflag",
          "timenexus_camaro"
        ],
        [
          "checklocation",
          "Temporal Nexus - Camaro"
        ]
      ]
    },
    "timenexus_coach": {
      "e": [
        [
          "cls"
        ],
        [
          "say",
          "No survivors, but somebody left a really nice hat behind!"
        ],
        [
          "checklocation",
          "Temporal Nexus - Stagecoach"
        ],
        [
          "addflag",
          "timenexus_coach"
        ]
      ]
    },
    "timenexus_robot": {
      "e": [
        [
          "cls"
        ],
        [
          "addflag",
          "timenexus_robot"
        ],
        [
          "say",
          "It's a ring!  Or at least it's a ring-shaped object."
        ],
        [
          "checklocation",
          "Temporal Nexus - Robot"
        ]
      ]
    },
    "timenexus_sarc2": {
      "node12": [
        [
          "leftspeak",
          "$lastoption$"
        ],
        [
          "say",
          "You put the jawbone back into the sarcophagus, and in doing so, notice something yellow hidden under the pillow."
        ],
        [
          "say",
          "You grab it, as a reward for your patience."
        ],
        [
          "checklocation",
          "Temporal Nexus - Jawbone"
        ],
        [
          "addflag",
          "timenexus_ed"
        ],
        [
          "option",
          "done",
          "Leave"
        ]
      ]
    },
    "westpole_cairn": {
      "popup": [
        [
          "addstate",
          "val,=hasflag(westpole_@script_context_data.id@)"
        ],
        [
          "if",
          "$val$>0"
        ],
        [
          "goto",
          "knockoffer"
        ],
        [
          "say",
          "It's a pile of weird rocks."
        ],
        [
          "if",
          "geologistquest>=4 && !hasflag(geologistquest_westpole)"
        ],
        [
          "option",
          "grab",
          "Grab one for Dr. Morton"
        ],
        [
          "else",
          ""
        ],
        [
          "option",
          "stack",
          "Mess with them"
        ]
      ],
      "grab": [
        [
          "cls"
        ],
        [
          "say",
          "You pocket what you hope is the most interesting stone."
        ],
        [
          "checklocation",
          "The West Pole - Leftmost Cairn (Dr. Morton's Quest)"
        ],
        [
          "addflag",
          "geologistquest_westpole"
        ]
      ],
      "knockoffer": [
        [
          "say",
          "It's that cairn you built."
        ],
        [
          "if",
          "geologistquest>=4 && !hasflag(geologistquest_westpole)"
        ],
        [
          "option",
          "grab",
          "Grab a stone for Dr. Morton"
        ],
        [
          "else",
          ""
        ],
        [
          "option",
          "knock",
          "Knock it over"
        ]
      ]
    },
    "westpole_rockex": {
      "correct": [
        [
          "say",
          "With a rumble of shaking earth, the rock rises out of the ground, revealing itself to be the tip of a stone obelisk. A hollow in the center of the obelisk contains a small stone ring; when you take it, the obelisk retracts back into the ground."
        ],
        [
          "addflag",
          "petroglyphsolved"
        ],
        [
          "tracking",
          "puzzle_petroglyphs"
        ],
        [
          "checklocation",
          "The West Pole - Petroglyph Puzzle Solved"
        ],
        [
          "addxp",
          "@xpreward_e@*3"
        ],
        [
          "option",
          "done",
          "Wow, crazy."
        ]
      ]
    }
  },
  "skills": {},
  "waas": {
    "beancave_interior": {
      "name": "The Great Garbanzo's Hideout (Inside)",
      "width": "0.500",
      "ground": null,
      "sky": "",
      "startxy": "215,65",
      "horizon": "wallcave_tile1",
      "camera": "interior",
      "foregroundparallax": "foreground_caveframe1",
      "foregroundbrightness": ".5",
      "dark": 1.0,
      "groundtexture": "floor_dirt1",
      "music": "music_cavemine",
      "ambientsound1": "cave_ambience_loop",
      "basewaa": "beancave",
      "elements": {
        "arcaneoven": {
          "asset": "arcaneoven",
          "usedasset": null,
          "x": 393.0,
          "z": 229.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "crafting_arcaneoven",
          "proximity": 0.0,
          "extendback": 1.0
        },
        "beaniron": {
          "asset": "none",
          "usedasset": null,
          "x": 200.0,
          "z": 304.0,
          "height": 30.0,
          "width": 30.0,
          "condition": "hasskill(cookery)",
          "script": "beancave_beaniron1",
          "proximity": 0.0,
          "emitter": "twinkles",
          "notilt": 1.0
        },
        "bed": {
          "asset": "bed2",
          "usedasset": "bed2",
          "x": 309.0,
          "z": 28.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "beancave_bed",
          "proximity": 0.0,
          "extendforward": 1.0,
          "flip": 1.0
        },
        "bookshelf": {
          "asset": "bookshelf",
          "usedasset": "bookshelf",
          "x": 278.0,
          "z": 237.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "beancave_bookshelf",
          "proximity": 0.0,
          "extendback": 1.0
        },
        "exit": {
          "asset": "caveopening",
          "usedasset": null,
          "x": 46.0,
          "z": 0.0,
          "height": 516.0,
          "width": 444.0,
          "condition": "",
          "script": "autoscript__beancave_interior__exit__exec",
          "proximity": 0.0,
          "alpha": ".5",
          "crop": 50.0
        },
        "sofa": {
          "asset": "sofa2",
          "usedasset": null,
          "x": 35.0,
          "z": 238.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "beancave_sofa",
          "proximity": 0.0,
          "extendback": 1.0
        }
      },
      "parentwaa": "beancave"
    },
    "elvibrato1_cave": {
      "name": "Humming Cave (Inside)",
      "width": "2.000",
      "ground": null,
      "sky": "",
      "startxy": "205,123",
      "horizon": "wallcave_tile1",
      "foregroundparallax": "foreground_caveleft1,foreground_cavemiddle1,foreground_cavemiddle5,foreground_cavemiddle1,foreground_cavemiddle3,foreground_cavemiddle2,foreground_caveright1",
      "foregroundbrightness": ".5",
      "dark": 1.0,
      "groundtexture": "floor_dirt1",
      "cluttercount": 10.0,
      "cluttersprites": "rocks1,rocks2,rocks1,rocks2,rocks3",
      "clutterseed": 19285.0,
      "cluttersolid": 1.0,
      "cluttershadow": 1.0,
      "music": "music_cavemine",
      "ambientsound1": "Cave_ambience_loop",
      "basewaa": "elvibrato1",
      "elements": {
        "beaniron": {
          "asset": "none",
          "usedasset": null,
          "x": 1181.0,
          "z": 313.0,
          "height": 50.0,
          "width": 50.0,
          "condition": "hasskill(cookery)",
          "script": "elvibrato1_beaniron1",
          "proximity": 0.0,
          "emitter": "twinkles",
          "notilt": 1.0
        },
        "boulder": {
          "asset": "canyonrock2",
          "usedasset": null,
          "x": 754.0,
          "z": 253.0,
          "height": 664.0,
          "width": 304.0,
          "condition": "!hasflag(elvibrato1_rolledboulder)",
          "script": "elvibrato1_boulder",
          "proximity": 0.0,
          "extendback": 1.0,
          "noshadow": 1.0
        },
        "boulder_rolled": {
          "asset": "canyonrock2_overturned",
          "usedasset": null,
          "x": 831.0,
          "z": 253.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "hasflag(elvibrato1_rolledboulder)",
          "script": "",
          "proximity": 0.0,
          "extendback": 1.0,
          "noshadow": 1.0
        },
        "elvchest": {
          "asset": "elv_chest_locked",
          "usedasset": "elv_chest_open",
          "x": 1363.0,
          "z": 215.0,
          "height": 135.0,
          "width": 278.0,
          "condition": "hasflag(elvibrato1_cache)",
          "script": "elv_chest",
          "proximity": 0.0,
          "elvibrato": 1.0,
          "": "usedscript maybe"
        },
        "elvchest_notice": {
          "asset": "none",
          "usedasset": null,
          "x": 1289.0,
          "z": 210.0,
          "height": 30.0,
          "width": 30.0,
          "condition": "!hasflag(elvibrato1_cache)",
          "script": "elvibrato1_elvcache",
          "proximity": 0.0,
          "extendforward": 1.0,
          "extendback": 1.0,
          "noclip": 1.0
        },
        "exit": {
          "asset": "caveopening",
          "usedasset": null,
          "x": 85.0,
          "z": 253.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "autoscript__elvibrato1_cave__exit__exec",
          "proximity": 0.0,
          "extendback": 1.0,
          "noshadow": 1.0
        },
        "rock1": {
          "asset": "rocks5",
          "usedasset": null,
          "x": 1361.0,
          "z": 228.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock2": {
          "asset": "rocks1",
          "usedasset": null,
          "x": 1362.0,
          "z": 197.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock3": {
          "asset": "rocks6",
          "usedasset": null,
          "x": 1423.0,
          "z": 225.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock4": {
          "asset": "rocks7",
          "usedasset": null,
          "x": 1427.0,
          "z": 197.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rocks1": {
          "asset": "rocks2",
          "usedasset": null,
          "x": 983.0,
          "z": 254.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendback": 1.0
        },
        "rocks2": {
          "asset": "rocks10",
          "usedasset": null,
          "x": 860.0,
          "z": 254.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendback": 1.0
        },
        "rocks3": {
          "asset": "rocks1",
          "usedasset": null,
          "x": 77.0,
          "z": 252.0,
          "height": 52.0,
          "width": 104.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendback": 1.0,
          "noshadow": 1.0
        },
        "rocks4": {
          "asset": "rock1",
          "usedasset": null,
          "x": 219.0,
          "z": 252.0,
          "height": 40.0,
          "width": 78.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendback": 1.0,
          "noshadow": 1.0
        },
        "snakehole": {
          "asset": "caveopening5",
          "usedasset": null,
          "x": 872.0,
          "z": 255.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "!hasflag(elvibrato1_snakehole)",
          "script": "elvibrato1_snakehole",
          "proximity": 0.0,
          "extendback": 1.0,
          "extendforward": 1.0,
          "prop": "eyes_creepy_03,50,50",
          "noshadow": 1.0
        },
        "snakehole_empty": {
          "asset": "caveopening5",
          "usedasset": null,
          "x": 872.0,
          "z": 255.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "hasflag(elvibrato1_snakehole)",
          "script": "",
          "proximity": 0.0,
          "extendback": 1.0,
          "noshadow": 1.0
        },
        "stalag1": {
          "asset": "stalagcluster3",
          "usedasset": null,
          "x": 492.0,
          "z": 128.0,
          "height": 278.0,
          "width": 196.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "stalag2": {
          "asset": "stalagcluster1",
          "usedasset": null,
          "x": 1263.0,
          "z": 12.0,
          "height": 562.0,
          "width": 258.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "stalag3": {
          "asset": "stalag4",
          "usedasset": null,
          "x": 1629.0,
          "z": 223.0,
          "height": 335.0,
          "width": 96.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "stalag4": {
          "asset": "stalag2",
          "usedasset": null,
          "x": 1581.0,
          "z": 194.0,
          "height": 198.0,
          "width": 125.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "teleporter": {
          "asset": "elv_teleporter2",
          "usedasset": null,
          "x": 1797.0,
          "z": 127.0,
          "height": 466.0,
          "width": 501.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "noshadow": 1.0,
          "elvibrato": 1.0,
          "interesting": 1.0,
          "ambientsound": "el_vibrato_monolith_loop, 180"
        },
        "teleportervolume": {
          "asset": "none",
          "usedasset": null,
          "x": 1811.0,
          "z": 126.0,
          "height": 10.0,
          "width": 130.0,
          "condition": "",
          "script": "elvibrato1_teleporter1",
          "proximity": 0.0,
          "shootableheight": 150.0
        },
        "teleprompt": {
          "asset": "none",
          "usedasset": null,
          "x": 1637.0,
          "z": 130.0,
          "height": 30.0,
          "width": 30.0,
          "condition": "",
          "script": "elvibrato1_teleprompt",
          "proximity": 0.0,
          "extendforward": 1.0,
          "extendback": 1.0,
          "noclip": 1.0
        }
      },
      "parentwaa": "elvibrato1"
    },
    "house_airbnb4": {
      "name": "Gun Manor Guest Room #4",
      "width": "0.500",
      "ground": "",
      "sky": "",
      "startxy": "200,90",
      "horizon": "wall_fancydiamonds",
      "camera": "interior",
      "groundtexture": "floor_parquet3",
      "foregroundparallax": "ceiling_tin2",
      "leftwall": "wall_fancydiamonds_side2",
      "rightwall": "wall_fancydiamonds_side",
      "music": "music_ghosthouse",
      "ambientsound1": "winchester_house_ambience",
      "ambientvolume1": ".2",
      "dark": 1.0,
      "darkness": ".3",
      "nolantern": 1.0,
      "basewaa": "house",
      "elements": {
        "bed": {
          "asset": "bed2",
          "usedasset": null,
          "x": 358.0,
          "z": 231.0,
          "height": 218.0,
          "width": 366.0,
          "condition": "",
          "script": "autoscript__house_airbnb4__bed__popup",
          "proximity": 0.0,
          "extendback": 1.0
        },
        "chair": {
          "asset": "fancychair1",
          "usedasset": null,
          "x": 14.0,
          "z": 24.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "exit": {
          "asset": "fancydoor1",
          "usedasset": null,
          "x": 200.0,
          "z": 0.0,
          "height": 530.0,
          "width": 436.0,
          "condition": "",
          "script": "autoscript__house_airbnb4__exit__exec",
          "proximity": 0.0,
          "alpha": ".5",
          "crop": 40.0
        },
        "floorlamp": {
          "asset": "floorlamp",
          "usedasset": null,
          "x": 243.0,
          "z": 242.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendback": 1.0,
          "coldstorage": 1.0
        },
        "ghost": {
          "asset": "person",
          "usedasset": null,
          "x": 376.0,
          "z": 54.0,
          "height": 291.0,
          "width": 116.0,
          "condition": "!hasflag(house_ghost_novelty)",
          "script": "house_ghost_novelty",
          "proximity": 0.0,
          "alpha": ".5",
          "prefab": "human_template",
          "head": "head_dude_noveltyghost",
          "idle": "human_scared",
          "flip": 1.0,
          "ambientsound": "ghost_loop_01,300",
          "ambientvolume": ".3"
        },
        "plant": {
          "asset": "frondpot2",
          "usedasset": null,
          "x": 448.0,
          "z": 10.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "autoscript__house_airbnb4__plant__popup",
          "proximity": 0.0
        },
        "sciencebox3": {
          "asset": "sciencetable",
          "usedasset": null,
          "x": 51.0,
          "z": 27.0,
          "height": 92.0,
          "width": 101.0,
          "condition": "!hasflag(house_sciencebox3)",
          "script": "house_sciencebox_guestroom",
          "proximity": 0.0
        },
        "sciencetable": {
          "asset": "fancytable1",
          "usedasset": null,
          "x": 51.0,
          "z": 27.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "hasflag(house_sciencebox3)",
          "script": "",
          "proximity": 0.0
        },
        "ventto3": {
          "asset": "armoire",
          "usedasset": null,
          "x": 52.0,
          "z": 238.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "house_airbnb4armoire",
          "proximity": 0.0,
          "extendback": 1.0
        }
      },
      "parentwaa": "house"
    },
    "house_belfry": {
      "name": "Gun Manor Belfry",
      "width": "1.550",
      "ground": null,
      "sky": "",
      "startxy": "1150,180",
      "horizon": "wallf_tile1,wallf_tile1,wallf_tile2,wallf_tile1",
      "camera": "interior",
      "groundtexture": "floortest1",
      "foregroundparallax": "foreground_attic_left,foreground_elvibratomiddle1,foreground_elvibratomiddle1,foreground_elvibratomiddle1,foreground_attic_right",
      "leftwall": "wallf_side1",
      "rightwall": "wallf_side1",
      "music": "music_ghosthouse",
      "ambientsound1": "winchester_house_ambience",
      "ambientvolume1": ".2",
      "footstepreverb": 1.0,
      "dark": 1.0,
      "darkness": ".3",
      "nolantern": 1.0,
      "basewaa": "house",
      "elements": {
        "bellnotice": {
          "asset": "none",
          "usedasset": null,
          "x": 551.0,
          "z": 127.0,
          "height": 30.0,
          "width": 30.0,
          "condition": "",
          "script": "house_noticebell",
          "proximity": 0.0,
          "extendforward": 1.0,
          "extendback": 1.0,
          "noclip": 1.0
        },
        "bellringer": {
          "asset": "bellcontrol",
          "usedasset": null,
          "x": 297.0,
          "z": 225.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "house_bellringer",
          "proximity": 0.0,
          "extendback": 1.0
        },
        "billiards": {
          "asset": "person",
          "usedasset": null,
          "x": 780.0,
          "z": 324.0,
          "height": 291.0,
          "width": 116.0,
          "condition": "1==2",
          "script": "",
          "proximity": 0.0,
          "prefab": "human_template",
          "head": "head_billiardsghost",
          "backhand": "held_poolcue",
          "alpha": ".5"
        },
        "box1": {
          "asset": null,
          "usedasset": null,
          "x": 0.0,
          "z": 0.0,
          "height": 0.0,
          "width": 0.0,
          "condition": null,
          "script": "",
          "proximity": 0.0
        },
        "box10": {
          "asset": "dirtybox3",
          "usedasset": null,
          "x": 1392.0,
          "z": 239.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendforward": 1.0
        },
        "box11": {
          "asset": "dirtybox5",
          "usedasset": null,
          "x": 1432.0,
          "z": 177.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendforward": 1.0
        },
        "box12": {
          "asset": "dirtybox2",
          "usedasset": null,
          "x": 1397.0,
          "z": 37.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendforward": 1.0
        },
        "box14": {
          "asset": "dirtybox5",
          "usedasset": null,
          "x": 1463.0,
          "z": 30.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendforward": 1.0
        },
        "box2": {
          "asset": "dirtybox4",
          "usedasset": null,
          "x": 1132.0,
          "z": 10.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "autoscript__house_belfry__box2__popup",
          "proximity": 0.0,
          "extendforward": 1.0
        },
        "box3": {
          "asset": "dirtybox2",
          "usedasset": null,
          "x": 1042.0,
          "z": 4.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "autoscript__house_belfry__box3__popup",
          "proximity": 0.0,
          "extendforward": 1.0
        },
        "box4": {
          "asset": "dirtybox2",
          "usedasset": null,
          "x": 155.0,
          "z": 240.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "autoscript__house_belfry__box4__popup",
          "proximity": 0.0,
          "extendforward": 1.0
        },
        "box5": {
          "asset": "dirtybox3",
          "usedasset": null,
          "x": 21.0,
          "z": 189.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendforward": 1.0
        },
        "box6": {
          "asset": "dirtybox5",
          "usedasset": null,
          "x": 128.0,
          "z": 152.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendforward": 1.0
        },
        "box7": {
          "asset": "dirtybox6",
          "usedasset": null,
          "x": 94.0,
          "z": 147.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendforward": 1.0
        },
        "box8": {
          "asset": "dirtybox5",
          "usedasset": null,
          "x": 124.0,
          "z": 45.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendforward": 1.0,
          "flip": 1.0
        },
        "box9": {
          "asset": "dirtybox4",
          "usedasset": null,
          "x": 28.0,
          "z": 15.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendforward": 1.0
        },
        "chet": {
          "asset": "person",
          "usedasset": null,
          "x": 846.0,
          "z": 172.0,
          "height": 291.0,
          "width": 116.0,
          "condition": "!hasflag(house_chet_gone)",
          "script": "house_chet_talk",
          "proximity": 0.0,
          "prefab": "human_template",
          "head": "head_chet,75,95",
          "idle": "boring"
        },
        "chettrigger": {
          "asset": "none",
          "usedasset": null,
          "x": 930.0,
          "z": 4.0,
          "height": 300.0,
          "width": 10.0,
          "condition": "!hasflag(house_chet_met)",
          "script": "house_chet_talk_trigger",
          "proximity": 0.0,
          "extendforward": 1.0,
          "extendback": 1.0
        },
        "conductor": {
          "asset": "person",
          "usedasset": null,
          "x": 720.0,
          "z": 322.0,
          "height": 291.0,
          "width": 116.0,
          "condition": "1==2",
          "script": "",
          "proximity": 0.0,
          "prefab": "human_template",
          "head": "head_ghost_conductor",
          "alpha": ".5"
        },
        "electriclight": {
          "asset": null,
          "usedasset": null,
          "x": 360.0,
          "z": -180.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "coldstorage": 1.0
        },
        "electriclight2": {
          "asset": null,
          "usedasset": null,
          "x": 960.0,
          "z": -180.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "coldstorage": 1.0
        },
        "exit": {
          "asset": "trapdoor",
          "usedasset": null,
          "x": 1234.0,
          "z": 92.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "house_trapdoor",
          "proximity": 0.0,
          "floordecal": 1.0,
          "noclip": 1.0
        },
        "furn1": {
          "asset": "sheetfurniture4",
          "usedasset": null,
          "x": 1180.0,
          "z": 238.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "autoscript__house_belfry__furn1__popup",
          "proximity": 0.0,
          "extendback": 1.0
        },
        "furn10": {
          "asset": "sheetfurniture3",
          "usedasset": null,
          "x": 0.0,
          "z": 0.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "autoscript__house_belfry__furn10__popup",
          "proximity": 0.0,
          "extendforward": 1.0
        },
        "furn11": {
          "asset": "sheetfurniture1",
          "usedasset": null,
          "x": 1413.0,
          "z": 205.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendforward": 1.0
        },
        "furn2": {
          "asset": "sheetfurniture3",
          "usedasset": null,
          "x": 1476.0,
          "z": 235.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendforward": 1.0
        },
        "furn3": {
          "asset": "sheetfurniture4",
          "usedasset": null,
          "x": 59.0,
          "z": 204.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendforward": 1.0
        },
        "furn4": {
          "asset": "sheetfurniture3",
          "usedasset": null,
          "x": 73.0,
          "z": 167.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendforward": 1.0
        },
        "furn5": {
          "asset": "sheetfurniture2",
          "usedasset": null,
          "x": 100.0,
          "z": 108.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendforward": 1.0
        },
        "furn6": {
          "asset": "sheetfurniture1",
          "usedasset": null,
          "x": 6.0,
          "z": 139.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendforward": 1.0
        },
        "furn7": {
          "asset": "sheetfurniture4",
          "usedasset": null,
          "x": 15.0,
          "z": 53.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendforward": 1.0,
          "flip": 1.0
        },
        "furn8": {
          "asset": "sheetfurniture2",
          "usedasset": null,
          "x": 1435.0,
          "z": 130.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendforward": 1.0
        },
        "furn9": {
          "asset": "sheetfurniture4",
          "usedasset": null,
          "x": 1429.0,
          "z": 54.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendforward": 1.0
        },
        "ghostbuster": {
          "asset": "person",
          "usedasset": null,
          "x": 1289.0,
          "z": 187.0,
          "height": 291.0,
          "width": 116.0,
          "condition": "",
          "script": "house_ghostbuster_talk",
          "proximity": 0.0,
          "coldstorage": 1.0,
          "flip": 1.0
        },
        "glutton": {
          "asset": "person",
          "usedasset": null,
          "x": 253.0,
          "z": 325.0,
          "height": 291.0,
          "width": 116.0,
          "condition": "1==2",
          "script": "",
          "proximity": 0.0,
          "prefab": "ghost_template",
          "head": "head_glutton_open",
          "alpha": ".5"
        },
        "lardest": {
          "asset": "person",
          "usedasset": null,
          "x": 605.0,
          "z": 322.0,
          "height": 291.0,
          "width": 116.0,
          "condition": "1==2",
          "script": "",
          "proximity": 0.0,
          "prefab": "human_template",
          "head": "head_lardest,78,56",
          "alpha": ".5"
        },
        "lawyer": {
          "asset": "person",
          "usedasset": null,
          "x": 187.0,
          "z": 326.0,
          "height": 291.0,
          "width": 116.0,
          "condition": "1==2",
          "script": "",
          "proximity": 0.0,
          "prefab": "human_template",
          "head": "head_lady_lawyer,50,60",
          "alpha": ".5"
        },
        "leftblocker": {
          "asset": "none",
          "usedasset": null,
          "x": 208.0,
          "z": 131.0,
          "height": 30.0,
          "width": 30.0,
          "condition": "",
          "script": "autoscript__house_belfry__leftblocker__popup",
          "proximity": 0.0,
          "extendforward": 1.0,
          "extendback": 1.0
        },
        "librarian": {
          "asset": "person",
          "usedasset": null,
          "x": 453.0,
          "z": 323.0,
          "height": 291.0,
          "width": 116.0,
          "condition": "1==2",
          "script": "",
          "proximity": 0.0,
          "prefab": "human_template",
          "head": "head_librarian,50,60",
          "alpha": ".5"
        },
        "mrsgun": {
          "asset": "person",
          "usedasset": null,
          "x": 103.0,
          "z": 326.0,
          "height": 291.0,
          "width": 116.0,
          "condition": "1==2",
          "script": "",
          "proximity": 0.0,
          "alpha": ".5",
          "prefab": "human_template",
          "head": "head_mrsgun,60,48"
        },
        "pardner": {
          "asset": "person",
          "usedasset": null,
          "x": 1330.0,
          "z": 45.0,
          "height": 291.0,
          "width": 116.0,
          "condition": "",
          "script": "pardner",
          "proximity": 0.0,
          "flip": 1.0
        },
        "poacher": {
          "asset": "person",
          "usedasset": null,
          "x": 392.0,
          "z": 322.0,
          "height": 291.0,
          "width": 116.0,
          "condition": "1==2",
          "script": "",
          "proximity": 0.0,
          "prefab": "human_template",
          "head": "head_ghost_poacher,88,70",
          "alpha": ".5"
        },
        "post1": {
          "asset": "woodpost1",
          "usedasset": null,
          "x": 660.0,
          "z": 0.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "post2": {
          "asset": "woodpost2",
          "usedasset": null,
          "x": 660.0,
          "z": 64.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "post3": {
          "asset": "woodpost1",
          "usedasset": null,
          "x": 660.0,
          "z": 128.0,
          "height": 1010.0,
          "width": 157.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "flip": 1.0
        },
        "post4": {
          "asset": "woodpost2",
          "usedasset": null,
          "x": 660.0,
          "z": 192.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "flip": 1.0
        },
        "post5": {
          "asset": "woodpost1",
          "usedasset": null,
          "x": 660.0,
          "z": 255.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rightblocker": {
          "asset": "none",
          "usedasset": null,
          "x": 1366.0,
          "z": 130.0,
          "height": 30.0,
          "width": 30.0,
          "condition": "",
          "script": "autoscript__house_belfry__rightblocker__popup",
          "proximity": 0.0,
          "extendforward": 1.0,
          "extendback": 1.0
        },
        "sciencebox4": {
          "asset": "sciencebox",
          "usedasset": null,
          "x": 415.0,
          "z": 230.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "!hasflag(house_sciencebox4)",
          "script": "house_sciencebox_belfry",
          "proximity": 0.0
        },
        "scorch": {
          "asset": "blast6",
          "usedasset": null,
          "x": 843.0,
          "z": 148.0,
          "height": 136.0,
          "width": 120.0,
          "condition": "hasflag(house_chet_ghostsgot)",
          "script": "autoscript__house_belfry__scorch__popup",
          "proximity": 0.0,
          "floordecal": 1.0
        },
        "teaparty": {
          "asset": "person",
          "usedasset": null,
          "x": 536.0,
          "z": 323.0,
          "height": 291.0,
          "width": 116.0,
          "condition": "1==2",
          "script": "",
          "proximity": 0.0,
          "prefab": "ghost_template",
          "head": "head_kid_happygirl",
          "alpha": ".5"
        }
      },
      "parentwaa": "house"
    },
    "house_lab": {
      "name": "Gun Manor Laboratory",
      "width": "0.900",
      "ground": null,
      "sky": "",
      "startxy": "145,100",
      "camera": "interior",
      "horizon": "brickwall_tile2,brickwall_tile3,brickwall_tile4,brickwall_tile1",
      "leftwall": "wallbrick_side1",
      "rightwall": "wallbrick_side1",
      "foregroundparallax": "woodceiling1_good",
      "foregroundparallaxoffset": -40.0,
      "foregroundbrightness": ".5",
      "groundtexture": "floor_dirt1",
      "ambientsound1": "winchester_house_ambience",
      "onenter": "house_labinit",
      "music": "music_ghosthouse",
      "ambientvolume1": ".2",
      "dark": 1.0,
      "darkness": ".3",
      "nolantern": 1.0,
      "basewaa": "house",
      "elements": {
        "bismuthbombbench": {
          "asset": "bismuthbench",
          "usedasset": null,
          "x": 139.0,
          "z": 250.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "house_lab_bismuthbench",
          "proximity": 0.0,
          "extendback": 1.0
        },
        "bismuthboxes": {
          "asset": "bismuthboxes",
          "usedasset": null,
          "x": 32.0,
          "z": 247.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "autoscript__house_lab__bismuthboxes__popup",
          "proximity": 0.0,
          "extendback": 1.0
        },
        "electriclight1": {
          "asset": null,
          "usedasset": null,
          "x": 400.0,
          "z": -180.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "coldstorage": 1.0
        },
        "electriclight2": {
          "asset": null,
          "usedasset": null,
          "x": 200.0,
          "z": -180.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "coldstorage": 1.0
        },
        "electriclight3": {
          "asset": null,
          "usedasset": null,
          "x": 600.0,
          "z": -180.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "coldstorage": 1.0
        },
        "exit": {
          "asset": "housecellardoor",
          "usedasset": null,
          "x": 103.0,
          "z": 0.0,
          "height": 367.0,
          "width": 266.0,
          "condition": "",
          "script": "autoscript__house_lab__exit__exec",
          "proximity": 0.0,
          "alpha": ".5",
          "crop": 50.0
        },
        "ghostbuster": {
          "asset": "person",
          "usedasset": null,
          "x": 369.0,
          "z": 10.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "house_ghostbuster_talk",
          "proximity": 0.0,
          "coldstorage": 1.0
        },
        "gunbench": {
          "asset": "gunbench",
          "usedasset": null,
          "x": 666.0,
          "z": 244.0,
          "height": 225.0,
          "width": 238.0,
          "condition": "",
          "script": "house_gunbench",
          "proximity": 0.0,
          "extendback": 1.0
        },
        "medicinecabinet": {
          "asset": "medicinecabinet",
          "usedasset": "medicinecabinet_open",
          "x": 816.0,
          "z": 318.0,
          "height": 164.0,
          "width": 162.0,
          "condition": "",
          "script": "house_labmedicine",
          "proximity": 0.0,
          "notilt": 1.0
        },
        "pardner": {
          "asset": "person",
          "usedasset": null,
          "x": 251.0,
          "z": 13.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "pardner",
          "proximity": 0.0
        },
        "periodic": {
          "asset": "periodictable",
          "usedasset": null,
          "x": 262.0,
          "z": 302.0,
          "height": 242.0,
          "width": 388.0,
          "condition": "",
          "script": "house_periodictable",
          "proximity": 0.0,
          "notilt": 1.0
        },
        "sciencebox1": {
          "asset": "sciencebox",
          "usedasset": null,
          "x": 544.0,
          "z": 16.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "!hasflag(house_sciencebox1)",
          "script": "house_sciencebox_lab",
          "proximity": 0.0
        },
        "silencerbench": {
          "asset": "silenterbench",
          "usedasset": null,
          "x": 454.0,
          "z": 250.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "house_silencerbench",
          "proximity": 0.0,
          "extendback": 1.0
        },
        "silencerposter": {
          "asset": "silenterrecipe",
          "usedasset": null,
          "x": 541.0,
          "z": 310.0,
          "height": 187.0,
          "width": 179.0,
          "condition": "",
          "script": "house_silencerposter",
          "proximity": 0.0,
          "notilt": 1.0
        }
      },
      "parentwaa": "house"
    },
    "house_tween": {
      "name": "Gun Manor Tween Room",
      "width": "0.660",
      "ground": null,
      "sky": "",
      "startxy": "195,80",
      "horizon": "wall_fancyflowers1,wall_fancyflowers2",
      "camera": "interior",
      "groundtexture": "floor_parquet3",
      "foregroundparallax": "ceiling_tin2",
      "leftwall": "wall_fancyflowerside2",
      "rightwall": "wall_fancyflowerside",
      "music": "music_cave_lounge_disco",
      "ambientsound1": "winchester_house_ambience",
      "ambientvolume1": ".2",
      "dark": 1.0,
      "darkness": ".3",
      "nolantern": 1.0,
      "onenter": "house_tween_init",
      "basewaa": "house",
      "elements": {
        "armoire": {
          "asset": "armoire",
          "usedasset": null,
          "x": 394.0,
          "z": 244.0,
          "height": 356.0,
          "width": 240.0,
          "condition": "",
          "script": "house_tweenarmoire",
          "proximity": 0.0,
          "extendback": 1.0
        },
        "bed": {
          "asset": "bed_4poster",
          "usedasset": null,
          "x": 531.0,
          "z": 224.0,
          "height": 369.0,
          "width": 370.0,
          "condition": "",
          "script": "house_tweenbed",
          "proximity": 0.0,
          "extendback": 1.0
        },
        "desk": {
          "asset": "desk_book",
          "usedasset": "desk",
          "x": 229.0,
          "z": 32.0,
          "height": 208.0,
          "width": 310.0,
          "condition": "",
          "script": "house_tweendesk",
          "proximity": 0.0
        },
        "exit": {
          "asset": "fancydoor1",
          "usedasset": null,
          "x": 0.0,
          "z": 0.0,
          "height": 530.0,
          "width": 436.0,
          "condition": "",
          "script": "autoscript__house_tween__exit__exec",
          "proximity": 0.0,
          "alpha": ".5",
          "crop": 40.0
        },
        "floorlamp": {
          "asset": "floorlamp",
          "usedasset": null,
          "x": 474.0,
          "z": 7.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendforward": 1.0,
          "coldstorage": 1.0
        },
        "gramophone": {
          "asset": "victrolla",
          "usedasset": null,
          "x": 600.0,
          "z": 20.0,
          "height": 234.0,
          "width": 116.0,
          "condition": "!hasflag(house_tween_musicoff)",
          "script": "",
          "proximity": 0.0,
          "extendforward": 1.0,
          "emitter": "music_piano,-50,10",
          "prop": "crank_victrolla,5,40,1"
        },
        "gramophone_collider": {
          "asset": "none",
          "usedasset": null,
          "x": 599.0,
          "z": 24.0,
          "height": 10.0,
          "width": 40.0,
          "condition": "",
          "script": "house_tween_gramophone",
          "proximity": 0.0,
          "extendforward": 1.0
        },
        "gramophone_off": {
          "asset": "victrolla",
          "usedasset": null,
          "x": 600.0,
          "z": 20.0,
          "height": 234.0,
          "width": 116.0,
          "condition": "hasflag(house_tween_musicoff)",
          "script": "",
          "proximity": 0.0,
          "extendforward": 1.0
        },
        "lawbook": {
          "asset": "floorbook",
          "usedasset": null,
          "x": 573.0,
          "z": 227.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "!hasflag(house_gotfunlaw)",
          "script": "",
          "proximity": 0.0
        },
        "poster": {
          "asset": "booneposter",
          "usedasset": null,
          "x": 210.0,
          "z": 289.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "!hasflag(house_posterscare)",
          "script": "house_tweenposter",
          "proximity": 0.0
        },
        "poster_floor": {
          "asset": "booneposter_torn",
          "usedasset": null,
          "x": 240.0,
          "z": 254.0,
          "height": 94.0,
          "width": 224.0,
          "condition": "hasflag(house_posterscare)",
          "script": "",
          "proximity": 0.0,
          "noclip": 1.0
        },
        "postposter": {
          "asset": "booneposter2",
          "usedasset": null,
          "x": 210.0,
          "z": 289.0,
          "height": 166.0,
          "width": 132.0,
          "condition": "hasflag(house_posterscare)",
          "script": "",
          "proximity": 0.0
        },
        "sciencebox2": {
          "asset": "sciencebox",
          "usedasset": null,
          "x": 417.0,
          "z": 15.0,
          "height": 92.0,
          "width": 101.0,
          "condition": "!hasflag(house_sciencebox2)",
          "script": "house_sciencebox_tweenroom",
          "proximity": 0.0
        },
        "vanity": {
          "asset": "vanity_fancy_black",
          "usedasset": "vanity_fancy_black",
          "x": 39.0,
          "z": 251.0,
          "height": 246.0,
          "width": 279.0,
          "condition": "",
          "script": "house_tweenvanity",
          "proximity": 0.0,
          "extendback": 1.0
        }
      },
      "parentwaa": "house"
    },
    "mine1_interior1": {
      "name": "Snakepit Mine (Inside)",
      "width": "2.250",
      "ground": "",
      "sky": "",
      "startxy": "100,100",
      "horizon": "wallmine_tile1",
      "leftwall": "wallmine_side1",
      "rightwall": "wallmine_side2",
      "foregroundparallax": "foreground_minesupport,foreground_mineceiling1,foreground_mineceiling2",
      "foregroundbrightness": ".5",
      "dark": 1.0,
      "groundtexture": "floor_dirt1",
      "music": "music_cavemine",
      "ambientsound1": "cave_ambience_loop",
      "basewaa": "mine1",
      "elements": {
        "beaniron": {
          "asset": "none",
          "usedasset": null,
          "x": 1333.0,
          "z": 331.0,
          "height": 50.0,
          "width": 50.0,
          "condition": "hasskill(cookery)",
          "script": "mine1_beaniron1",
          "proximity": 0.0,
          "emitter": "twinkles",
          "notilt": 1.0
        },
        "cart": {
          "asset": "minecart_full",
          "usedasset": "minecart_empty",
          "x": 853.0,
          "z": 248.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "mine1_cart",
          "proximity": 0.0,
          "extendback": 1.0
        },
        "crate": {
          "asset": "lootpile1",
          "usedasset": "lootpile1_empty",
          "x": 1401.0,
          "z": 17.0,
          "height": 196.0,
          "width": 193.0,
          "condition": "",
          "script": "mine1_crate",
          "proximity": 0.0
        },
        "crate1": {
          "asset": "crate",
          "usedasset": "crate",
          "x": 340.0,
          "z": 247.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "hasflag(mine1_crate1)",
          "script": "mine1_crate1",
          "proximity": 0.0,
          "extendback": 1.0
        },
        "elvchest": {
          "asset": "elv_chest_locked",
          "usedasset": "elv_chest_open",
          "x": 2109.0,
          "z": 56.0,
          "height": 135.0,
          "width": 278.0,
          "condition": "hasflag(mine1_cache)",
          "script": "elv_chest",
          "proximity": 0.0,
          "elvibrato": 1.0,
          "": "usedscript maybe"
        },
        "elvchestnotice": {
          "asset": "none",
          "usedasset": null,
          "x": 2021.0,
          "z": 61.0,
          "height": 30.0,
          "width": 30.0,
          "condition": "!hasflag(mine1_cache)",
          "script": "mine1_elvcache",
          "proximity": 0.0,
          "extendforward": 1.0,
          "extendback": 1.0,
          "noclip": 1.0
        },
        "exitdoor": {
          "asset": "minedoor",
          "usedasset": null,
          "x": 123.0,
          "z": 252.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "autoscript__mine1_interior1__exitdoor__exec",
          "proximity": 0.0,
          "extendback": 1.0,
          "noshadow": 1.0
        },
        "lumber1": {
          "asset": "lumberpile",
          "usedasset": null,
          "x": 344.0,
          "z": 246.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "!hasflag(mine1_crate1)",
          "script": "mine1_lumberpile",
          "proximity": 0.0,
          "extendback": 1.0
        },
        "meatvein": {
          "asset": "meatvein1",
          "usedasset": null,
          "x": 2125.0,
          "z": 319.0,
          "height": 201.0,
          "width": 225.0,
          "condition": "",
          "script": "meatvein",
          "proximity": 0.0,
          "flip": 1.0,
          "notilt": 1.0
        },
        "pickpile": {
          "asset": "pickrock",
          "usedasset": "pickrock_empty",
          "x": 1890.0,
          "z": 123.0,
          "height": 200.0,
          "width": 225.0,
          "condition": "",
          "script": "mine1_pickpile",
          "proximity": 0.0
        },
        "rock1": {
          "asset": "rocks5",
          "usedasset": null,
          "x": 2105.0,
          "z": 42.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock2": {
          "asset": "rocks5",
          "usedasset": null,
          "x": 2175.0,
          "z": 69.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock3": {
          "asset": "rocks6",
          "usedasset": null,
          "x": 2178.0,
          "z": 40.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock4": {
          "asset": "rocks6",
          "usedasset": null,
          "x": 2106.0,
          "z": 68.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rocks1": {
          "asset": "rocks1",
          "usedasset": null,
          "x": 114.0,
          "z": 251.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendback": 1.0,
          "noshadow": 1.0
        },
        "rocks2": {
          "asset": "rocks2",
          "usedasset": null,
          "x": 262.0,
          "z": 250.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendback": 1.0,
          "noshadow": 1.0
        },
        "rocks3": {
          "asset": "rocks2",
          "usedasset": null,
          "x": 1544.0,
          "z": 142.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rocks4": {
          "asset": "rocks4",
          "usedasset": null,
          "x": 1712.0,
          "z": 143.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rocks6": {
          "asset": "rocks4",
          "usedasset": null,
          "x": 448.0,
          "z": 251.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendback": 1.0
        },
        "rocks7": {
          "asset": "rocks3",
          "usedasset": null,
          "x": 594.0,
          "z": 47.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rocks8": {
          "asset": "rocks2",
          "usedasset": null,
          "x": 822.0,
          "z": 39.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "snakehole1": {
          "asset": "den1",
          "usedasset": null,
          "x": 614.0,
          "z": 245.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "!hasflag(mine1_snakehole1)",
          "script": "mine1_snakehole1",
          "proximity": 0.0,
          "extendback": 1.0,
          "prop": "eyes_creepy_02,45,5"
        },
        "snakehole1_empty": {
          "asset": "den1",
          "usedasset": null,
          "x": 614.0,
          "z": 245.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "hasflag(mine1_snakehole1)",
          "script": "",
          "proximity": 0.0,
          "extendback": 1.0
        },
        "snakehole2": {
          "asset": "den2",
          "usedasset": null,
          "x": 1105.0,
          "z": 229.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "!hasflag(mine1_snakehole2)",
          "script": "mine1_snakehole2",
          "proximity": 0.0,
          "emitter": "smoke_a,35,35",
          "emitter1": "smoke_a,55,45"
        },
        "snakehole2_nosmoke": {
          "asset": "den2",
          "usedasset": null,
          "x": 1105.0,
          "z": 229.0,
          "height": 142.0,
          "width": 286.0,
          "condition": "hasflag(mine1_snakehole2)",
          "script": "",
          "proximity": 0.0
        },
        "snakehole3": {
          "asset": "den4",
          "usedasset": null,
          "x": 1557.0,
          "z": 148.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "!hasflag(mine1_snakehole3)",
          "script": "mine1_snakehole3",
          "proximity": 0.0,
          "prop": "eyes_creepy_02"
        },
        "snakehole3_empty": {
          "asset": "den4",
          "usedasset": null,
          "x": 1557.0,
          "z": 148.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "hasflag(mine1_snakehole3)",
          "script": "mine1_snakehole3",
          "proximity": 0.0
        }
      },
      "parentwaa": "mine1"
    },
    "mine2_interior2": {
      "name": "Kole Ridge Mine (Deeper)",
      "width": "1.700",
      "ground": null,
      "sky": "",
      "startxy": "1080,100",
      "horizon": "wallmine_tile1",
      "leftwall": "wallmine_side1",
      "rightwall": "wallmine_side1",
      "foregroundparallax": "foreground_minesupport,foreground_mineceiling1,foreground_mineceiling2",
      "foregroundbrightness": ".5",
      "dark": 1.0,
      "groundtexture": "floor_dirt1",
      "cluttercount": 10.0,
      "cluttersprites": "rocks5,rocks6,rocks7,rocks8,rocks9",
      "clutterseed": 69420.0,
      "cluttershadow": 1.0,
      "music": "music_cavemine",
      "ambientsound1": "cave_ambience_loop",
      "basewaa": "mine2",
      "elements": {
        "beaniron": {
          "asset": "none",
          "usedasset": null,
          "x": 808.0,
          "z": 323.0,
          "height": 50.0,
          "width": 50.0,
          "condition": "hasskill(cookery)",
          "script": "mine2_beaniron1",
          "proximity": 0.0,
          "emitter": "twinkles",
          "notilt": 1.0
        },
        "cart1": {
          "asset": "minecart_full",
          "usedasset": "minecart_empty",
          "x": 1643.0,
          "z": 23.0,
          "height": 234.0,
          "width": 221.0,
          "condition": "",
          "script": "mine2_cart2",
          "proximity": 0.0
        },
        "curlyhole": {
          "asset": "none",
          "usedasset": null,
          "x": 743.0,
          "z": 114.0,
          "height": 10.0,
          "width": 100.0,
          "condition": "hasflag(quest_curly)==2",
          "script": "mine2_curlyhole",
          "proximity": 0.0
        },
        "elvchest": {
          "asset": "elv_chest_locked",
          "usedasset": "elv_chest_open",
          "x": 1349.0,
          "z": 218.0,
          "height": 135.0,
          "width": 278.0,
          "condition": "hasflag(mine2_cache)",
          "script": "elv_chest",
          "proximity": 0.0,
          "elvibrato": 1.0,
          "": "usedscript maybe"
        },
        "elvchest_notice": {
          "asset": "none",
          "usedasset": null,
          "x": 1271.0,
          "z": 209.0,
          "height": 30.0,
          "width": 30.0,
          "condition": "!hasflag(mine2_cache)",
          "script": "mine2_elvcache",
          "proximity": 0.0,
          "extendforward": 1.0,
          "extendback": 1.0,
          "noclip": 1.0
        },
        "exitdown": {
          "asset": "minedoor",
          "usedasset": null,
          "x": 1523.0,
          "z": 249.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "autoscript__mine2_interior2__exitdown__exec",
          "proximity": 0.0,
          "extendback": 1.0,
          "noshadow": 1.0
        },
        "exitup": {
          "asset": "minedoor_rope2",
          "usedasset": null,
          "x": 224.0,
          "z": 252.0,
          "height": 486.0,
          "width": 546.0,
          "condition": "",
          "script": "mine2_doorupto1",
          "proximity": 0.0,
          "extendback": 1.0,
          "noshadow": 1.0
        },
        "rock1": {
          "asset": "rocks5",
          "usedasset": null,
          "x": 1345.0,
          "z": 230.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock2": {
          "asset": "rocks5",
          "usedasset": null,
          "x": 1417.0,
          "z": 206.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock3": {
          "asset": "rocks1",
          "usedasset": null,
          "x": 1349.0,
          "z": 205.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock4": {
          "asset": "rocks6",
          "usedasset": null,
          "x": 1414.0,
          "z": 228.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rocks1": {
          "asset": "rocks8",
          "usedasset": null,
          "x": 218.0,
          "z": 251.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendback": 1.0
        },
        "rocks2": {
          "asset": "rocks10",
          "usedasset": null,
          "x": 380.0,
          "z": 251.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendback": 1.0
        },
        "rocks3": {
          "asset": "rocks5",
          "usedasset": null,
          "x": 1519.0,
          "z": 248.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendback": 1.0
        },
        "rocks4": {
          "asset": "rocks8",
          "usedasset": null,
          "x": 1678.0,
          "z": 248.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendback": 1.0
        },
        "triangle1": {
          "asset": "trianglerock2",
          "usedasset": null,
          "x": 766.0,
          "z": 135.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "mine2_elvmarker",
          "proximity": 0.0
        },
        "triangle2": {
          "asset": "trianglerock1",
          "usedasset": null,
          "x": 710.0,
          "z": 87.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "mine2_elvmarker",
          "proximity": 0.0
        },
        "triangle3": {
          "asset": "trianglerock3",
          "usedasset": null,
          "x": 833.0,
          "z": 88.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "mine2_elvmarker",
          "proximity": 0.0,
          "flip": 1.0
        },
        "vein1": {
          "asset": "meatvein1",
          "usedasset": null,
          "x": 130.0,
          "z": 287.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "meatvein",
          "proximity": 0.0,
          "notilt": 1.0
        },
        "vein2": {
          "asset": "meatvein2",
          "usedasset": null,
          "x": 1085.0,
          "z": 315.0,
          "height": 144.0,
          "width": 318.0,
          "condition": "",
          "script": "meatvein",
          "proximity": 0.0,
          "flip": 1.0,
          "notilt": 1.0
        },
        "vein3": {
          "asset": "meatvein3",
          "usedasset": null,
          "x": 1363.0,
          "z": 54.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "meatvein",
          "proximity": 0.0,
          "floordecal": 1.0
        }
      },
      "parentwaa": "mine2"
    },
    "mine4_levelc": {
      "name": "Jumbleneck Mine (Inside)",
      "width": "1.000",
      "ground": null,
      "sky": "",
      "startxy": "1080,100",
      "horizon": "wallmine_tile1",
      "leftwall": "wallmine_side1",
      "rightwall": "wallmine_side1",
      "foregroundparallax": "foreground_mineceiling1,foreground_mineceiling2",
      "foregroundbrightness": ".5",
      "dark": 1.0,
      "groundtexture": "floor_dirt1",
      "music": "music_cavemine",
      "ambientsound1": "cave_ambience_loop",
      "basewaa": "mine4",
      "elements": {
        "beaniron": {
          "asset": "none",
          "usedasset": null,
          "x": 285.0,
          "z": 321.0,
          "height": 50.0,
          "width": 50.0,
          "condition": "hasskill(cookery)",
          "script": "mine4_beaniron2",
          "proximity": 0.0,
          "emitter": "twinkles",
          "notilt": 1.0
        },
        "cartlaunchA": {
          "asset": "minelauncher",
          "usedasset": null,
          "x": 94.0,
          "z": 115.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "!hasflag(mine4_cartlauncher)",
          "script": "mine4_looklaunch",
          "proximity": 5.0
        },
        "cartlaunchB": {
          "asset": "minelauncher",
          "usedasset": null,
          "x": 94.0,
          "z": 115.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "hasflag(mine4_cartlauncher)",
          "script": "mine4_looklaunch",
          "proximity": 5.0
        },
        "crate": {
          "asset": "crate",
          "usedasset": null,
          "x": 24.0,
          "z": 229.0,
          "height": 136.0,
          "width": 180.0,
          "condition": "",
          "script": "mine4_crate",
          "proximity": 0.0
        },
        "lunchbox": {
          "asset": "lunchbox",
          "usedasset": "lunchbox_open",
          "x": 457.0,
          "z": 242.0,
          "height": 101.0,
          "width": 142.0,
          "condition": "",
          "script": "mine4_lunchbox",
          "proximity": 0.0
        },
        "minecart": {
          "asset": "minecart_full",
          "usedasset": null,
          "x": 156.0,
          "z": 113.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "hasflag(mine4_cartloc)==1",
          "script": "mine4_minecartb",
          "proximity": 0.0
        },
        "track1": {
          "asset": "tracks_short",
          "usedasset": null,
          "x": 159.0,
          "z": 88.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "floordecal": 1.0
        },
        "track2": {
          "asset": "tracks_short",
          "usedasset": null,
          "x": 306.0,
          "z": 88.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "floordecal": 1.0
        },
        "track3": {
          "asset": "tracks_short",
          "usedasset": null,
          "x": 465.0,
          "z": 88.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "floordecal": 1.0
        },
        "track4": {
          "asset": "tracksbend",
          "usedasset": null,
          "x": 623.0,
          "z": 90.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "floordecal": 1.0
        },
        "tunnel": {
          "asset": "minedoor",
          "usedasset": null,
          "x": 620.0,
          "z": 257.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "autoscript__mine4_levelc__tunnel__exec",
          "proximity": 0.0,
          "notilt": 1.0
        }
      },
      "parentwaa": "mine4"
    },
    "mine5_level1": {
      "name": "Soupstock Lode (Level 1)",
      "width": "2.200",
      "ground": null,
      "sky": "",
      "startxy": "1080,100",
      "horizon": "wallmine_tile1",
      "leftwall": "wallmine_side1",
      "rightwall": "wallmine_side1",
      "foregroundparallax": "foreground_minesupport,foreground_mineceiling1,foreground_mineceiling2",
      "foregroundbrightness": ".5",
      "dark": 1.0,
      "groundtexture": "floor_dirt1",
      "music": "music_cavemine",
      "ambientsound1": "cave_ambience_loop",
      "basewaa": "mine5",
      "elements": {
        "beaniron": {
          "asset": "none",
          "usedasset": null,
          "x": 0.0,
          "z": 0.0,
          "height": 50.0,
          "width": 50.0,
          "condition": "hasskill(cookery)",
          "script": "mine5_beaniron2",
          "proximity": 0.0,
          "emitter": "twinkles"
        },
        "crate": {
          "asset": "lockers_3_dirty",
          "usedasset": "lockers_3_dirty",
          "x": 406.0,
          "z": 232.0,
          "height": 452.0,
          "width": 262.0,
          "condition": "",
          "script": "mine5_lockers",
          "proximity": 0.0,
          "extendback": 1.0
        },
        "deeper": {
          "asset": "minedoor",
          "usedasset": null,
          "x": 1814.0,
          "z": 244.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "autoscript__mine5_level1__deeper__exec",
          "proximity": 0.0,
          "extendback": 1.0,
          "noshadow": 1.0
        },
        "exit": {
          "asset": "minedoor",
          "usedasset": null,
          "x": 131.0,
          "z": 239.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "autoscript__mine5_level1__exit__exec",
          "proximity": 0.0,
          "extendback": 1.0,
          "noshadow": 1.0
        },
        "souppool1": {
          "asset": "meatvein2",
          "usedasset": null,
          "x": 1028.0,
          "z": 122.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "!hasflag(mine5_souppool1)",
          "script": "mine5_souppool",
          "proximity": 0.0,
          "floordecal": 1.0,
          "emitter": "smoke_a,25,50",
          "emitter1": "smoke_a,75,80"
        },
        "souppool1nosteppy": {
          "asset": "none",
          "usedasset": null,
          "x": 1031.0,
          "z": 146.0,
          "height": 10.0,
          "width": 100.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "souppool1_used": {
          "asset": "meatvein2",
          "usedasset": null,
          "x": 1028.0,
          "z": 122.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "hasflag(mine5_souppool1)",
          "script": "",
          "proximity": 0.0,
          "floordecal": 1.0
        },
        "souppool2": {
          "asset": "meatvein2",
          "usedasset": null,
          "x": 1544.0,
          "z": 188.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "!hasflag(mine5_souppool2)",
          "script": "mine5_souppool",
          "proximity": 0.0,
          "floordecal": 1.0,
          "emitter": "smoke_a,25,50",
          "emitter1": "smoke_a,75,80"
        },
        "souppool2_used": {
          "asset": "meatvein2",
          "usedasset": null,
          "x": 1544.0,
          "z": 188.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "hasflag(mine5_souppool2)",
          "script": "",
          "proximity": 0.0,
          "floordecal": 1.0
        },
        "workbench": {
          "asset": "workbench",
          "usedasset": "workbench",
          "x": 592.0,
          "z": 235.0,
          "height": 250.0,
          "width": 310.0,
          "condition": "",
          "script": "mine5_workbench",
          "proximity": 0.0,
          "extendback": 1.0
        }
      },
      "parentwaa": "mine5"
    },
    "mine6_level2": {
      "name": "Madness Maw Mine (Level 2)",
      "width": "1.000",
      "ground": null,
      "sky": "",
      "startxy": "210,115",
      "horizon": "wallmine_tile1",
      "leftwall": "wallmine_side1",
      "rightwall": "wallmine_side1",
      "foregroundparallax": "foreground_minesupport,foreground_mineceiling1,foreground_mineceiling2",
      "foregroundbrightness": ".5",
      "dark": 1.0,
      "groundtexture": "floor_dirt1",
      "music": "music_cavemine",
      "ambientsound1": "cave_ambience_loop",
      "basewaa": "mine6",
      "elements": {
        "beaniron": {
          "asset": "none",
          "usedasset": null,
          "x": 642.0,
          "z": 311.0,
          "height": 50.0,
          "width": 50.0,
          "condition": "hasskill(cookery)",
          "script": "mine6_beaniron2_level2",
          "proximity": 0.0,
          "emitter": "twinkles",
          "notilt": 1.0
        },
        "cultist3": {
          "asset": "person",
          "usedasset": null,
          "x": 392.0,
          "z": 243.0,
          "height": 291.0,
          "width": 116.0,
          "condition": "!hasflag(mine6_cultist3gone)",
          "script": "mine6_cultist",
          "proximity": 0.0,
          "prefab": "human_template",
          "head": "head_cultist3",
          "idle": "tied_standing",
          "flip": 1.0
        },
        "cultist4": {
          "asset": "person",
          "usedasset": null,
          "x": 519.0,
          "z": 112.0,
          "height": 291.0,
          "width": 116.0,
          "condition": "!hasflag(mine6_cultist4gone)",
          "script": "mine6_cultist",
          "proximity": 0.0,
          "prefab": "human_template",
          "head": "head_cultist4",
          "idle": "dazed"
        },
        "cultist5": {
          "asset": "person",
          "usedasset": null,
          "x": 911.0,
          "z": 32.0,
          "height": 291.0,
          "width": 116.0,
          "condition": "!hasflag(mine6_cultist5gone)",
          "script": "mine6_cultist",
          "proximity": 0.0,
          "prefab": "human_template",
          "head": "head_cultist5",
          "idle": "boring"
        },
        "down": {
          "asset": "minedoor",
          "usedasset": null,
          "x": 745.0,
          "z": 257.0,
          "height": 486.0,
          "width": 546.0,
          "condition": "",
          "script": "autoscript__mine6_level2__down__exec",
          "proximity": 0.0,
          "extendback": 1.0,
          "noshadow": 1.0,
          "notilt": 1.0
        },
        "rocks": {
          "asset": "rocks3",
          "usedasset": null,
          "x": 76.0,
          "z": 253.0,
          "height": 105.0,
          "width": 214.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "noshadow": 1.0
        },
        "rocks2": {
          "asset": "rocks2",
          "usedasset": null,
          "x": 258.0,
          "z": 255.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "noshadow": 1.0
        },
        "rocks3": {
          "asset": "rocks2",
          "usedasset": null,
          "x": 736.0,
          "z": 255.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "noshadow": 1.0
        },
        "rocks4": {
          "asset": "rocks1",
          "usedasset": null,
          "x": 903.0,
          "z": 255.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "noshadow": 1.0
        },
        "spiral1": {
          "asset": "spiral1",
          "usedasset": null,
          "x": 330.0,
          "z": 305.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "autoscript__mine6_level2__spiral1__popup",
          "proximity": 0.0,
          "notilt": 1.0
        },
        "spiral2": {
          "asset": "spiral2",
          "usedasset": null,
          "x": 421.0,
          "z": 62.0,
          "height": 122.0,
          "width": 148.0,
          "condition": "",
          "script": "autoscript__mine6_level2__spiral2__popup",
          "proximity": 0.0,
          "floordecal": 1.0
        },
        "spiral3": {
          "asset": "spiral3",
          "usedasset": null,
          "x": 963.0,
          "z": 64.0,
          "height": 146.0,
          "width": 151.0,
          "condition": "",
          "script": "autoscript__mine6_level2__spiral3__popup",
          "proximity": 0.0,
          "floordecal": 1.0
        },
        "up": {
          "asset": "minedoor",
          "usedasset": null,
          "x": 110.0,
          "z": 258.0,
          "height": 486.0,
          "width": 546.0,
          "condition": "",
          "script": "autoscript__mine6_level2__up__exec",
          "proximity": 0.0,
          "extendback": 1.0,
          "noshadow": 1.0,
          "notilt": 1.0
        }
      },
      "parentwaa": "mine6"
    },
    "mine6_level4": {
      "name": "Madness Maw Mine (Level 4)",
      "width": "1.000",
      "ground": null,
      "sky": "",
      "startxy": "500,150",
      "horizon": "wallmine_tile1",
      "leftwall": "wallmine_side1",
      "rightwall": "wallmine_side1",
      "foregroundparallax": "foreground_minesupport,foreground_mineceiling1,foreground_mineceiling2",
      "foregroundbrightness": ".5",
      "dark": 1.0,
      "groundtexture": "floor_dirt1",
      "music": "music_cavemine",
      "ambientsound1": "cave_ambience_loop",
      "polish": "Something else going on in this room?",
      "basewaa": "mine6",
      "elements": {
        "beaniron": {
          "asset": "none",
          "usedasset": null,
          "x": 183.0,
          "z": 317.0,
          "height": 50.0,
          "width": 50.0,
          "condition": "hasskill(cookery)",
          "script": "mine6_beaniron2_level4",
          "proximity": 0.0,
          "emitter": "twinkles",
          "notilt": 1.0
        },
        "blocker": {
          "asset": "none",
          "usedasset": null,
          "x": 790.0,
          "z": 85.0,
          "height": 110.0,
          "width": 160.0,
          "condition": "!hasflag(mine6_elvrocks)",
          "script": "mine6_elvpile",
          "proximity": 0.0
        },
        "elvladder": {
          "asset": "ladderhole",
          "usedasset": null,
          "x": 820.0,
          "z": 110.0,
          "height": 182.0,
          "width": 394.0,
          "condition": "hasflag(mine6_elvrocks)",
          "script": "autoscript__mine6_level4__elvladder__exec",
          "proximity": 0.0
        },
        "elvpile": {
          "asset": "rubblepile",
          "usedasset": null,
          "x": 769.0,
          "z": 87.0,
          "height": 420.0,
          "width": 560.0,
          "condition": "!hasflag(mine6_elvrocks)",
          "script": "",
          "proximity": 0.0
        },
        "rock2": {
          "asset": "rocks1",
          "usedasset": null,
          "x": 468.0,
          "z": 254.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "noshadow": 1.0
        },
        "rocks1": {
          "asset": "rocks2",
          "usedasset": null,
          "x": 301.0,
          "z": 253.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "noshadow": 1.0
        },
        "up": {
          "asset": "minedoor",
          "usedasset": null,
          "x": 312.0,
          "z": 256.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "autoscript__mine6_level4__up__exec",
          "proximity": 0.0,
          "extendback": 1.0,
          "noshadow": 1.0,
          "notilt": 1.0
        }
      },
      "parentwaa": "mine6"
    },
    "mine7_interior": {
      "name": "Abandoned Mine (Inside)",
      "width": "2.550",
      "ground": null,
      "sky": "",
      "startxy": "330,175",
      "horizon": "wallmine_tile1",
      "leftwall": "wallmine_side1",
      "rightwall": "wallmine_side1",
      "foregroundparallax": "foreground_minesupport,foreground_mineceiling1,foreground_mineceiling2",
      "foregroundbrightness": ".5",
      "dark": 1.0,
      "groundtexture": "floor_dirt1",
      "music": "music_cavemine",
      "ambientsound1": "cave_ambience_loop",
      "basewaa": "mine7",
      "elements": {
        "beaniron1": {
          "asset": "none",
          "usedasset": null,
          "x": 1562.0,
          "z": 319.0,
          "height": 50.0,
          "width": 50.0,
          "condition": "hasskill(cookery)",
          "script": "mine7_beaniron3_insidemain",
          "proximity": 0.0,
          "emitter": "twinkles",
          "notilt": 1.0
        },
        "commentvolume": {
          "asset": "none",
          "usedasset": null,
          "x": 2070.0,
          "z": 124.0,
          "height": 30.0,
          "width": 30.0,
          "condition": "!hasflag(elvibrato5_warehouse)",
          "script": "autoscript__mine7_interior__commentvolume__popup",
          "proximity": 0.0,
          "noclip": 1.0,
          "extendforward": 1.0,
          "extendback": 1.0
        },
        "door1": {
          "asset": "minedoor",
          "usedasset": null,
          "x": 679.0,
          "z": 255.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "autoscript__mine7_interior__door1__exec",
          "proximity": 0.0,
          "extendback": 1.0
        },
        "door2": {
          "asset": "minedoor",
          "usedasset": null,
          "x": 1179.0,
          "z": 253.0,
          "height": 486.0,
          "width": 546.0,
          "condition": "",
          "script": "autoscript__mine7_interior__door2__exec",
          "proximity": 0.0,
          "extendback": 1.0,
          "noshadow": 1.0
        },
        "elevator": {
          "asset": "elevatorshaft",
          "usedasset": null,
          "x": 53.0,
          "z": 233.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "prefab": "elevator_shaft_template_hollow",
          "extendback": 1.0,
          "noshadow": 1.0,
          "notilt": 1.0
        },
        "elevator_collider": {
          "asset": "none",
          "usedasset": null,
          "x": 90.0,
          "z": 232.0,
          "height": 10.0,
          "width": 180.0,
          "condition": "",
          "script": "mine7_elevator_up",
          "proximity": 0.0,
          "shootableheight": 200.0,
          "door": 1.0
        },
        "elevator_shroud": {
          "asset": "elevatorshaft_shroud",
          "usedasset": null,
          "x": 53.0,
          "z": 243.0,
          "height": 862.0,
          "width": 749.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "noshadow": 1.0
        },
        "firstaid": {
          "asset": "medicinecabinet",
          "usedasset": "medicinecabinet_open",
          "x": 519.0,
          "z": 319.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "mine7_medicinecabinet",
          "proximity": 0.0,
          "notilt": 1.0
        },
        "minecart1": {
          "asset": "minecart_full",
          "usedasset": "minecart_empty",
          "x": 1670.0,
          "z": 213.0,
          "height": 234.0,
          "width": 221.0,
          "condition": "",
          "script": "mine7_minecart1",
          "proximity": 0.0
        },
        "rock": {
          "asset": "rocks1",
          "usedasset": null,
          "x": 2329.0,
          "z": 96.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock1": {
          "asset": "rocks9",
          "usedasset": null,
          "x": 2249.0,
          "z": 164.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock10": {
          "asset": "rocks9",
          "usedasset": null,
          "x": 2194.0,
          "z": 57.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock12": {
          "asset": "rocks9",
          "usedasset": null,
          "x": 2446.0,
          "z": 125.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock14": {
          "asset": "rocks6",
          "usedasset": null,
          "x": 2116.0,
          "z": 124.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock15": {
          "asset": "rocks6",
          "usedasset": null,
          "x": 2153.0,
          "z": 34.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock16": {
          "asset": "rocks6",
          "usedasset": null,
          "x": 2330.0,
          "z": 188.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock17": {
          "asset": "rocks6",
          "usedasset": null,
          "x": 2210.0,
          "z": 190.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock18": {
          "asset": "rocks6",
          "usedasset": null,
          "x": 2397.0,
          "z": 162.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock19": {
          "asset": "rocks5",
          "usedasset": null,
          "x": 2397.0,
          "z": 89.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock2": {
          "asset": "rocks2",
          "usedasset": null,
          "x": 2325.0,
          "z": 62.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock20": {
          "asset": "rocks5",
          "usedasset": null,
          "x": 2494.0,
          "z": 207.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock21": {
          "asset": "rocks5",
          "usedasset": null,
          "x": 0.0,
          "z": 0.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock22": {
          "asset": "rocks5",
          "usedasset": null,
          "x": 2170.0,
          "z": 214.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock23": {
          "asset": "rocks5",
          "usedasset": null,
          "x": 2446.0,
          "z": 63.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock25": {
          "asset": "rocks2",
          "usedasset": null,
          "x": 2496.0,
          "z": 40.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock26": {
          "asset": "rocks2",
          "usedasset": null,
          "x": 2325.0,
          "z": 223.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock27": {
          "asset": "rocks6",
          "usedasset": null,
          "x": 2557.0,
          "z": 124.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock3": {
          "asset": "rocks7",
          "usedasset": null,
          "x": 2327.0,
          "z": 24.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock4": {
          "asset": "rocks7",
          "usedasset": null,
          "x": 2209.0,
          "z": 126.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock5": {
          "asset": "rocks7",
          "usedasset": null,
          "x": 2504.0,
          "z": 125.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock6": {
          "asset": "rocks8",
          "usedasset": null,
          "x": 2161.0,
          "z": 125.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock7": {
          "asset": "rocks8",
          "usedasset": null,
          "x": 2329.0,
          "z": 153.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock8": {
          "asset": "rocks8",
          "usedasset": null,
          "x": 2448.0,
          "z": 183.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock9": {
          "asset": "rocks8",
          "usedasset": null,
          "x": 2253.0,
          "z": 85.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "stopper1": {
          "asset": "minestopper",
          "usedasset": null,
          "x": 1767.0,
          "z": 118.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "stopper2": {
          "asset": "minestopper",
          "usedasset": null,
          "x": 1768.0,
          "z": 101.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "stopper3": {
          "asset": "minestopper",
          "usedasset": null,
          "x": 1766.0,
          "z": 75.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "flip": 1.0
        },
        "switch1": {
          "asset": "tracklever_left",
          "usedasset": null,
          "x": 615.0,
          "z": 149.0,
          "height": 188.0,
          "width": 263.0,
          "condition": "",
          "script": "autoscript__mine7_interior__switch1__popup",
          "proximity": 0.0,
          "polish": "Vary up the popup messages on these switches and the ones in mine7_room1."
        },
        "switch2": {
          "asset": "tracklever_left",
          "usedasset": null,
          "x": 1117.0,
          "z": 145.0,
          "height": 188.0,
          "width": 263.0,
          "condition": "",
          "script": "autoscript__mine7_interior__switch2__popup",
          "proximity": 0.0
        },
        "teleportcollider": {
          "asset": "none",
          "usedasset": null,
          "x": 2280.0,
          "z": 122.0,
          "height": 10.0,
          "width": 130.0,
          "condition": "hasflag(mine7_elvopen)",
          "script": "mine7_teleportdown",
          "proximity": 0.0,
          "shootableheight": 150.0
        },
        "teleporter": {
          "asset": "elv_teleporter2",
          "usedasset": null,
          "x": 2262.0,
          "z": 124.0,
          "height": 466.0,
          "width": 501.0,
          "condition": "hasflag(mine7_elvopen)",
          "script": "",
          "proximity": 0.0,
          "elvibrato": 1.0,
          "noshadow": 1.0
        },
        "teleporterpile": {
          "asset": "rockstack",
          "usedasset": null,
          "x": 2254.0,
          "z": 121.0,
          "height": 549.0,
          "width": 559.0,
          "condition": "!hasflag(mine7_elvopen)",
          "script": "mine7_teleporterpile",
          "proximity": 0.0
        },
        "tracks1": {
          "asset": "tracks1",
          "usedasset": null,
          "x": 257.0,
          "z": 75.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "floordecal": 1.0
        },
        "tracks2": {
          "asset": "tracks_short",
          "usedasset": null,
          "x": 847.0,
          "z": 74.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "floordecal": 1.0
        },
        "tracks3": {
          "asset": "tracks_short",
          "usedasset": null,
          "x": 1007.0,
          "z": 75.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "floordecal": 1.0
        },
        "tracks4": {
          "asset": "tracks1",
          "usedasset": null,
          "x": 1344.0,
          "z": 76.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "floordecal": 1.0
        },
        "tracksbend": {
          "asset": "tracksbend",
          "usedasset": null,
          "x": 140.0,
          "z": 75.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "flip": 1.0,
          "floordecal": 1.0
        },
        "trackst": {
          "asset": "tracksjunction",
          "usedasset": null,
          "x": 672.0,
          "z": 74.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "floordecal": 1.0
        },
        "trackst2": {
          "asset": "tracksjunction",
          "usedasset": null,
          "x": 1169.0,
          "z": 75.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "floordecal": 1.0
        }
      },
      "parentwaa": "mine7"
    },
    "mine7_room1": {
      "name": "Abandoned Mine (Side Tunnel 1)",
      "width": "2.500",
      "ground": null,
      "sky": "",
      "startxy": "300,40",
      "horizon": "wallmine_tile1",
      "leftwall": "wallmine_side1",
      "rightwall": "wallmine_side1",
      "foregroundparallax": "foreground_mineframe",
      "foregroundbrightness": ".5",
      "dark": 1.0,
      "groundtexture": "floor_dirt1",
      "music": "music_cavemine",
      "basewaa": "mine7",
      "elements": {
        "beaniron": {
          "asset": "none",
          "usedasset": null,
          "x": 2443.0,
          "z": 303.0,
          "height": 50.0,
          "width": 50.0,
          "condition": "hasskill(cookery)",
          "script": "mine7_beaniron3_sidetunnel1",
          "proximity": 0.0,
          "emitter": "twinkles",
          "notilt": 1.0
        },
        "cart2": {
          "asset": "minecart_full",
          "usedasset": "minecart_empty",
          "x": 2219.0,
          "z": 203.0,
          "height": 234.0,
          "width": 221.0,
          "condition": "",
          "script": "mine7_cart2",
          "proximity": 0.0
        },
        "cart3": {
          "asset": "minecart_full",
          "usedasset": "minecart_empty",
          "x": 2442.0,
          "z": 142.0,
          "height": 234.0,
          "width": 221.0,
          "condition": "",
          "script": "mine7_cart3",
          "proximity": 0.0
        },
        "cart4": {
          "asset": "minecart_full",
          "usedasset": "minecart_empty",
          "x": 2304.0,
          "z": 13.0,
          "height": 234.0,
          "width": 221.0,
          "condition": "",
          "script": "mine7_cart4",
          "proximity": 0.0
        },
        "coldoor": {
          "asset": "minedoor_collapsed",
          "usedasset": null,
          "x": 1131.0,
          "z": 250.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "noshadow": 1.0,
          "extendback": 1.0
        },
        "elvchest": {
          "asset": "elv_chest_locked",
          "usedasset": "elv_chest_open",
          "x": 33.0,
          "z": 47.0,
          "height": 135.0,
          "width": 278.0,
          "condition": "hasflag(mine7_cache)",
          "script": "elv_chest",
          "proximity": 0.0,
          "elvibrato": 1.0,
          "": "maybe usedscript"
        },
        "elvchestnotice": {
          "asset": "none",
          "usedasset": null,
          "x": 173.0,
          "z": 68.0,
          "height": 30.0,
          "width": 30.0,
          "condition": "!hasflag(mine7_cache)",
          "script": "mine7_elvcache",
          "proximity": 0.0,
          "extendforward": 1.0,
          "extendback": 1.0,
          "noclip": 1.0
        },
        "exit": {
          "asset": "minedoor",
          "usedasset": null,
          "x": 229.0,
          "z": 253.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "autoscript__mine7_room1__exit__exec",
          "proximity": 0.0,
          "extendback": 1.0,
          "noshadow": 1.0
        },
        "rock1": {
          "asset": "rocks1",
          "usedasset": null,
          "x": 32.0,
          "z": 57.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock2": {
          "asset": "rocks5",
          "usedasset": null,
          "x": 31.0,
          "z": 32.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock3": {
          "asset": "rocks5",
          "usedasset": null,
          "x": 97.0,
          "z": 61.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock4": {
          "asset": "rocks6",
          "usedasset": null,
          "x": 97.0,
          "z": 31.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rocks1": {
          "asset": "rocks6",
          "usedasset": null,
          "x": 225.0,
          "z": 252.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "noshadow": 1.0
        },
        "rocks2": {
          "asset": "rocks8",
          "usedasset": null,
          "x": 379.0,
          "z": 252.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "noshadow": 1.0
        },
        "rocks3": {
          "asset": "rocks4",
          "usedasset": null,
          "x": 1121.0,
          "z": 245.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "noshadow": 1.0,
          "extendback": 1.0
        },
        "rocks4": {
          "asset": "rocks3",
          "usedasset": null,
          "x": 1267.0,
          "z": 243.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "noshadow": 1.0,
          "extendback": 1.0
        },
        "snake": {
          "asset": "person",
          "usedasset": null,
          "x": 1837.0,
          "z": 188.0,
          "height": 291.0,
          "width": 116.0,
          "condition": "!hasflag(mine7_snake)",
          "script": "mine7_snake",
          "proximity": 0.0,
          "prefab": "snake_coal",
          "extendforward": 1.0,
          "extendback": 1.0,
          "ambientsound": "snake_group_loop, 180"
        },
        "snake2": {
          "asset": "person",
          "usedasset": null,
          "x": 1910.0,
          "z": 38.0,
          "height": 291.0,
          "width": 116.0,
          "condition": "!hasflag(mine7_snake)",
          "script": "mine7_snake",
          "proximity": 0.0,
          "prefab": "snake_coal",
          "extendforward": 1.0,
          "extendback": 1.0
        },
        "snake3": {
          "asset": "person",
          "usedasset": null,
          "x": 1962.0,
          "z": 188.0,
          "height": 291.0,
          "width": 116.0,
          "condition": "!hasflag(mine7_snake)",
          "script": "mine7_snake",
          "proximity": 0.0,
          "prefab": "snake_coal",
          "extendforward": 1.0,
          "extendback": 1.0
        },
        "stopper1": {
          "asset": "minestopper",
          "usedasset": null,
          "x": 5.0,
          "z": 168.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "stopper2": {
          "asset": "minestopper",
          "usedasset": null,
          "x": 7.0,
          "z": 151.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "flip": 1.0
        },
        "stopper3": {
          "asset": "minestopper",
          "usedasset": null,
          "x": 6.0,
          "z": 130.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "flip": 1.0
        },
        "stopper4": {
          "asset": "minestopper",
          "usedasset": null,
          "x": 2302.0,
          "z": 173.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "stopper5": {
          "asset": "minestopper",
          "usedasset": null,
          "x": 2301.0,
          "z": 151.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "stopper6": {
          "asset": "minestopper",
          "usedasset": null,
          "x": 2300.0,
          "z": 121.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "flip": 1.0
        },
        "switch": {
          "asset": "tracklever_up",
          "usedasset": null,
          "x": 389.0,
          "z": 188.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "autoscript__mine7_room1__switch__popup",
          "proximity": 0.0,
          "flip": 1.0
        },
        "switch2": {
          "asset": "tracklever_up",
          "usedasset": null,
          "x": 1322.0,
          "z": 188.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "autoscript__mine7_room1__switch2__popup",
          "proximity": 0.0,
          "flip": 1.0
        },
        "tracks1": {
          "asset": "tracks_short",
          "usedasset": null,
          "x": 67.0,
          "z": 126.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "floordecal": 1.0
        },
        "tracks2": {
          "asset": "tracks1",
          "usedasset": null,
          "x": 397.0,
          "z": 126.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "floordecal": 1.0
        },
        "tracks3": {
          "asset": "tracks_short",
          "usedasset": null,
          "x": 809.0,
          "z": 126.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "floordecal": 1.0
        },
        "tracks4": {
          "asset": "tracks_short",
          "usedasset": null,
          "x": 970.0,
          "z": 127.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "floordecal": 1.0
        },
        "tracks5": {
          "asset": "tracks1",
          "usedasset": null,
          "x": 1304.0,
          "z": 127.0,
          "height": 168.0,
          "width": 1256.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "floordecal": 1.0
        },
        "tracks6": {
          "asset": "tracks1",
          "usedasset": null,
          "x": 1722.0,
          "z": 127.0,
          "height": 168.0,
          "width": 1256.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "floordecal": 1.0
        },
        "tracks7": {
          "asset": "tracks_short",
          "usedasset": null,
          "x": 2136.0,
          "z": 127.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "floordecal": 1.0
        },
        "trackst": {
          "asset": "tracksjunction",
          "usedasset": null,
          "x": 225.0,
          "z": 126.0,
          "height": 398.0,
          "width": 539.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "floordecal": 1.0
        },
        "trackst2": {
          "asset": "tracksjunction",
          "usedasset": null,
          "x": 1130.0,
          "z": 127.0,
          "height": 398.0,
          "width": 539.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "floordecal": 1.0
        }
      },
      "parentwaa": "mine7"
    },
    "mine7_room2": {
      "name": "Abandoned Mine (Side Tunnel 2)",
      "width": "1.500",
      "ground": null,
      "sky": "",
      "startxy": "1290,95",
      "horizon": "wallmine_tile1",
      "leftwall": "wallmine_side1",
      "rightwall": "wallmine_side1",
      "foregroundparallax": "foreground_mineframe",
      "foregroundbrightness": ".5",
      "dark": 1.0,
      "groundtexture": "floor_dirt1",
      "music": "music_cavemine",
      "ambientsound1": "cave_ambience_loop",
      "basewaa": "mine7",
      "elements": {
        "beanholder": {
          "asset": "none",
          "usedasset": null,
          "x": 710.0,
          "z": 319.0,
          "height": 50.0,
          "width": 50.0,
          "condition": "hasskill(cookery)",
          "script": "mine7_beaniron3_sidetunnel2",
          "proximity": 0.0,
          "emitter": "twinkles",
          "notilt": 1.0
        },
        "digger_bit": {
          "asset": "drillmachine_bit",
          "usedasset": null,
          "x": 308.0,
          "z": 12.0,
          "height": 310.0,
          "width": 424.0,
          "condition": "geologistquest<=7",
          "script": "mine7_drillmachine",
          "proximity": 0.0
        },
        "digger_nobit": {
          "asset": "drillmachine_nobit",
          "usedasset": null,
          "x": 308.0,
          "z": 12.0,
          "height": 310.0,
          "width": 306.0,
          "condition": "geologistquest>7",
          "script": "",
          "proximity": 0.0
        },
        "emptycart": {
          "asset": "minecart_empty2",
          "usedasset": null,
          "x": 1398.0,
          "z": 36.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "exit": {
          "asset": "minedoor",
          "usedasset": null,
          "x": 1161.0,
          "z": 251.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "autoscript__mine7_room2__exit__exec",
          "proximity": 0.0,
          "extendback": 1.0,
          "noshadow": 1.0,
          "notilt": 1.0
        },
        "ladderdown": {
          "asset": "ladderhole",
          "usedasset": null,
          "x": 224.0,
          "z": 191.0,
          "height": 182.0,
          "width": 394.0,
          "condition": "",
          "script": "autoscript__mine7_room2__ladderdown__exec",
          "proximity": 0.0
        },
        "rocks1": {
          "asset": "rocks9",
          "usedasset": null,
          "x": 1148.0,
          "z": 246.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "noshadow": 1.0
        },
        "rocks2": {
          "asset": "rocks7",
          "usedasset": null,
          "x": 1320.0,
          "z": 246.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "noshadow": 1.0
        },
        "rubble1": {
          "asset": "rocks3",
          "usedasset": null,
          "x": 350.0,
          "z": 164.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rubble2": {
          "asset": "rocks4",
          "usedasset": null,
          "x": 177.0,
          "z": 217.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rubble3": {
          "asset": "rocks2",
          "usedasset": null,
          "x": 181.0,
          "z": 164.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rubble4": {
          "asset": "rocks8",
          "usedasset": null,
          "x": 352.0,
          "z": 218.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "spiral1": {
          "asset": "spiral1",
          "usedasset": null,
          "x": 199.0,
          "z": 298.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "autoscript__mine7_room2__spiral1__popup",
          "proximity": 0.0,
          "notilt": 1.0
        },
        "spiral2": {
          "asset": "spiral3",
          "usedasset": null,
          "x": 325.0,
          "z": 274.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "autoscript__mine7_room2__spiral2__popup",
          "proximity": 0.0,
          "notilt": 1.0
        },
        "spiral3": {
          "asset": "spiral2",
          "usedasset": null,
          "x": 266.0,
          "z": 125.0,
          "height": 122.0,
          "width": 148.0,
          "condition": "",
          "script": "autoscript__mine7_room2__spiral3__popup",
          "proximity": 0.0,
          "floordecal": 1.0
        },
        "stash": {
          "asset": "lootpile5",
          "usedasset": "lootpile5_empty",
          "x": 53.0,
          "z": 68.0,
          "height": 298.0,
          "width": 355.0,
          "condition": "",
          "script": "mine7_stash",
          "proximity": 0.0
        },
        "stopper1": {
          "asset": "minestopper",
          "usedasset": null,
          "x": 525.0,
          "z": 165.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "stopper2": {
          "asset": "minestopper",
          "usedasset": null,
          "x": 523.0,
          "z": 147.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "stopper3": {
          "asset": "minestopper",
          "usedasset": null,
          "x": 525.0,
          "z": 127.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "flip": 1.0
        },
        "tracks1": {
          "asset": "tracks1",
          "usedasset": null,
          "x": 745.0,
          "z": 129.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "floordecal": 1.0
        },
        "tracks2": {
          "asset": "tracks_short",
          "usedasset": null,
          "x": 585.0,
          "z": 128.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "floordecal": 1.0
        },
        "tracksbend": {
          "asset": "tracksbend",
          "usedasset": null,
          "x": 1162.0,
          "z": 129.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "floordecal": 1.0
        },
        "vein1": {
          "asset": "meatvein1",
          "usedasset": null,
          "x": 581.0,
          "z": 325.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "meatvein",
          "proximity": 0.0,
          "notilt": 1.0
        },
        "vein2": {
          "asset": "meatvein2",
          "usedasset": null,
          "x": 824.0,
          "z": 302.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "meatvein",
          "proximity": 0.0,
          "notilt": 1.0
        },
        "vein3": {
          "asset": "meatvein2",
          "usedasset": null,
          "x": 622.0,
          "z": 23.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "meatvein",
          "proximity": 0.0,
          "floordecal": 1.0,
          "flip": 1.0
        }
      },
      "parentwaa": "mine7"
    },
    "mine8_level1": {
      "name": "Deepest Delve Mine (Level 1)",
      "width": "3.000",
      "ground": null,
      "sky": "",
      "startxy": "850,200",
      "horizon": "wallmine_tile1",
      "leftwall": "wallmine_side1",
      "rightwall": "wallmine_side2",
      "foregroundparallax": "foreground_minesupport,foreground_mineceiling1,foreground_mineceiling2,foreground_mineceiling1",
      "foregroundbrightness": ".5",
      "dark": 1.0,
      "groundtexture": "floor_dirt1",
      "music": "music_cavemine",
      "ambientsound1": "cave_ambience_loop",
      "basewaa": "mine8",
      "elements": {
        "beaniron": {
          "asset": "none",
          "usedasset": null,
          "x": 2070.0,
          "z": 327.0,
          "height": 50.0,
          "width": 50.0,
          "condition": "hasskill(cookery)",
          "script": "mine8_beaniron3",
          "proximity": 0.0,
          "emitter": "twinkles",
          "notilt": 1.0
        },
        "blocker": {
          "asset": "bigrubblepile2",
          "usedasset": null,
          "x": 1481.0,
          "z": 227.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "autoscript__mine8_level1__blocker__popup",
          "proximity": 0.0,
          "extendforward": 1.0,
          "extendback": 1.0
        },
        "coalshaft": {
          "asset": "coalshaft2",
          "usedasset": null,
          "x": 185.0,
          "z": 219.0,
          "height": 864.0,
          "width": 547.0,
          "condition": "",
          "script": "autoscript__mine8_level1__coalshaft__popup",
          "proximity": 0.0,
          "extendback": 1.0
        },
        "elevator": {
          "asset": "elevator",
          "usedasset": null,
          "x": 1074.0,
          "z": 243.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "prefab": "elevator_template_hollow",
          "extendback": 1.0,
          "noshadow": 1.0
        },
        "elevatorengine": {
          "asset": "mineengine",
          "usedasset": null,
          "x": 1305.0,
          "z": 244.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendback": 1.0,
          "noshadow": 1.0
        },
        "elevator_collider": {
          "asset": "none",
          "usedasset": null,
          "x": 1110.0,
          "z": 242.0,
          "height": 10.0,
          "width": 180.0,
          "condition": "",
          "script": "mine8_elevatordown",
          "proximity": 0.0,
          "shootableheight": 155.0,
          "door": 1.0
        },
        "elevator_shroud": {
          "asset": "elevator_hollow_shroud",
          "usedasset": null,
          "x": 1074.0,
          "z": 253.0,
          "height": 675.0,
          "width": 751.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "noshadow": 1.0
        },
        "exit": {
          "asset": "minedoor_rope2",
          "usedasset": null,
          "x": 642.0,
          "z": 244.0,
          "height": 486.0,
          "width": 546.0,
          "condition": "",
          "script": "autoscript__mine8_level1__exit__exec",
          "proximity": 0.0,
          "extendback": 1.0,
          "noshadow": 1.0
        },
        "exit2": {
          "asset": "exitladder",
          "usedasset": null,
          "x": 2724.0,
          "z": 205.0,
          "height": 909.0,
          "width": 619.0,
          "condition": "",
          "script": "autoscript__mine8_level1__exit2__exec",
          "proximity": 0.0,
          "flip": 1.0
        },
        "partcrate": {
          "asset": "toolbox",
          "usedasset": "toolbox",
          "x": 2430.0,
          "z": 205.0,
          "height": 110.0,
          "width": 137.0,
          "condition": "",
          "script": "mine8_partcrate",
          "proximity": 0.0
        },
        "rocks1": {
          "asset": "rocks2",
          "usedasset": null,
          "x": 634.0,
          "z": 239.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "noshadow": 1.0
        },
        "rocks2": {
          "asset": "rocks6",
          "usedasset": null,
          "x": 798.0,
          "z": 243.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "noshadow": 1.0
        },
        "rubble2": {
          "asset": "trashpile3",
          "usedasset": null,
          "x": 1515.0,
          "z": 123.0,
          "height": 142.0,
          "width": 242.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rubble3": {
          "asset": "trashpile1",
          "usedasset": null,
          "x": 1732.0,
          "z": 25.0,
          "height": 142.0,
          "width": 242.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "flip": 1.0
        },
        "rubble4": {
          "asset": "bigrubblepile5",
          "usedasset": null,
          "x": 1529.0,
          "z": 88.0,
          "height": 142.0,
          "width": 242.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "flip": 1.0
        },
        "rubble5": {
          "asset": "bigrubblepile4",
          "usedasset": null,
          "x": 1547.0,
          "z": 162.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rubble6": {
          "asset": "bigrubblepile3",
          "usedasset": null,
          "x": 1531.0,
          "z": 180.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rubble7": {
          "asset": "rubblepile",
          "usedasset": null,
          "x": 1567.0,
          "z": 0.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rubble8": {
          "asset": "bigrubblepile3",
          "usedasset": null,
          "x": 1589.0,
          "z": 103.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        }
      },
      "parentwaa": "mine8"
    },
    "ranch6": {
      "name": "Hellstrom Ranch",
      "width": "1.500",
      "ground": null,
      "sky": "lazyclouds",
      "startxy": "330,45",
      "parallax1": "bg_pines4,bg_pines3,bg_pines2,bg_pines1",
      "parallax2": "bg_mountain4,bg_flat1,bg_monument,bg_flat1,bg_mountain1,bg_mountain3,bg_mountain2,bg_flat1,bg_flat1,bg_flat1,bg_flat1,bg_mountain4,bg_flat1,bg_flat1,bg_flat1",
      "horizon": "horizonline1",
      "groundtexture": "floor_dirt1",
      "cluttercount": 30.0,
      "cluttersprites": "grass1,grass2,grass3,grass4,grass5,grass6,grass7",
      "clutterseed": 2001.0,
      "music": "music_sadguitar_new",
      "ambientsound1": "desert_ambience_loop",
      "ambientvolume1": ".23",
      "onenter": "ranch6_visitation",
      "polish": "A few more small hellportals, some particle effects on the",
      "hellportals.": 1.0,
      "": "Leaving Bovicus trapped here has a big effect on the Cow Attack of '06",
      "basewaa": "ranch6",
      "elements": {
        "barn": {
          "asset": "barn",
          "usedasset": null,
          "x": 156.0,
          "z": 228.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "autoscript__ranch6__barn__popup",
          "proximity": 0.0,
          "extendback": 1.0,
          "decal": "scorchmark1,-120,70",
          "decal2": "scorchmark2,140,140"
        },
        "barndoor": {
          "asset": "none",
          "usedasset": null,
          "x": 298.0,
          "z": 227.0,
          "height": 10.0,
          "width": 150.0,
          "condition": "",
          "script": "autoscript__ranch6__barndoor__exec",
          "proximity": 0.0
        },
        "barn_burned": {
          "asset": "barn_burned",
          "usedasset": null,
          "x": 157.0,
          "z": 228.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "nevertrue",
          "script": "autoscript__ranch6__barn_burned__popup",
          "proximity": 0.0,
          "extendback": 1.0,
          "emitter": "smoke_a,150,340,1",
          "emitter2": "smoke_a,125,180,1",
          "emitter3": "smoke_a,220,60,1",
          "emitter4": "smoke_a,320,100,1",
          "polish": "add some smoke emitters"
        },
        "bovicus_bad": {
          "asset": "person",
          "usedasset": null,
          "x": 969.0,
          "z": 101.0,
          "height": 291.0,
          "width": 116.0,
          "condition": "hasflag(ranch6_bovicus) && !hasflag(ranch6_cowsbane)",
          "script": "",
          "proximity": 0.0,
          "prefab": "cow_upright",
          "head": "head_bovicus",
          "flip": 1.0
        },
        "bovicus_contained": {
          "asset": "person",
          "usedasset": null,
          "x": 969.0,
          "z": 107.0,
          "height": 291.0,
          "width": 116.0,
          "condition": "hasflag(ranch6_bovicus) && hasflag(ranch6_cowsbane)",
          "script": "ranch6_talktobovicus",
          "proximity": 0.0,
          "prefab": "cow_upright",
          "head": "head_bovicus",
          "flip": 1.0
        },
        "cowbell": {
          "asset": "cowbell",
          "usedasset": null,
          "x": 833.0,
          "z": 236.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "ranch6_cowbell",
          "proximity": 0.0
        },
        "cowsbanecircle": {
          "asset": "cowsbanering2",
          "usedasset": null,
          "x": 920.0,
          "z": 45.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "hasflag(ranch6_cowsbane)",
          "script": "",
          "proximity": 0.0,
          "floordecal": 1.0,
          "noclip": 1.0
        },
        "hagarsagave": {
          "asset": "hagarsagave",
          "usedasset": "hagarsagave_empty",
          "x": 1198.0,
          "z": 16.0,
          "height": 250.0,
          "width": 425.0,
          "condition": "",
          "script": "forage_hagarsagave",
          "proximity": 0.0
        },
        "haystack": {
          "asset": "haystack",
          "usedasset": "haystack_used",
          "x": -86.0,
          "z": 245.0,
          "height": 326.0,
          "width": 392.0,
          "condition": "",
          "script": "cre_haystack",
          "proximity": 0.0,
          "extendback": 1.0
        },
        "hitch": {
          "asset": "hitchingpost_broken",
          "usedasset": null,
          "x": 30.0,
          "z": 17.0,
          "height": 174.0,
          "width": 398.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "horse": {
          "asset": "horse",
          "usedasset": null,
          "x": -7.0,
          "z": 27.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "horse",
          "proximity": 0.0
        },
        "horseshoething": {
          "asset": "ruinwall_chunk_horseshoe",
          "usedasset": "ruinwall_chunk",
          "x": 1384.0,
          "z": 231.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "ranch6_horseshoe",
          "proximity": 0.0,
          "extendback": 1.0,
          "emitter": "smoke_a,45,182,1",
          "emitter2": "smoke_a,115,195,1",
          "emitter3": "smoke_a,25,75,1"
        },
        "pardner": {
          "asset": "person",
          "usedasset": null,
          "x": 674.0,
          "z": 224.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "pardner",
          "proximity": 0.0,
          "extendback": 1.0
        },
        "portal": {
          "asset": "hellportal_frame",
          "usedasset": null,
          "x": 1051.0,
          "z": 253.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "prefab": "floater_template",
          "head": "hellportal_frame",
          "ambientsound": "hellcow_portal_loop, 200",
          "ambientvolume": ".7",
          "interesting": 1.0
        },
        "portalblocker": {
          "asset": "none",
          "usedasset": null,
          "x": 983.0,
          "z": 225.0,
          "height": 100.0,
          "width": 150.0,
          "condition": "",
          "script": "ranch6_portal",
          "proximity": 0.0,
          "extendback": 1.0
        },
        "portal_shroud": {
          "asset": "hellportal_shroud",
          "usedasset": null,
          "x": 1051.0,
          "z": 255.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "prefab": "floater_template",
          "head": "hellportal_shroud"
        },
        "portal_stars": {
          "asset": "none",
          "usedasset": null,
          "x": 1051.0,
          "z": 254.0,
          "height": 1.0,
          "width": 1.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "decal": "decal_starfield,0,50"
        },
        "ruinbit1": {
          "asset": "ruin_junk3",
          "usedasset": null,
          "x": 481.0,
          "z": 59.0,
          "height": 107.0,
          "width": 130.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "emitter": "smoke_a,25,45,1"
        },
        "ruinbit2": {
          "asset": "ruin_wall3",
          "usedasset": null,
          "x": 832.0,
          "z": 29.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "emitter": "smoke_a,45,45,1"
        },
        "ruinbit3": {
          "asset": "ruin_wall4",
          "usedasset": null,
          "x": 1267.0,
          "z": 26.0,
          "height": 104.0,
          "width": 331.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "flip": 1.0,
          "emitter": "smoke_a,45,45,1"
        },
        "scorch1": {
          "asset": "scorchmark3",
          "usedasset": null,
          "x": 563.0,
          "z": 79.0,
          "height": 231.0,
          "width": 330.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "floordecal": 1.0
        },
        "scorch2": {
          "asset": "scorchmark1",
          "usedasset": null,
          "x": 868.0,
          "z": 74.0,
          "height": 203.0,
          "width": 140.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "floordecal": 1.0
        },
        "scorch3": {
          "asset": "scorchmark2",
          "usedasset": null,
          "x": 1266.0,
          "z": 109.0,
          "height": 230.0,
          "width": 138.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "floordecal": 1.0,
          "flip": 1.0
        }
      },
      "parentwaa": "ranch6"
    },
    "shaggydogcave_interior": {
      "name": "Shaggy Dog Cave (Inside)",
      "width": "9.300",
      "ground": "",
      "sky": "",
      "startxy": "205,123",
      "horizon": "wallcave_tile1",
      "foregroundparallax": "foreground_caveleft1,foreground_cavemiddle1,foreground_cavemiddle5,foreground_cavemiddle3,foreground_cavemiddle2,foreground_cavemiddle1,foreground_cavemiddle4,foreground_caveright1",
      "foregroundbrightness": ".5",
      "dark": 1.0,
      "groundtexture": "floor_dirt1",
      "cluttercount": 100.0,
      "cluttersprites": "rocks1,rocks2,rocks3,rocks4",
      "clutterseed": 1.0,
      "cluttersolid": 1.0,
      "cluttershadow": 1.0,
      "music": "music_cavemine",
      "ambientsound1": "Cave_ambience_loop",
      "basewaa": "shaggydogcave",
      "elements": {
        "beaniron": {
          "asset": "none",
          "usedasset": null,
          "x": 4391.0,
          "z": 332.0,
          "height": 50.0,
          "width": 50.0,
          "condition": "hasskill(cookery)",
          "script": "shaggydogcave_beaniron1",
          "proximity": 0.0,
          "emitter": "twinkles",
          "notilt": 1.0
        },
        "exit": {
          "asset": "caveopening2",
          "usedasset": null,
          "x": 101.0,
          "z": 255.0,
          "height": 525.0,
          "width": 536.0,
          "condition": "",
          "script": "autoscript__shaggydogcave_interior__exit__exec",
          "proximity": 0.0,
          "extendback": 1.0,
          "noshadow": 1.0
        },
        "monolith": {
          "asset": "elvmonolith_off",
          "usedasset": "elvmonolith_on",
          "x": 389.0,
          "z": 69.0,
          "height": 446.0,
          "width": 392.0,
          "condition": "hasflag(shaggydogcave_cache)",
          "script": "elv_monolith",
          "proximity": 0.0,
          "elvibrato": 1.0,
          "": "Maybe write a usedscript popup for this?"
        },
        "monolithnotice": {
          "asset": "none",
          "usedasset": null,
          "x": 325.0,
          "z": 88.0,
          "height": 30.0,
          "width": 30.0,
          "condition": "!hasflag(shaggydogcave_cache)",
          "script": "shaggydogcave_elvcache",
          "proximity": 0.0,
          "extendforward": 1.0,
          "extendback": 1.0,
          "noclip": 1.0
        },
        "p01": {
          "asset": "plaque",
          "usedasset": null,
          "x": 512.0,
          "z": 313.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "shaggydog_plaque",
          "proximity": 0.0,
          "notilt": 1.0
        },
        "p02": {
          "asset": "plaque",
          "usedasset": null,
          "x": 1024.0,
          "z": 313.0,
          "height": 212.0,
          "width": 274.0,
          "condition": "",
          "script": "shaggydog_plaque",
          "proximity": 0.0,
          "notilt": 1.0
        },
        "p03": {
          "asset": "plaque",
          "usedasset": null,
          "x": 1537.0,
          "z": 313.0,
          "height": 212.0,
          "width": 274.0,
          "condition": "",
          "script": "shaggydog_plaque",
          "proximity": 0.0,
          "notilt": 1.0
        },
        "p04": {
          "asset": "plaque",
          "usedasset": null,
          "x": 2048.0,
          "z": 313.0,
          "height": 212.0,
          "width": 274.0,
          "condition": "",
          "script": "shaggydog_plaque",
          "proximity": 0.0,
          "notilt": 1.0
        },
        "p05": {
          "asset": "plaque",
          "usedasset": null,
          "x": 2600.0,
          "z": 313.0,
          "height": 212.0,
          "width": 274.0,
          "condition": "",
          "script": "shaggydog_plaque",
          "proximity": 0.0,
          "notilt": 1.0
        },
        "p06": {
          "asset": "plaque",
          "usedasset": null,
          "x": 3096.0,
          "z": 313.0,
          "height": 212.0,
          "width": 274.0,
          "condition": "",
          "script": "shaggydog_plaque",
          "proximity": 0.0,
          "notilt": 1.0
        },
        "p07": {
          "asset": "plaque",
          "usedasset": null,
          "x": 3700.0,
          "z": 313.0,
          "height": 212.0,
          "width": 274.0,
          "condition": "",
          "script": "shaggydog_plaque",
          "proximity": 0.0,
          "notilt": 1.0
        },
        "p08": {
          "asset": "plaque",
          "usedasset": null,
          "x": 4100.0,
          "z": 313.0,
          "height": 212.0,
          "width": 274.0,
          "condition": "",
          "script": "shaggydog_plaque",
          "proximity": 0.0,
          "notilt": 1.0
        },
        "p09": {
          "asset": "plaque",
          "usedasset": null,
          "x": 5050.0,
          "z": 313.0,
          "height": 212.0,
          "width": 274.0,
          "condition": "",
          "script": "shaggydog_plaque",
          "proximity": 0.0,
          "notilt": 1.0
        },
        "p10": {
          "asset": "plaque",
          "usedasset": null,
          "x": 5600.0,
          "z": 313.0,
          "height": 212.0,
          "width": 274.0,
          "condition": "",
          "script": "shaggydog_plaque",
          "proximity": 0.0,
          "notilt": 1.0
        },
        "p11": {
          "asset": "plaque",
          "usedasset": null,
          "x": 6150.0,
          "z": 313.0,
          "height": 212.0,
          "width": 274.0,
          "condition": "",
          "script": "shaggydog_plaque",
          "proximity": 0.0,
          "notilt": 1.0
        },
        "p12": {
          "asset": "plaque",
          "usedasset": null,
          "x": 6800.0,
          "z": 313.0,
          "height": 212.0,
          "width": 274.0,
          "condition": "",
          "script": "shaggydog_plaque",
          "proximity": 0.0,
          "notilt": 1.0
        },
        "p13": {
          "asset": "plaque",
          "usedasset": null,
          "x": 7300.0,
          "z": 313.0,
          "height": 212.0,
          "width": 274.0,
          "condition": "",
          "script": "shaggydog_plaque",
          "proximity": 0.0,
          "notilt": 1.0
        },
        "p14": {
          "asset": "plaque",
          "usedasset": null,
          "x": 7900.0,
          "z": 313.0,
          "height": 212.0,
          "width": 274.0,
          "condition": "",
          "script": "shaggydog_plaque",
          "proximity": 0.0,
          "notilt": 1.0
        },
        "p15": {
          "asset": "plaque",
          "usedasset": null,
          "x": 8450.0,
          "z": 313.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "shaggydog_plaque",
          "proximity": 0.0,
          "notilt": 1.0
        },
        "p16": {
          "asset": "plaque",
          "usedasset": null,
          "x": 9392.0,
          "z": 313.0,
          "height": 212.0,
          "width": 274.0,
          "condition": "",
          "script": "shaggydog_plaque",
          "proximity": 0.0,
          "notilt": 1.0
        },
        "pardner": {
          "asset": "person",
          "usedasset": null,
          "x": 338.0,
          "z": 225.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "pardner",
          "proximity": 0.0
        },
        "rock1": {
          "asset": "rocks1",
          "usedasset": null,
          "x": 377.0,
          "z": 83.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock2": {
          "asset": "rocks5",
          "usedasset": null,
          "x": 374.0,
          "z": 51.0,
          "height": 42.0,
          "width": 102.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock3": {
          "asset": "rocks5",
          "usedasset": null,
          "x": 503.0,
          "z": 87.0,
          "height": 42.0,
          "width": 102.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rock4": {
          "asset": "rocks6",
          "usedasset": null,
          "x": 505.0,
          "z": 50.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "rocks1": {
          "asset": "rocks2",
          "usedasset": null,
          "x": 89.0,
          "z": 250.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendback": 1.0
        },
        "rocks2": {
          "asset": "rocks1",
          "usedasset": null,
          "x": 256.0,
          "z": 253.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendback": 1.0,
          "flip": 1.0
        },
        "s1": {
          "asset": "stalag1",
          "usedasset": null,
          "x": 1000.0,
          "z": 50.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "s10": {
          "asset": "stalag2",
          "usedasset": null,
          "x": 2955.0,
          "z": 74.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "s11": {
          "asset": "stalag3",
          "usedasset": null,
          "x": 2500.0,
          "z": 90.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "s12": {
          "asset": "stalag4",
          "usedasset": null,
          "x": 4500.0,
          "z": 65.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "s13": {
          "asset": "stalag5",
          "usedasset": null,
          "x": 4900.0,
          "z": 200.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "s14": {
          "asset": "stalag6",
          "usedasset": null,
          "x": 4069.0,
          "z": 89.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "s15": {
          "asset": null,
          "usedasset": null,
          "x": 6000.0,
          "z": 120.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "s16": {
          "asset": "stalagcluster1",
          "usedasset": null,
          "x": 6984.0,
          "z": 46.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "s17": {
          "asset": "stalagcluster3",
          "usedasset": null,
          "x": 650.0,
          "z": 170.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "s18": {
          "asset": "stalagcluster2",
          "usedasset": null,
          "x": 8000.0,
          "z": 0.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "s19": {
          "asset": "stalagcluster1",
          "usedasset": null,
          "x": 5500.0,
          "z": 25.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "s2": {
          "asset": "stalag2",
          "usedasset": null,
          "x": 2500.0,
          "z": 95.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "s20": {
          "asset": "stalagcluster3",
          "usedasset": null,
          "x": 1200.0,
          "z": 200.0,
          "height": 278.0,
          "width": 196.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "s21": {
          "asset": "stalagcluster1",
          "usedasset": null,
          "x": 1950.0,
          "z": 130.0,
          "height": 562.0,
          "width": 258.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "s22": {
          "asset": "stalag7",
          "usedasset": null,
          "x": 7500.0,
          "z": 200.0,
          "height": 477.0,
          "width": 138.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "s23": {
          "asset": "stalag3",
          "usedasset": null,
          "x": 8500.0,
          "z": 150.0,
          "height": 580.0,
          "width": 141.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "s3": {
          "asset": "stalag3",
          "usedasset": null,
          "x": 1500.0,
          "z": 60.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "s4": {
          "asset": "stalag5",
          "usedasset": null,
          "x": 3000.0,
          "z": 100.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "s5": {
          "asset": "stalag4",
          "usedasset": null,
          "x": 3500.0,
          "z": 170.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "s6": {
          "asset": "stalag6",
          "usedasset": null,
          "x": 6500.0,
          "z": 100.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "s7": {
          "asset": null,
          "usedasset": null,
          "x": 0.0,
          "z": 210.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "s8": {
          "asset": "stalag7",
          "usedasset": null,
          "x": 6000.0,
          "z": 65.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0
        },
        "s9": {
          "asset": "stalag1",
          "usedasset": null,
          "x": 3896.0,
          "z": 241.0,
          "height": 0.0,
          "width": 0.0,
          "condition": "",
          "script": "",
          "proximity": 0.0,
          "extendback": 1.0
        },
        "treasurehole": {
          "asset": "bighole",
          "usedasset": null,
          "x": 9319.0,
          "z": 91.0,
          "height": 88.0,
          "width": 378.0,
          "condition": "",
          "script": "shaggydogcave_hole",
          "proximity": 0.0
        }
      },
      "parentwaa": "shaggydogcave"
    }
  }
}